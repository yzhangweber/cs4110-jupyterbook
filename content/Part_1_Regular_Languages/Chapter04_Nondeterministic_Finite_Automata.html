
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="article:modified_time" content="2025-08-27T15:04:06-06:00" />
    <title>5. Nondeterministic Finite Automata &#8212; Decode Computation:Hands-On Formal Languages and Algorithms</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/Part_1_Regular_Languages/Chapter04_Nondeterministic_Finite_Automata';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6. Kleene’s Theorem (Part 1)" href="Chapter05_Kleene%27s_Theorem_Part1.html" />
    <link rel="prev" title="4. Finite Automata" href="Chapter03_Finite_Automata.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Aug 27, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Decode Computation:Hands-On Formal Languages and Algorithms - Home"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="Decode Computation:Hands-On Formal Languages and Algorithms - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Decode Computation︰ Hands-On Formal Languages and Algorithms
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preliminary Material</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Part_0_Preliminary_Material/Chapter00_Set_Theory.html">1. Set Theory</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Regular Languages</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Chapter01_Languages.html">2. Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chapter02_Regular_Expressions.html">3. Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chapter03_Finite_Automata.html">4. Finite Automata</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">5. Nondeterministic Finite Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chapter05_Kleene%27s_Theorem_Part1.html">6. Kleene’s Theorem (Part 1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chapter06_Kleene%27s_Theorem_Part2.html">7. Kleene’s Theorem (Part 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chapter07_Nonregular_Languages.html">8. Nonregular Languages</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Context Free Languages</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Part_2_Context_Free_Languages/Chapter_08/Chapter08_Fundamentals_of_CFG.html">9. Fundamentals of Context-Free Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_2_Context_Free_Languages/Chapter_09/Chapter09_CFG_Normal_Forms_and_Transformations.html">10. Normal Forms and Transformations in Context-Free Grammars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_2_Context_Free_Languages/Chapter_10/Chapter10_PDA.html">11. Pushdown Automata (PDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_2_Context_Free_Languages/Chapter_11/Chapter11_Properties_of_Context_free%20Languages.html">12. Properties of Context-free Languages (CFL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_2_Context_Free_Languages/Chapter_12/Chapter12_Decidability_in_CFG.html">13. Decidability in Context-Free Grammars (CFGs)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Turing Machines</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Part_3_Turing_Machines/Chapter_13/Chapter13_Introduction_to_Turing_Machines.html">14. Introduction to Turing Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_3_Turing_Machines/Chapter_14/Chapter14_Turing_Machine_Languages.html">15. Turing Machine Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_3_Turing_Machines/Chapter_15/Chapter15_Turing_Machine_Encoding.html">16. Turing Machine Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_3_Turing_Machines/Chapter_16/Chapter16_Universal_Turing_Machine.html">17. The Universal Turing Machine</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced Topics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Part_4_Advanced_Topics/Chapter17_P_and_NP_Problems.html">18. P and NP Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Part_4_Advanced_Topics/Chapter18_NP_Completeness.html">19. NP-Completeness</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Appendix/Jupyter%20Notebook%20Setup%20Guide.html">20. Appendix: Getting Started with Jupyter Notebooks (JupyterLab and Google Colab)</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fcontent/Part_1_Regular_Languages/Chapter04_Nondeterministic_Finite_Automata.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/Part_1_Regular_Languages/Chapter04_Nondeterministic_Finite_Automata.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Nondeterministic Finite Automata</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-idea-of-nondeterminism">1. The Idea of Nondeterminism</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dfas-vs-nfas">2. DFAs vs. NFAs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formal-definition-of-a-nfa">3. Formal Definition of a NFA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representing-nondeterministic-finite-automata-in-python">4. Representing Nondeterministic Finite Automata in Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#equivalence-of-nfas-and-dfas">5. Equivalence of NFAs and DFAs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constructing-an-equivalent-dfa-from-an-nfa">5.1 Constructing an Equivalent DFA from an NFA</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#proof-of-the-equivalence-of-nfas-and-dfas">5.2 Proof of the Equivalence of NFAs and DFAs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practice-exercises">6. Practice Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">7. Further Reading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-nfa-class-with-all-methods">8. Appendix: NFA Class with All Methods</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="nondeterministic-finite-automata">
<h1><span class="section-number">5. </span>Nondeterministic Finite Automata<a class="headerlink" href="#nondeterministic-finite-automata" title="Link to this heading">#</a></h1>
<p>After completing this chapter, you will be able to:</p>
<ul class="simple">
<li><p>Define a nondeterministic finite automaton (NFA).</p></li>
<li><p>Explain the difference between a deterministic finite automaton (DFA) and an NFA.</p></li>
<li><p>Represent an NFA with a state diagram.</p></li>
<li><p>Define a language with an NFA.</p></li>
<li><p>Understand the equivalence of DFAs and NFAs.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">graphviz</span><span class="w"> </span><span class="kn">import</span> <span class="n">Digraph</span><span class="p">,</span> <span class="n">Source</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>

<span class="c1"># Check if &#39;dot&#39; executable is on PATH</span>
<span class="n">dot_path</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s2">&quot;dot&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">dot_path</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Graphviz is installed at: </span><span class="si">{</span><span class="n">dot_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Graphviz is not found on PATH.&quot;</span><span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;PATH&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Graphviz is installed at: C:\Program Files\Graphviz\bin\dot.EXE
D:\Python313\Scripts\;D:\Python313\;C:\Program Files\Common Files\Oracle\Java\javapath;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\WINDOWS\System32\OpenSSH\;C:\Program Files\Git\cmd;C:\Program Files\Java\apache-maven-3.9.11\bin;C:\Program Files\Docker\Docker\resources\bin;C:\Program Files\nodejs\;C:\ProgramData\chocolatey\bin;C:\Program Files\nodejs;C:\Program Files\Graphviz\bin;C:\Users\yongz\AppData\Local\Programs\Python\Launcher\;C:\Users\yongz\AppData\Local\Microsoft\WindowsApps;C:\Users\yongz\AppData\Local\GitHubDesktop\bin;C:\Users\yongz\AppData\Roaming\npm
</pre></div>
</div>
</div>
</div>
<section id="the-idea-of-nondeterminism">
<h2>1. The Idea of Nondeterminism<a class="headerlink" href="#the-idea-of-nondeterminism" title="Link to this heading">#</a></h2>
<p>For the finite automata we’ve seen so far, if you’re at any state in the automaton then every letter in the input alphabet <span class="math notranslate nohighlight">\(\Sigma\)</span> has a single corresponding transition. This means that at any state there is one and only one place to go for a given input, and consequently for any sequence of inputs there’s only one corresponding path in the finite automaton. There are no options, and there is no ambiguity. This is why we called them <em>deterministic</em> finite automaton - for any input string, the path and final destination in the finite automaton is <em>uniquely determined</em>.</p>
<p>We’re now going to modify this, and introduce an element of choice. This means that for any given input string, there might be multiple corresponding paths through the finite automaton, depending on the choices that are made. We will call these finite automata <em>nondeterministic finute automata</em>, and they are the focus of this section.</p>
<p>As an example, take a look at the state diagram below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">()</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="n">rankdir</span><span class="o">=</span><span class="s1">&#39;LR&#39;</span><span class="p">)</span> <span class="c1"># This specifies the diagram should go left to right</span>

<span class="c1"># Start arrow</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;q0&#39;</span><span class="p">)</span>

<span class="c1"># States</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span> <span class="c1"># Initial state</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;q3&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;doublecircle&#39;</span><span class="p">)</span> <span class="c1"># Accept state</span>

<span class="c1"># Transitions</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a,b&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="s1">&#39;q3&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&lt;&amp;lambda;&gt;&#39;</span><span class="p">)</span>
<span class="n">NFA_example</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;q3&#39;</span><span class="p">,</span> <span class="s1">&#39;q3&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a,b&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Source</span><span class="p">(</span><span class="n">NFA_example</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/511485e52d32f57e152033c8cfdaf066bb82c56929f8cf5f5a86d87d95c4b014.svg" src="../../_images/511485e52d32f57e152033c8cfdaf066bb82c56929f8cf5f5a86d87d95c4b014.svg" />
</div>
</div>
<p>Notice a few things we haven’t seen before:</p>
<ul class="simple">
<li><p>At our initial state <span class="math notranslate nohighlight">\(q_{0}\)</span>, there are <em>two</em> transitions corresponding with the input <span class="math notranslate nohighlight">\(b\)</span>.</p></li>
<li><p>At the state <span class="math notranslate nohighlight">\(q_{1}\)</span> there is no transition for the input <span class="math notranslate nohighlight">\(a\)</span>.</p></li>
<li><p>At the state <span class="math notranslate nohighlight">\(q_{2}\)</span> there is a transition for the empty input <span class="math notranslate nohighlight">\(\lambda\)</span>.</p></li>
</ul>
<p>What do these changes mean? They mean:</p>
<ul class="simple">
<li><p>At state <span class="math notranslate nohighlight">\(q_{0}\)</span>, if the input is a <span class="math notranslate nohighlight">\(b\)</span>, then there are two possible transitions for this input (either stay at <span class="math notranslate nohighlight">\(q_{0}\)</span> or move to <span class="math notranslate nohighlight">\(q_{1}\)</span>), and a choice must be made as to which path to follow.</p></li>
<li><p>At state <span class="math notranslate nohighlight">\(q_{1}\)</span> if the input is an <span class="math notranslate nohighlight">\(a\)</span> then there is no path to follow, and in this situation our path terminates or “crashes”.</p></li>
<li><p>At state <span class="math notranslate nohighlight">\(q_{2}\)</span> a choice can be made to transition to <span class="math notranslate nohighlight">\(q_{3}\)</span> without even reading an input. However, this choice isn’t forced, and staying at <span class="math notranslate nohighlight">\(q_{2}\)</span> is also an option.</p></li>
</ul>
<p>These changes mean that for a given sequence of input characters there might be multiple possibilities for the state of the NFA, or there might be none. For example:</p>
<ul class="simple">
<li><p>The input sequence <span class="math notranslate nohighlight">\(aba\)</span> has two possible states final states, <span class="math notranslate nohighlight">\(q_{0}\)</span> or <span class="math notranslate nohighlight">\(q_{3}\)</span>, depending on whether the <span class="math notranslate nohighlight">\(\lambda\)</span>-transition is made at <span class="math notranslate nohighlight">\(q_{2}\)</span>.</p></li>
<li><p>The input sequence <span class="math notranslate nohighlight">\(aab\)</span> has no possible final state, because after reading the first <span class="math notranslate nohighlight">\(a\)</span> the automaton must transition from <span class="math notranslate nohighlight">\(q_{0}\)</span> to <span class="math notranslate nohighlight">\(q_{1}\)</span>, and then after reading the second <span class="math notranslate nohighlight">\(a\)</span> there is no corresponding transition and the path terminates.</p></li>
<li><p>The input sequence <span class="math notranslate nohighlight">\(abb\)</span> has only one possible final state, corresponding to transitioning from <span class="math notranslate nohighlight">\(q_{0}\)</span> to <span class="math notranslate nohighlight">\(q_{1}\)</span> after the <span class="math notranslate nohighlight">\(a\)</span> is read, transitioning from <span class="math notranslate nohighlight">\(q_{1}\)</span> to <span class="math notranslate nohighlight">\(q_{2}\)</span> after the first <span class="math notranslate nohighlight">\(b\)</span> is read, transitioning from <span class="math notranslate nohighlight">\(q_{2}\)</span> to <span class="math notranslate nohighlight">\(q_{3}\)</span> with the <span class="math notranslate nohighlight">\(\lambda\)</span>-transition, and then transitioning from <span class="math notranslate nohighlight">\(q_{3}\)</span> to <span class="math notranslate nohighlight">\(q_{3}\)</span> (staying put) when the final <span class="math notranslate nohighlight">\(b\)</span> is read. If the transition from <span class="math notranslate nohighlight">\(q_{2}\)</span> to <span class="math notranslate nohighlight">\(q_{3}\)</span> with the <span class="math notranslate nohighlight">\(\lambda\)</span>-transition is not chosen, then the second <span class="math notranslate nohighlight">\(b\)</span> has no corresponding transition and the path terminates.</p></li>
</ul>
<p>We say that an NFA accepts a given input string if <em>any</em> of the possible final states are accepting states. So, it would accept both <span class="math notranslate nohighlight">\(aba\)</span> and <span class="math notranslate nohighlight">\(abb\)</span>, even though one of the possible final states for the sequence <span class="math notranslate nohighlight">\(aba\)</span> isn’t an accepting state.</p>
</section>
<section id="dfas-vs-nfas">
<h2>2. DFAs vs. NFAs<a class="headerlink" href="#dfas-vs-nfas" title="Link to this heading">#</a></h2>
<p>The table below summarizes the important differences between DFAs and NFAs.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>DFAs</p></th>
<th class="head"><p>NFAs</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>One unique starting state.</p></td>
<td><p>At least one starting state, but possibly more.</p></td>
</tr>
<tr class="row-odd"><td><p>Every state has exactly one transition for every character in the input alphabet (<span class="math notranslate nohighlight">\(\Sigma\)</span>).</p></td>
<td><p>States can have multiple transition for a character in <span class="math notranslate nohighlight">\(\Sigma\)</span>, or none at all.</p></td>
</tr>
<tr class="row-even"><td><p>At any step in the reading of the input string, the DFA is in one unique state.</p></td>
<td><p>At any step in the reading of the input string, the NFA can be in multiple states, or none at all.</p></td>
</tr>
<tr class="row-odd"><td><p>A DFA accepts an input string if after reading the string it’s in an accepting state.</p></td>
<td><p>A NFA accepts an input string if after reading the string it could possibly be in an accepting state.</p></td>
</tr>
</tbody>
</table>
</div>
<p>The NFA is much more flexible than the DFA, and you might think this would mean there are languages that can be recognized by a NFA that cannot be recognized by a DFA. However, we’ll see this is not the case.</p>
</section>
<section id="formal-definition-of-a-nfa">
<h2>3. Formal Definition of a NFA<a class="headerlink" href="#formal-definition-of-a-nfa" title="Link to this heading">#</a></h2>
<p>Formally, a nondeterministic finite automaton is a 5-tuple <span class="math notranslate nohighlight">\((Q,\Sigma,\delta,S,F)\)</span> where:</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(Q\)</span> is a <em>finite</em> set of states,</p></li>
<li><p><span class="math notranslate nohighlight">\(\Sigma\)</span> is a finite alphabet,</p></li>
<li><p><span class="math notranslate nohighlight">\(\delta : Q \times \Sigma_{\lambda} \rightarrow P(Q)\)</span> is the transition function,</p></li>
<li><p><span class="math notranslate nohighlight">\(S \subseteq Q\)</span> is the (non-empty) subset of start states, and</p></li>
<li><p><span class="math notranslate nohighlight">\(F \subseteq Q\)</span> is the set of accepting states.</p></li>
</ol>
<p>Here <span class="math notranslate nohighlight">\(\Sigma_{\lambda}\)</span> means the finite alphabet <span class="math notranslate nohighlight">\(\Sigma\)</span> plus the empty string, represented by the symbol <span class="math notranslate nohighlight">\(\lambda\)</span>. So, if <span class="math notranslate nohighlight">\(\Sigma = \{a,b\}\)</span>, then <span class="math notranslate nohighlight">\(\Sigma_{\lambda} = \{a,b,\lambda\}\)</span>. The term <span class="math notranslate nohighlight">\(P(Q)\)</span> is the <em>powerset</em> of <span class="math notranslate nohighlight">\(Q\)</span>, and represents the set of all possible subsets of <span class="math notranslate nohighlight">\(Q\)</span>. We need the powerset because a given state and input combination can have more than one resulting state. For example, in the NFA from Section 1.4.1 above, the transition function for <span class="math notranslate nohighlight">\(q_{0}\)</span> and the input <span class="math notranslate nohighlight">\(b\)</span> would be <span class="math notranslate nohighlight">\(\delta(q_{0},b) \rightarrow \{q_{0},q_{1}\}\)</span>, because in <span class="math notranslate nohighlight">\(q_{0}\)</span> with the input <span class="math notranslate nohighlight">\(b\)</span> the NFA can either stay at <span class="math notranslate nohighlight">\(q_{0}\)</span> or transition to <span class="math notranslate nohighlight">\(q_{1}\)</span>.</p>
</section>
<section id="representing-nondeterministic-finite-automata-in-python">
<h2>4. Representing Nondeterministic Finite Automata in Python<a class="headerlink" href="#representing-nondeterministic-finite-automata-in-python" title="Link to this heading">#</a></h2>
<p>We’re going to modify the DFA class we created in Section 1.3. First, we’ll define how the class is constructed, provide a validation method to ensure the arguments (the 5-tuple) properly define a NFA, and provide methods for constructing and displaying the NFA’s state diagram. These are all similar to the DFA class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">NFA</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">,</span> <span class="n">alphabet</span><span class="p">,</span> <span class="n">transition_function</span><span class="p">,</span> <span class="n">start_states</span><span class="p">,</span> <span class="n">accept_states</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">states</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alphabet</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">alphabet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transition_function</span> <span class="o">=</span> <span class="n">transition_function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_states</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">start_states</span><span class="p">)</span> <span class="c1"># Modified to use a set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept_states</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">accept_states</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_states</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Start states must be a subset of states.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">accept_states</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Accept states must be a subset of states.&quot;</span><span class="p">)</span>

        <span class="c1"># Ensure all transitions are to valid states and symbols</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">symbol</span><span class="p">),</span> <span class="n">next_state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transition_function</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid transition: (</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">) - source state not in states.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alphabet</span> <span class="ow">and</span> <span class="n">symbol</span> <span class="o">!=</span> <span class="s1">&#39;&lt;&amp;lambda;&gt;&#39;</span><span class="p">:</span> <span class="c1"># Allow lambda transitions</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Symbol &#39;</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&#39; not in alphabet.&quot;</span><span class="p">)</span>
            <span class="c1"># Check if the destination is a set of states and if all states in the set are valid</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">next_state</span><span class="p">,</span> <span class="nb">set</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">next_state</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="p">):</span>
                 <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid transition: (</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">) → </span><span class="si">{</span><span class="n">next_state</span><span class="si">}</span><span class="s2"> - destination is not a set of states or contains invalid states.&quot;</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">_build_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dot</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">()</span>
        <span class="n">dot</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="n">rankdir</span><span class="o">=</span><span class="s1">&#39;LR&#39;</span><span class="p">)</span>
        <span class="n">dot</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
        <span class="c1"># Handle multiple start states</span>
        <span class="k">for</span> <span class="n">start_state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_states</span><span class="p">:</span>
          <span class="n">dot</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">start_state</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="p">:</span>
          <span class="n">shape</span> <span class="o">=</span> <span class="s1">&#39;doublecircle&#39;</span> <span class="k">if</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">accept_states</span> <span class="k">else</span> <span class="s1">&#39;circle&#39;</span>
          <span class="n">dot</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span>

        <span class="c1"># Handle transitions to sets of states</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">symbol</span><span class="p">),</span> <span class="n">dst_set</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transition_function</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">dst_set</span><span class="p">:</span>
                <span class="n">dot</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">symbol</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dot</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_graph</span><span class="p">()</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Source</span><span class="p">(</span><span class="n">dot</span><span class="o">.</span><span class="n">source</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>We can use this to display the state diagram for the example DFA from Section 1.4.1:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example_1_4_1</span> <span class="o">=</span> <span class="n">NFA</span><span class="p">(</span>
    <span class="n">states</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="s1">&#39;q3&#39;</span><span class="p">},</span>
    <span class="n">alphabet</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="n">transition_function</span><span class="o">=</span><span class="p">{</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;q1&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q1&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;lambda;&gt;&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q3&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q3&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q3&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q3&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q3&#39;</span><span class="p">},</span>
    <span class="p">},</span>
    <span class="n">start_states</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">},</span>
    <span class="n">accept_states</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;q3&#39;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">NFA_example_1_4_1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/bdd44056c84fb25a6f13a7f9efd8a89e4af77cfe8a1a66ad7c52415b0e5f024d.svg" src="../../_images/bdd44056c84fb25a6f13a7f9efd8a89e4af77cfe8a1a66ad7c52415b0e5f024d.svg" />
</div>
</div>
<p>As with the DFA, we can construct a method for tracing the sequence of states of the automaton as it processes an input string. However, unlike with the DFA, for an NFA this won’t be a sequence of states but a sequence of sets of states.</p>
<p>First, we’ll want to create a function that takes a set of states and a transition function, and determines all the states that can be reached from this set just through <span class="math notranslate nohighlight">\(\lambda\)</span>-transitions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Function for finding all the states that can be reached from a set of states through lambda-transitions</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lambda_closure</span><span class="p">(</span><span class="n">states</span><span class="p">,</span> <span class="n">transition_function</span><span class="p">):</span>
  <span class="n">lambda_states</span> <span class="o">=</span> <span class="n">states</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
  <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;lambda;&gt;&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">transition_function</span><span class="p">:</span>
      <span class="n">lambda_states</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">transition_function</span><span class="p">[(</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;lambda;&gt;&#39;</span><span class="p">)])</span>
  <span class="k">if</span> <span class="n">lambda_states</span> <span class="o">!=</span> <span class="n">states</span><span class="p">:</span>
    <span class="n">lambda_states</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">lambda_closure</span><span class="p">(</span><span class="n">lambda_states</span><span class="p">,</span> <span class="n">transition_function</span><span class="p">))</span> <span class="c1">#Note the use of recursion</span>
  <span class="k">return</span> <span class="n">lambda_states</span>
</pre></div>
</div>
</div>
</div>
<p>Now, we’ll create a method for tracing through the sequence of states of an NFA as it processes an input string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Method for tracing through the sequence of states of the nondeterministic finite automaton as it processes an input string.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_string</span><span class="p">):</span>
  <span class="n">current_states</span> <span class="o">=</span> <span class="n">lambda_closure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_states</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transition_function</span><span class="p">)</span>
  <span class="n">trace</span> <span class="o">=</span> <span class="p">[</span><span class="n">current_states</span><span class="p">]</span>
  <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">input_string</span><span class="p">:</span>
    <span class="n">next_states</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">current_states</span><span class="p">:</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transition_function</span><span class="p">:</span>
        <span class="n">next_states</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transition_function</span><span class="p">[(</span><span class="n">state</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)])</span>
    <span class="n">current_states</span> <span class="o">=</span> <span class="n">lambda_closure</span><span class="p">(</span><span class="n">next_states</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transition_function</span><span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_states</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">trace</span>

<span class="n">NFA</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="n">trace</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s check how this method handles the three example inputs from the end of Section 1.4.1:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example_1_4_1</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;aba&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;q0&#39;}, {&#39;q1&#39;}, {&#39;q2&#39;, &#39;q3&#39;}, {&#39;q0&#39;, &#39;q3&#39;}]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example_1_4_1</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;aab&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;q0&#39;}, {&#39;q1&#39;}, set(), set()]
</pre></div>
</div>
</div>
</div>
<p><em>NOTE</em> - Here <em>set()</em> means the empty set <span class="math notranslate nohighlight">\(\emptyset\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example_1_4_1</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;abb&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;q0&#39;}, {&#39;q1&#39;}, {&#39;q2&#39;, &#39;q3&#39;}, {&#39;q3&#39;}]
</pre></div>
</div>
</div>
</div>
<p>Finally, we can use this <em>trace</em> method to construct a method that determines whether an NFA accepts a given input string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">accepts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_string</span><span class="p">):</span>
  <span class="n">trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">input_string</span><span class="p">)</span>
  <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">accept_states</span> <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">trace</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="n">NFA</span><span class="o">.</span><span class="n">accepts</span> <span class="o">=</span> <span class="n">accepts</span>
</pre></div>
</div>
</div>
</div>
<p>Checking this on the NFA from Section 1.4.1 and the three example inputs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example_1_4_1</span><span class="o">.</span><span class="n">accepts</span><span class="p">(</span><span class="s1">&#39;aba&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example_1_4_1</span><span class="o">.</span><span class="n">accepts</span><span class="p">(</span><span class="s1">&#39;aab&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_example_1_4_1</span><span class="o">.</span><span class="n">accepts</span><span class="p">(</span><span class="s1">&#39;abb&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>As in Chapter 1.3, the best practice here would be to include all this within the definition of the NFA class, and we provide code for doing this as an appendix to chapter.</p>
</section>
<section id="equivalence-of-nfas-and-dfas">
<h2>5. Equivalence of NFAs and DFAs<a class="headerlink" href="#equivalence-of-nfas-and-dfas" title="Link to this heading">#</a></h2>
<p>We say that an NFA and a DFA are <em>equivalent</em> if they recognize the same language.</p>
<p>DFAs are a special case of NFAs, and so any DFA is also an NFA. This means that, obviously, for any DFA there is an equivalent NFA (the DFA itself).</p>
<p>It’s a bit surprising that the other direction is also true. Namely, for any NFA, there is an equivalent DFA.</p>
<p>While proving this isn’t particularly difficult, it will be the most in-depth proof we’ve seen so far. So, before we present the general proof, we’ll illustrate the idea with an example.</p>
<section id="constructing-an-equivalent-dfa-from-an-nfa">
<h3>5.1 Constructing an Equivalent DFA from an NFA<a class="headerlink" href="#constructing-an-equivalent-dfa-from-an-nfa" title="Link to this heading">#</a></h3>
<p>Suppose you have the NFA below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_a_2nd_to_last</span> <span class="o">=</span> <span class="n">NFA</span><span class="p">(</span>
    <span class="n">states</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;q2&#39;</span><span class="p">},</span>
    <span class="n">alphabet</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="n">transition_function</span><span class="o">=</span><span class="p">{</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;q1&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">},</span>
        <span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">},</span>
    <span class="p">},</span>
    <span class="n">start_states</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;q0&#39;</span><span class="p">},</span>
    <span class="n">accept_states</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">NFA_a_2nd_to_last</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/cfd0cf1eae5a82c3b00244bd475a3ea98168cbb0b8cc69952f7c27b07d8f13ed.svg" src="../../_images/cfd0cf1eae5a82c3b00244bd475a3ea98168cbb0b8cc69952f7c27b07d8f13ed.svg" />
</div>
</div>
<p>This NFA recognizes the language of all strings over the alphabet <span class="math notranslate nohighlight">\(\Sigma = \{a,b\}\)</span> for which <span class="math notranslate nohighlight">\(a\)</span> is the next-to-last letter.</p>
<p>If we gave this NFA the input string <span class="math notranslate nohighlight">\(aba\)</span> then, depending on the choices made, there are two possible states, <span class="math notranslate nohighlight">\(q_{0}\)</span> or <span class="math notranslate nohighlight">\(q_{1}\)</span>, the NFA could be in.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_a_2nd_to_last</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;aba&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;q0&#39;}, {&#39;q0&#39;, &#39;q1&#39;}, {&#39;q0&#39;, &#39;q2&#39;}, {&#39;q0&#39;, &#39;q1&#39;}]
</pre></div>
</div>
</div>
</div>
<p>If we gave this NFA the input string <span class="math notranslate nohighlight">\(aab\)</span> then, again depending on the choices made, there are two possible states, <span class="math notranslate nohighlight">\(q_{0}\)</span> or <span class="math notranslate nohighlight">\(q_{2}\)</span>, the NFA could be in.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_a_2nd_to_last</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;aab&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;q0&#39;}, {&#39;q0&#39;, &#39;q1&#39;}, {&#39;q0&#39;, &#39;q1&#39;, &#39;q2&#39;}, {&#39;q0&#39;, &#39;q2&#39;}]
</pre></div>
</div>
</div>
</div>
<p>As neither <span class="math notranslate nohighlight">\(q_{0}\)</span> not <span class="math notranslate nohighlight">\(q_{1}\)</span> are accepting states, the string <span class="math notranslate nohighlight">\(aba\)</span> would not be accepted by the NFA.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_a_2nd_to_last</span><span class="o">.</span><span class="n">accepts</span><span class="p">(</span><span class="s1">&#39;aba&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>Because <span class="math notranslate nohighlight">\(q_{2}\)</span> is an accepting state the string <span class="math notranslate nohighlight">\(aab\)</span> would be.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NFA_a_2nd_to_last</span><span class="o">.</span><span class="n">accepts</span><span class="p">(</span><span class="s1">&#39;aab&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>We’d like to find a DFA that accepts the same language as this NFA, and to do so the basic idea is the states of this DFA represent all the different possible subsets of states from the NFA. There are three states in this NFA, and so its set of states is <span class="math notranslate nohighlight">\(Q = \{q_{0}, q_{1}, q_{2}\}\)</span>. The possible subsets of <span class="math notranslate nohighlight">\(Q\)</span>, its <em>powerset</em>, is <span class="math notranslate nohighlight">\(P(Q) = \{\emptyset, \{q_{0}\}, \{q_{1}\}, \{q_{2}\}, \{q_{0}, q_{1}\}, \{q_{0}, q_{2}\}, \{q_{1}, q_{2}\}, \{q_{0}, q_{1}, q_{2}\}\}\)</span>. Each of these subsets is a state within our DFA, which we represent below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DFA_states</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">()</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="n">rankdir</span><span class="o">=</span><span class="s1">&#39;LR&#39;</span><span class="p">)</span> <span class="c1"># This specifies the diagram should go left to right</span>

<span class="c1"># States</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q1}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q1,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Source</span><span class="p">(</span><span class="n">DFA_states</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/d5d6485740b60788d09db1090e17a4ec494af281247c9e038830caf4b7819462.svg" src="../../_images/d5d6485740b60788d09db1090e17a4ec494af281247c9e038830caf4b7819462.svg" />
</div>
</div>
<p>Now, suppose we’re in the state <span class="math notranslate nohighlight">\(\{q_{0},q_{1}\}\)</span> and we read the input <span class="math notranslate nohighlight">\(b\)</span>. What is the corresponding transition? Well, it’s the possible states we could transition to in the NFA from either of those states. In the NFA if we’re in state <span class="math notranslate nohighlight">\(q_{0}\)</span> and we read a <span class="math notranslate nohighlight">\(b\)</span>, then we must stay at <span class="math notranslate nohighlight">\(q_{0}\)</span>. If we’re in state <span class="math notranslate nohighlight">\(q_{1}\)</span> and we read a <span class="math notranslate nohighlight">\(b\)</span> then we must transition to <span class="math notranslate nohighlight">\(q_{2}\)</span>. So, in the DFA if we’re in state <span class="math notranslate nohighlight">\(\{q_{0},q_{1}\}\)</span> and we read a <span class="math notranslate nohighlight">\(b\)</span> we transition to the state <span class="math notranslate nohighlight">\(\{q_{0},q_{2}\}\)</span>. What if we’re in state <span class="math notranslate nohighlight">\(\{q_{0},q_{1}\}\)</span> and we read the input <span class="math notranslate nohighlight">\(a\)</span>? Well, in the NFA if we’re in state <span class="math notranslate nohighlight">\(q_{0}\)</span> and we read an <span class="math notranslate nohighlight">\(a\)</span>, then we either stay at <span class="math notranslate nohighlight">\(q_{0}\)</span> or transition to <span class="math notranslate nohighlight">\(q_{1}\)</span>. In the NFA if we’re in state <span class="math notranslate nohighlight">\(q_{1}\)</span> and we read an <span class="math notranslate nohighlight">\(a\)</span>, then we transition to <span class="math notranslate nohighlight">\(q_{2}\)</span>. So, in the DFA if we’re in state <span class="math notranslate nohighlight">\(\{q_{0},q_{1}\}\)</span> and we read an <span class="math notranslate nohighlight">\(a\)</span> we transition to the state <span class="math notranslate nohighlight">\(\{q_{0},q_{1},q_{2}\}\)</span>. The transitions for all the states and possible inputs are represented below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DFA_states_and_edges</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">()</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="n">rankdir</span><span class="o">=</span><span class="s1">&#39;LR&#39;</span><span class="p">)</span> <span class="c1"># This specifies the diagram should go left to right</span>

<span class="c1"># States</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q1}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q1,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>

<span class="c1"># Transitions</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q1}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q1}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Source</span><span class="p">(</span><span class="n">DFA_states_and_edges</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/9895dd9bb000eff3818a84d188cc08c6905e524832ecd14bf5dd0438b7cd9773.svg" src="../../_images/9895dd9bb000eff3818a84d188cc08c6905e524832ecd14bf5dd0438b7cd9773.svg" />
</div>
</div>
<p>Now, what are the initial and final states of the DFA? Well, the initial state of the DFA is the one corresponding with the initial states of the NFA. In this case that’s <span class="math notranslate nohighlight">\(\{q_{0}\}\)</span>. The final states are those that contain at least one final state of the NFA. As the only final state in the NFA is <span class="math notranslate nohighlight">\(q_{2}\)</span>, the accepting states of the DFA are <span class="math notranslate nohighlight">\(\{q_{2}\}, \{q_{0}, q_{2}\}, \{q_{1}, q_{2}\}\)</span>, and <span class="math notranslate nohighlight">\(\{q_{0}, q_{1}, q_{2}\}\)</span>. These are indicated in the state diagram below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DFA_full</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">()</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="n">rankdir</span><span class="o">=</span><span class="s1">&#39;LR&#39;</span><span class="p">)</span> <span class="c1"># This specifies the diagram should go left to right</span>

<span class="c1"># Start arrow</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># States</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q1}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;doublecircle&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;doublecircle&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q1,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;doublecircle&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;doublecircle&#39;</span><span class="p">)</span>

<span class="c1"># Transitions</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q1}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q1}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&amp;empty;&gt;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_full</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Source</span><span class="p">(</span><span class="n">DFA_full</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/14008c0d6bcadd804894d714cd0fe8ca3e5d8d23ef256c87fcf2df03a33c63c9.svg" src="../../_images/14008c0d6bcadd804894d714cd0fe8ca3e5d8d23ef256c87fcf2df03a33c63c9.svg" />
</div>
</div>
<p>At this point we could be done. However, we can note that there are some states and transitions that cannot possibly be reached from the starting state, and so will never actually be involved in the operation of the DFA. Removing them gives us the DFA below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DFA_reduced</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">()</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="n">rankdir</span><span class="o">=</span><span class="s1">&#39;LR&#39;</span><span class="p">)</span>  <span class="c1"># Diagram direction: left to right</span>

<span class="c1"># Start arrow</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Reachable States</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;doublecircle&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;doublecircle&#39;</span><span class="p">)</span>

<span class="c1"># Reachable Transitions</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q1,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;{q0,q1}&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">DFA_reduced</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="s1">&#39;{q0,q2}&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{q0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Source</span><span class="p">(</span><span class="n">DFA_reduced</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/f3323640d66512ef89413e61f75365fb7cdcaecf088f6a48b94934c8816c34ef.svg" src="../../_images/f3323640d66512ef89413e61f75365fb7cdcaecf088f6a48b94934c8816c34ef.svg" />
</div>
</div>
<p>This DFA recognizes the same language (all strings with <span class="math notranslate nohighlight">\(a\)</span> as the next-to-last letter) as the NFA above, and so they are equivalent.</p>
</section>
<section id="proof-of-the-equivalence-of-nfas-and-dfas">
<h3>5.2 Proof of the Equivalence of NFAs and DFAs<a class="headerlink" href="#proof-of-the-equivalence-of-nfas-and-dfas" title="Link to this heading">#</a></h3>
<p>As mentioned above, DFAs are special cases of NFAs, so for any DFA there’s obviously an equivalent NFA - the DFA itself.</p>
<p>Going the other way we’ll want to formalize and generalize the construction we used above. This could be viewed as the first “real” proof of this class. Please don’t be intimidated by it. There’s nothing here that’s more conceptually difficult than what we did in the example above - it just uses more general language.</p>
<p><strong>PROOF</strong></p>
<p>Let <span class="math notranslate nohighlight">\(N = (Q,\Sigma, \delta, S, F)\)</span> be a NFA recognizing some language <span class="math notranslate nohighlight">\(A\)</span>. We construct a DFA <span class="math notranslate nohighlight">\(M = (Q', \Sigma, \delta', q_{0}', F')\)</span> also recognizing <span class="math notranslate nohighlight">\(A\)</span>. Before going through the full construction, we’ll first consider the easier case where <span class="math notranslate nohighlight">\(N\)</span> has no <span class="math notranslate nohighlight">\(\lambda\)</span>-transitions.</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(Q' = P(Q)\)</span>. Every state of <span class="math notranslate nohighlight">\(M\)</span> is a set of states of <span class="math notranslate nohighlight">\(N\)</span>. Recall that <span class="math notranslate nohighlight">\(P(Q)\)</span> is the set of subsets of <span class="math notranslate nohighlight">\(Q\)</span>, knows as the <em>powerset</em> of <span class="math notranslate nohighlight">\(Q\)</span>.</p></li>
<li><p>For <span class="math notranslate nohighlight">\(R \in Q'\)</span> and <span class="math notranslate nohighlight">\(a \in \Sigma\)</span>, let <span class="math notranslate nohighlight">\(\delta'(R,a) = \{q \in Q | q \in \delta(r,a)\)</span> for some <span class="math notranslate nohighlight">\(r \in R\}\)</span>. If <span class="math notranslate nohighlight">\(R\)</span> is a state of <span class="math notranslate nohighlight">\(M\)</span> it is also a set of states of <span class="math notranslate nohighlight">\(N\)</span>. When <span class="math notranslate nohighlight">\(M\)</span> reads a symbol <span class="math notranslate nohighlight">\(a\)</span> in state <span class="math notranslate nohighlight">\(R\)</span>, it shows where <span class="math notranslate nohighlight">\(a\)</span> takes each state in <span class="math notranslate nohighlight">\(R\)</span>. Because each state may go to a set of states, we take the union of all these sets. A compact way of writing this is</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\delta'(R,a) = \bigcup_{r \in R} \delta(r,a)\]</div>
<ol class="arabic simple" start="3">
<li><p><span class="math notranslate nohighlight">\(q_{0}' = S\)</span>. <span class="math notranslate nohighlight">\(M\)</span> starts in the state corresponding to the start states of <span class="math notranslate nohighlight">\(N\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(F' = \{R \in Q | R\)</span> contains an accept state of <span class="math notranslate nohighlight">\(N\}\)</span>. The machine <span class="math notranslate nohighlight">\(M\)</span> accepts if one of the possible states that <span class="math notranslate nohighlight">\(N\)</span> could be in at this point is an accept state.</p></li>
</ol>
<p>For any NFA without <span class="math notranslate nohighlight">\(\lambda\)</span>-transitions (like the example from Subsection 1.4.5.1 above) the construction above will produce an equivalent DFA. For the case where an NFA has <span class="math notranslate nohighlight">\(\lambda\)</span>-transitions, we need to set up an extra bit of notation. For any state <span class="math notranslate nohighlight">\(R\)</span> of <span class="math notranslate nohighlight">\(M\)</span>, we define <span class="math notranslate nohighlight">\(E(R)\)</span> to be the collection of states that can be reached from members of <span class="math notranslate nohighlight">\(R\)</span> by going only along <span class="math notranslate nohighlight">\(\lambda\)</span> arrows, inculding the members of <span class="math notranslate nohighlight">\(R\)</span> themselves. Formally, for <span class="math notranslate nohighlight">\(R \subseteq Q\)</span> let</p>
<div class="math notranslate nohighlight">
\[\displaystyle E(R) = \{q | q$ can be reached from $R$ by traveling along $0$ or more $\lambda$ arrows$\}\]</div>
<p>This operation is the <em>lambda_closure</em> function we defined in Section 1.4.4 above.</p>
<p>We then modify the transition functions of <span class="math notranslate nohighlight">\(M\)</span> to be</p>
<div class="math notranslate nohighlight">
\[\delta'(R,a) = \{q \in Q | q \in E(\delta(r,a))$  for some $r \in R\}\]</div>
<p>Finally, we modify the start state of <span class="math notranslate nohighlight">\(M\)</span> to be all possible states that can be reached from the start states of <span class="math notranslate nohighlight">\(N\)</span> along the <span class="math notranslate nohighlight">\(\lambda\)</span>-transitions. So, we change <span class="math notranslate nohighlight">\(q_{0}'\)</span> to be <span class="math notranslate nohighlight">\(E(S)\)</span>.</p>
<p>With this modification, we have completed the construction of the DFA <span class="math notranslate nohighlight">\(M\)</span> that simulates the NFA <span class="math notranslate nohighlight">\(N\)</span>, and is equivalent to it in that it recognizes the same language over <span class="math notranslate nohighlight">\(\Sigma\)</span>.</p>
</section>
</section>
<section id="practice-exercises">
<h2>6. Practice Exercises<a class="headerlink" href="#practice-exercises" title="Link to this heading">#</a></h2>
<p><strong>NOTE</strong> - For each of these exercises the alpbabet is <span class="math notranslate nohighlight">\(\Sigma = \{a,b\}\)</span>.</p>
<p><strong>Exercise 1</strong>: Construct an NFA with only three states that recognizes the language of all strings that end with the substring <span class="math notranslate nohighlight">\(aa\)</span>.</p>
<p><strong>Exercise 2</strong>: Create the NFA from Exercise 1 in Python as an NFA class, display it, and then verify it accepts the string <span class="math notranslate nohighlight">\(baa\)</span> but not <span class="math notranslate nohighlight">\(aba\)</span>.</p>
<p><strong>Exercise 3</strong>: Construct a DFA equivalent to the NFA above using the method from Section 1.4.5.</p>
<p><strong>Exercise 4</strong> (Major Challenge): Write a Python function that accepts an NFA class (described in this chapter), and outputs an equivalent DFA class (defined in the previous chapter.</p>
</section>
<section id="further-reading">
<h2>7. Further Reading<a class="headerlink" href="#further-reading" title="Link to this heading">#</a></h2>
<ul>
<li><p><a class="reference external" href="https://www.amazon.com/Introduction-Computer-Theory-Daniel-Cohen/dp/0471137723">Introduction to Computer Theory</a> (Second Edition) by Daniel I.A. Cohen</p>
<p><em>Chapter 6 - Transition Graphs</em>, <em>Chapter 7 - Kleene’s Theorem</em></p>
</li>
<li><p><a class="reference external" href="https://www.amazon.com/Introduction-Automata-Theory-Languages-Computation/dp/0321462254">Automata Theory, Languages, and Computation</a> (Third Edition) by Hopcroft, Motwani, and Ullman</p>
<p><em>Section 2.3 - Nondeterministic Finite Automata</em></p>
</li>
<li><p><a class="reference external" href="https://www.cengage.com/c/introduction-to-the-theory-of-computation-3e-sipser/9781133187790/">Introduction to the Theory of Computation</a> (Third Edition) by Michael Sipser</p>
<p><em>Section 1.2 - Nondeterminism</em></p>
</li>
</ul>
</section>
<section id="appendix-nfa-class-with-all-methods">
<h2>8. Appendix: NFA Class with All Methods<a class="headerlink" href="#appendix-nfa-class-with-all-methods" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">class NFA:</span>
<span class="sd">    def __init__(self, states, alphabet, transition_function, start_states, accept_states):</span>
<span class="sd">        self.states = set(states)</span>
<span class="sd">        self.alphabet = set(alphabet)</span>
<span class="sd">        self.transition_function = transition_function</span>
<span class="sd">        self.start_states = set(start_states) # Modified to use a set</span>
<span class="sd">        self.accept_states = set(accept_states)</span>

<span class="sd">        self._validate()</span>

<span class="sd">    def _validate(self):</span>
<span class="sd">        if not self.start_states.issubset(self.states):</span>
<span class="sd">            raise ValueError(&quot;Start states must be a subset of states.&quot;)</span>
<span class="sd">        if not self.accept_states.issubset(self.states):</span>
<span class="sd">            raise ValueError(&quot;Accept states must be a subset of states.&quot;)</span>

<span class="sd">        # Ensure all transitions are to valid states and symbols</span>
<span class="sd">        for (state, symbol), next_state in self.transition_function.items():</span>
<span class="sd">            if state not in self.states:</span>
<span class="sd">                raise ValueError(f&quot;Invalid transition: ({state}, {symbol}) - source state not in states.&quot;)</span>
<span class="sd">            if symbol not in self.alphabet and symbol != &#39;&lt;&amp;lambda;&gt;&#39;: # Allow lambda transitions</span>
<span class="sd">                raise ValueError(f&quot;Symbol &#39;{symbol}&#39; not in alphabet.&quot;)</span>
<span class="sd">            # Check if the destination is a set of states and if all states in the set are valid</span>
<span class="sd">            if not isinstance(next_state, set) or not next_state.issubset(self.states):</span>
<span class="sd">                 raise ValueError(f&quot;Invalid transition: ({state}, {symbol}) → {next_state} - destination is not a set of states or contains invalid states.&quot;)</span>


<span class="sd">    def _build_graph(self):</span>
<span class="sd">        dot = Digraph()</span>
<span class="sd">        dot.attr(rankdir=&#39;LR&#39;)</span>
<span class="sd">        dot.node(&#39;&#39;, shape=&#39;none&#39;)</span>
<span class="sd">        # Handle multiple start states</span>
<span class="sd">        for start_state in self.start_states:</span>
<span class="sd">          dot.edge(&#39;&#39;, start_state)</span>

<span class="sd">        for state in self.states:</span>
<span class="sd">          shape = &#39;doublecircle&#39; if state in self.accept_states else &#39;circle&#39;</span>
<span class="sd">          dot.node(state, shape=shape)</span>

<span class="sd">        # Handle transitions to sets of states</span>
<span class="sd">        for (src, symbol), dst_set in self.transition_function.items():</span>
<span class="sd">            for dst in dst_set:</span>
<span class="sd">                dot.edge(src, dst, label=symbol)</span>

<span class="sd">        return dot</span>

<span class="sd">    def show(self):</span>
<span class="sd">        dot = self._build_graph()</span>
<span class="sd">        display(Source(dot.source))</span>

<span class="sd">    def _lambda_closure(states, transition_function):</span>
<span class="sd">      lambda_states = states.copy()</span>
<span class="sd">      for state in states:</span>
<span class="sd">        if (state, &#39;&lt;&amp;lambda;&gt;&#39;) in transition_function:</span>
<span class="sd">          lambda_states.update(transition_function[(state, &#39;&lt;&amp;lambda;&gt;&#39;)])</span>
<span class="sd">      if lambda_states != states:</span>
<span class="sd">        lambda_states.update(lambda_closure(lambda_states, transition_function)) #Note the use of recursion</span>
<span class="sd">      return lambda_states</span>

<span class="sd">    def trace(self, input_string):</span>
<span class="sd">      current_states = lambda_closure(self.start_states, self.transition_function)</span>
<span class="sd">      trace = [current_states]</span>
<span class="sd">      for symbol in input_string:</span>
<span class="sd">        next_states = set()</span>
<span class="sd">        for state in current_states:</span>
<span class="sd">          if (state, symbol) in self.transition_function:</span>
<span class="sd">            next_states.update(self.transition_function[(state, symbol)])</span>
<span class="sd">        current_states = lambda_closure(next_states, self.transition_function)</span>
<span class="sd">        trace.append(current_states)</span>
<span class="sd">      return trace</span>

<span class="sd">    def accepts(self, input_string):</span>
<span class="sd">      trace = self.trace(input_string)</span>
<span class="sd">      return any(state in self.accept_states for state in trace[-1])</span>
<span class="sd">&#39;&#39;&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\Part_1_Regular_Languages"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Chapter03_Finite_Automata.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">4. </span>Finite Automata</p>
      </div>
    </a>
    <a class="right-next"
       href="Chapter05_Kleene%27s_Theorem_Part1.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Kleene’s Theorem (Part 1)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-idea-of-nondeterminism">1. The Idea of Nondeterminism</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dfas-vs-nfas">2. DFAs vs. NFAs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formal-definition-of-a-nfa">3. Formal Definition of a NFA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representing-nondeterministic-finite-automata-in-python">4. Representing Nondeterministic Finite Automata in Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#equivalence-of-nfas-and-dfas">5. Equivalence of NFAs and DFAs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constructing-an-equivalent-dfa-from-an-nfa">5.1 Constructing an Equivalent DFA from an NFA</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#proof-of-the-equivalence-of-nfas-and-dfas">5.2 Proof of the Equivalence of NFAs and DFAs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practice-exercises">6. Practice Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">7. Further Reading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-nfa-class-with-all-methods">8. Appendix: NFA Class with All Methods</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yong Zhang, Dylan Zwick
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Aug 27, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>