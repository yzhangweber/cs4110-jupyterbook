
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>12. Decidability in Context-Free Grammars (CFGs) &#8212; Decode Computation:Hands-On Formal Languages and Algorithms</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/Part_2_Context_Free_Languages/Chapter_12/Chapter12_Decidability_in_CFG';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="13. Introduction to Turing Machines" href="../../Part_3_Turing_Machines/Chapter_13/Chapter13_Introduction_to_Turing_Machines.html" />
    <link rel="prev" title="11. Properties of Context-free Languages (CFL)" href="../Chapter_11/Chapter11_Properties_of_Context_free%20Languages.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="Decode Computation:Hands-On Formal Languages and Algorithms - Home"/>
    <script>document.write(`<img src="../../../_static/logo.png" class="logo__image only-dark" alt="Decode Computation:Hands-On Formal Languages and Algorithms - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Decode Computationï¸° Hands-On Formal Languages and Algorithms
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preliminary Material</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_0_Preliminary_Material/Chapter00_Set_Theory.html">1. Chapter 0 - Set Theory</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Regular Languages</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter01_Languages.html">2. Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter02_Regular_Expressions.html">3. Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter03_Finite_Automata.html">4. Finite Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter04_Nondeterministic_Finite_Automata.html">5. Nondeterministic Finite Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter05_Kleene%27s_Theorem_Part1.html">6. Kleeneâs Theorem (Part 1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter07_Nonregular_Languages.html">7. Nonregular Languages</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Context Free Languages</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Chapter_08/Chapter08_Fundamentals_of_CFG.html">8. Fundamentals of Context-Free Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_09/Chapter09_CFG_Normal_Forms_and_Transformations.html">9. Normal Forms and Transformations in Context-Free Grammars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_10/Chapter10_PDA.html">10. Pushdown Automata (PDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_11/Chapter11_Properties_of_Context_free%20Languages.html">11. Properties of Context-free Languages (CFL)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">12. Decidability in Context-Free Grammars (CFGs)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Turing Machines</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_13/Chapter13_Introduction_to_Turing_Machines.html">13. Introduction to Turing Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_14/Chapter14_Turing_Machine_Languages.html">14. Turing Machine Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_15/Chapter15_Turing_Machine_Encoding.html">15. Turing Machine Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_16/Chapter16_Universal_Turing_Machine.html">16. The Universal Turing Machine</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced Topics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_4_Advanced_Topics/Chapter17_P_and_NP_Problems.html">17. P and NP Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_4_Advanced_Topics/Chapter18_NP_Completeness.html">18. NP-Completeness</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Appendix/Jupyter%20Notebook%20Setup%20Guide.html">19. Appendix: Getting Started with Jupyter Notebooks (JupyterLab and Google Colab)</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fcontent/Part_2_Context_Free_Languages/Chapter_12/Chapter12_Decidability_in_CFG.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/content/Part_2_Context_Free_Languages/Chapter_12/Chapter12_Decidability_in_CFG.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Decidability in Context-Free Grammars (CFGs)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#emptiness-problem">1. Emptiness Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#definition">1.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-to-check-emptiness">1.2 Algorithm to Check Emptiness:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">1.3 Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-python-implementation">1.4 Example Python Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uselessness-problem">2. Uselessness Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-to-identify-useless-non-terminals">2.2 Algorithm to Identify Useless Non-terminals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.3 Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">2.4 Example Python Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membership-problem">3. Membership Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">3.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cyk-algorithm-cocke-younger-kasami-for-membership-problem">3.2 CYK Algorithm (Cocke-Younger-Kasami) for Membership Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cyk-algorithm-examples">3.3 CYK Algorithm Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">3.4 Example Python Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#earleys-algorithm-for-membership-problem">3.5 Earleyâs Algorithm for Membership Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">3.6 Example Python Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-between-earley-s-and-cyk-algorithm">3.7 Comparison between Earleyâs and CYK Algorithm</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finiteness-problem">4. Finiteness Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">4.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-to-check-finiteness">4.2 Algorithm to Check Finiteness</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-steps">Algorithm Steps:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">4.3 Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">4.4 Example Python Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practice-exercises">5. Practice Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-short-answer-questions">5.1 Exercise 1: Short Answer Questions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-emptiness-problem">5.2 Exercise 2: Emptiness Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-uselessness-problem">5.3 Exercise 3: Uselessness Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-membership-problem">5.4 Exercise 4: Membership Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5-finiteness-problem">5.5 Exercise 5: Finiteness Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6-integrated-problem">5.6 Exercise 6: Integrated Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-7-algorithm-implementation">5.7 Exercise 7: Algorithm Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">6. Further Reading</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="decidability-in-context-free-grammars-cfgs">
<h1><span class="section-number">12. </span>Decidability in Context-Free Grammars (CFGs)<a class="headerlink" href="#decidability-in-context-free-grammars-cfgs" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>This section explores several decidable problems related to Context-Free Grammars (CFGs). Decidability in formal language theory refers to whether an algorithm exists that can determine the answer to a specific problem for all possible inputs within a given class of languages. For context-free grammars (CFGs), several important problems are decidable, meaning there exist algorithms to solve them effectively. This chapter covers key decidable problems in the context of CFGs, including:</p>
<ul class="simple">
<li><p>Emptiness Problem</p></li>
<li><p>Uselessness Problem</p></li>
<li><p>Membership Problem</p></li>
<li><p>Finiteness Problem</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CFG</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">productions</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a context-free grammar.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            productions: A dictionary mapping non-terminals to lists of productions.</span>
<span class="sd">                Each production is a list of symbols (terminals or non-terminals).</span>
<span class="sd">            start_symbol: The start symbol of the grammar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">productions</span> <span class="o">=</span> <span class="n">productions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_symbol</span> <span class="o">=</span> <span class="n">start_symbol</span>
        
        <span class="c1"># Compute the set of all non-terminals and terminals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">non_terminals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">productions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs_list</span> <span class="ow">in</span> <span class="n">productions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">rhs</span> <span class="ow">in</span> <span class="n">rhs_list</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">rhs</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_terminals</span> <span class="ow">and</span> <span class="n">symbol</span> <span class="o">!=</span> <span class="s2">&quot;â§&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">terminals</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the grammar.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Start symbol: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_symbol</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;Productions:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs_list</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">productions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">rhs</span> <span class="ow">in</span> <span class="n">rhs_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">rhs</span><span class="p">:</span>  <span class="c1"># Empty production</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> -&gt; â§</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">result</span>

<span class="c1"># Example grammar for balanced parentheses</span>
<span class="n">balanced_parens</span> <span class="o">=</span> <span class="n">CFG</span><span class="p">(</span>
    <span class="n">productions</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">],</span> <span class="p">[]]</span>  <span class="c1"># [] represents â§ (the empty string)</span>
    <span class="p">},</span>
    <span class="n">start_symbol</span><span class="o">=</span><span class="s1">&#39;S&#39;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">balanced_parens</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Start symbol: S
Productions:
  S -&gt; ( S )
  S -&gt; S S
  S -&gt; â§
</pre></div>
</div>
</div>
</div>
</section>
<section id="emptiness-problem">
<h2>1. Emptiness Problem<a class="headerlink" href="#emptiness-problem" title="Link to this heading">#</a></h2>
<section id="definition">
<h3>1.1 Definition<a class="headerlink" href="#definition" title="Link to this heading">#</a></h3>
<p>The emptiness problem asks: âIs the language generated by a given CFG empty?â This problem is decidable by checking whether the start symbol S can derive any terminal string. A CFG generates an empty language if and only if its start symbol cannot derive any string of terminals. To determine this, we can use a reachability algorithm that finds all non-terminals that can derive terminal strings.</p>
<p>Note: A language that consists solely of the empty string <span class="math notranslate nohighlight">\(\wedge\)</span> is not an empty language.</p>
</section>
<section id="algorithm-to-check-emptiness">
<h3>1.2 Algorithm to Check Emptiness:<a class="headerlink" href="#algorithm-to-check-emptiness" title="Link to this heading">#</a></h3>
<p><strong>Algorithm 1:</strong></p>
<ul class="simple">
<li><p>Initialize a set <strong>derivable</strong> with all non-terminals that have a production directly to terminals or <span class="math notranslate nohighlight">\(\wedge\)</span> (empty string).</p></li>
<li><p>Iterate: Add a non-terminal to <strong>derivable</strong> if it has a production where all symbols are either terminals or non-terminals already in <strong>derivable</strong>.</p></li>
<li><p>Repeat until no more non-terminals can be added. If the start symbol <span class="math notranslate nohighlight">\(S\)</span> is in <strong>derivable</strong>, the language is non-empty; otherwise, itâs empty.</p></li>
</ul>
<p><strong>Algorithm 2:</strong></p>
<ul class="simple">
<li><p>Identify directly derivable non-terminals:</p>
<ul>
<li><p>Mark any nonterminal <span class="math notranslate nohighlight">\(N\)</span> that has a production of the form <span class="math notranslate nohighlight">\(N \rightarrow t\)</span>, where <span class="math notranslate nohighlight">\(t\)</span> is a terminal or a string of terminals.</p></li>
<li><p>Replace occurrences of <span class="math notranslate nohighlight">\(N\)</span> in other productions with <span class="math notranslate nohighlight">\(t\)</span>, this will remove <span class="math notranslate nohighlight">\(N\)</span>  altogether.</p></li>
</ul>
</li>
<li><p>Repeat the previous step to remove derivable non-terminals until no new non-terminals can be eliminated:</p>
<ul>
<li><p>If <span class="math notranslate nohighlight">\(S\)</span> is eliminated, the CFG is not empty.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(S\)</span> is not eliminated, the CFG is empty.</p></li>
</ul>
</li>
</ul>
<p>Note: Algorithm 1 maintains the original CFG structure and simply tracks which non-terminals can derive terminal strings. Algorithm 2 modifies the original CFG by eliminating non-terminals, which can be useful in further simplifications but changes the grammar structure. Both approaches correctly solve the Emptiness problem, but Algorithm 2âs approach of modifying the grammar makes it less suitable for situations where you need to preserve the original grammar structure. However, the substitution method can be more intuitive for understanding why certain strings are derivable from the grammar.</p>
<p><strong>Comparison of Emptiness Problem Algorithms</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Algorithm 1</p></th>
<th class="head"><p>Algorithm 2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Grammar Structure</strong></p></td>
<td><p>Preserves the original CFG structure</p></td>
<td><p>Modifies the original CFG structure</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Non-terminal Handling</strong></p></td>
<td><p>Tracks which non-terminals can derive terminal strings</p></td>
<td><p>Eliminates non-terminals from the grammar</p></td>
</tr>
<tr class="row-even"><td><p><strong>Effect on Grammar</strong></p></td>
<td><p>Non-destructive - original grammar is unchanged</p></td>
<td><p>Destructive - transforms the grammar</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Use Cases</strong></p></td>
<td><p>Suitable when original grammar structure must be preserved</p></td>
<td><p>Useful for further grammar simplifications</p></td>
</tr>
<tr class="row-even"><td><p><strong>Intuitiveness</strong></p></td>
<td><p>More abstract - focuses on non-terminal properties</p></td>
<td><p>More intuitive for understanding string derivability</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Output</strong></p></td>
<td><p>Provides a yes/no answer about emptiness</p></td>
<td><p>Provides a simplified grammar (or determines emptiness)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="examples">
<h3>1.3 Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h3>
<p>Consider this given CFG with productions: <span class="math notranslate nohighlight">\(S \rightarrow AB; A \rightarrow AX; B \rightarrow BY \mid XX; X \rightarrow a; Y \rightarrow b\)</span></p>
<p><strong>Using Algorithm 1:</strong></p>
<ul class="simple">
<li><p>Step 1: initialize a set <span class="math notranslate nohighlight">\(derivable = \{X, Y\}\)</span> since they have productions directly to terminals.</p></li>
<li><p>Step 2: add <span class="math notranslate nohighlight">\(B\)</span> to the set due to the production <span class="math notranslate nohighlight">\(B \rightarrow XX\)</span> and <span class="math notranslate nohighlight">\(X\)</span> is already in the set: <span class="math notranslate nohighlight">\(derivable = \{X, Y, B\}\)</span></p></li>
<li><p>Step 3: Repeat until no more non-terminals can be added: <span class="math notranslate nohighlight">\(derivable = \{X, Y, B\}\)</span>. Since <span class="math notranslate nohighlight">\(S\)</span> is not in the set, the language is empty.</p></li>
</ul>
<p><strong>Using Algorithm 2:</strong></p>
<ul class="simple">
<li><p>Step 1: Identify directly derivable non-terminals: <span class="math notranslate nohighlight">\(X, Y\)</span> since they have productions directly to terminals.</p></li>
<li><p>Step 2: Replace occurrences of <span class="math notranslate nohighlight">\(X, Y\)</span> in other productions with terminals and eliminate them: <span class="math notranslate nohighlight">\(S \rightarrow AB; A \rightarrow Aa; B \rightarrow Bb \mid aa\)</span></p></li>
<li><p>Step 3: Repeat step 1 and 2: we identify another directly derivable non-terminal: <span class="math notranslate nohighlight">\(B\)</span>, replace and eliminate it: <span class="math notranslate nohighlight">\(S \rightarrow Aaa; A \rightarrow Aa\)</span>.</p></li>
<li><p>Step 4: Since <span class="math notranslate nohighlight">\(S\)</span> is not eliminated, the CFG is empty.</p></li>
</ul>
</section>
<section id="example-python-implementation">
<h3>1.4 Example Python Implementation<a class="headerlink" href="#example-python-implementation" title="Link to this heading">#</a></h3>
<p>Below, weâll demonstrate how to implement Algorithm 1 with Python code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">is_language_empty</span><span class="p">(</span><span class="n">cfg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine if the language generated by a CFG is empty.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        cfg: A CFG object</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the language is empty, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Step 1: Find all non-terminals that directly generate terminals or Îµ</span>
    <span class="n">derivable</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">non_terminal</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">productions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="c1"># Check if production is empty (Îµ) or contains only terminals</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">production</span> <span class="ow">or</span> <span class="nb">all</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">terminals</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">production</span><span class="p">):</span>
                <span class="n">derivable</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">non_terminal</span><span class="p">)</span>
                <span class="k">break</span>
    
    <span class="c1"># Step 2: Iterate until no more non-terminals can be added</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">non_terminal</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">productions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">non_terminal</span> <span class="ow">in</span> <span class="n">derivable</span><span class="p">:</span>
                <span class="k">continue</span>
                
            <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">derivable</span> <span class="ow">or</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">terminals</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">production</span><span class="p">):</span>
                    <span class="n">derivable</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">non_terminal</span><span class="p">)</span>
                    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
    
    <span class="c1"># Step 3: Check if the start symbol can generate a string</span>
    <span class="k">return</span> <span class="n">cfg</span><span class="o">.</span><span class="n">start_symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">derivable</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test with balanced parentheses grammar</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is balanced_parens language empty? </span><span class="si">{</span><span class="n">is_language_empty</span><span class="p">(</span><span class="n">balanced_parens</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Grammar that generates an empty language</span>
<span class="n">empty_lang</span> <span class="o">=</span> <span class="n">CFG</span><span class="p">(</span>
    <span class="n">productions</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;S&#39;</span><span class="p">]]</span>
    <span class="p">},</span>
    <span class="n">start_symbol</span><span class="o">=</span><span class="s1">&#39;S&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is empty_lang language empty? </span><span class="si">{</span><span class="n">is_language_empty</span><span class="p">(</span><span class="n">empty_lang</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Is balanced_parens language empty? False
Is empty_lang language empty? True
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="uselessness-problem">
<h2>2. Uselessness Problem<a class="headerlink" href="#uselessness-problem" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>2.1 Definition<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>The uselessness problem asks: âWhich non-terminals in a CFG are useless?â A non-terminal is useless if:</p>
<ul class="simple">
<li><p>It cannot derive any string of terminals (non-generating), or</p></li>
<li><p>It cannot be reached from the start symbol.</p></li>
</ul>
</section>
<section id="algorithm-to-identify-useless-non-terminals">
<h3>2.2 Algorithm to Identify Useless Non-terminals<a class="headerlink" href="#algorithm-to-identify-useless-non-terminals" title="Link to this heading">#</a></h3>
<p>This problem is decidable and it can be solved using the following algorithm:</p>
<ul class="simple">
<li><p>Step 1: find all derivable non-terminals (as in the Emptiness problem) to determine the non-generating non-terminals.</p></li>
<li><p>Step 2: remove all productions that involves non-generating non-terminals.</p></li>
<li><p>Step 3: based on the revised CFG, find all reachable non-terminals starting from the start symbol.</p></li>
<li><p>A non-terminal is useful if and only if it is both derivable and reachable. Otherwise it is useless.</p></li>
</ul>
</section>
<section id="id2">
<h3>2.3 Examples<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>Find all useless non-terminals in this given CFG with productions: <span class="math notranslate nohighlight">\(S \rightarrow AB \mid CD; A \rightarrow aA \mid a; B \rightarrow bB \mid BD \mid b; C \rightarrow abC; D \rightarrow dD \mid d; E \rightarrow e\)</span></p>
<ul class="simple">
<li><p>Step 1: find all derivable non-terminals to determine the non-generating non-terminals:</p>
<ul>
<li><p>initialize a set <span class="math notranslate nohighlight">\(derivable = \{A, B, D, E\}\)</span> since they have productions directly to terminals.</p></li>
<li><p>add <span class="math notranslate nohighlight">\(S\)</span> to the set due to the production <span class="math notranslate nohighlight">\(S \rightarrow AB\)</span> and <span class="math notranslate nohighlight">\(A, B\)</span> are already in the set: <span class="math notranslate nohighlight">\(derivable = \{A, B, D, E, S\}\)</span></p></li>
<li><p>Repeat until no more non-terminals can be added: <span class="math notranslate nohighlight">\(derivable = \{A, B, D, E, S\}\)</span>.</p></li>
<li><p>So <span class="math notranslate nohighlight">\(C\)</span> is a non-generating non-terminal.</p></li>
</ul>
</li>
<li><p>Step 2: remove all productions that involves <span class="math notranslate nohighlight">\(C\)</span>, so the CFG becomes <span class="math notranslate nohighlight">\(S \rightarrow AB; A \rightarrow aA \mid a; B \rightarrow bB \mid BD \mid b; D \rightarrow dD \mid d; E \rightarrow e\)</span></p></li>
<li><p>Step 3: find all reachable non-terminals:</p>
<ul>
<li><p>Starting from <span class="math notranslate nohighlight">\(S\)</span>, we can reach <span class="math notranslate nohighlight">\(A, B\)</span></p></li>
<li><p>From <span class="math notranslate nohighlight">\(B\)</span> we can reach <span class="math notranslate nohighlight">\(D\)</span></p></li>
<li><p>Since no productions contain <span class="math notranslate nohighlight">\(E\)</span> on the righ-hand size, <span class="math notranslate nohighlight">\(E\)</span> is unreachable.</p></li>
</ul>
</li>
<li><p>Conclusion: in the given CFG, <span class="math notranslate nohighlight">\(C\)</span> and <span class="math notranslate nohighlight">\(E\)</span> are useless non-terminals.</p></li>
</ul>
</section>
<section id="id3">
<h3>2.4 Example Python Implementation<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>Below, weâll demonstrate how to implement the Algorithm with Python code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">find_useless_symbols</span><span class="p">(</span><span class="n">cfg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find all useless non-terminals in a CFG.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        cfg: A CFG object</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        set: The set of useless non-terminals</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Step 1: Find all generating non-terminals</span>
    <span class="n">generating</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">non_terminal</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">productions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="c1"># Check if production is empty (Îµ) or contains only terminals</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">production</span> <span class="ow">or</span> <span class="nb">all</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">terminals</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">production</span><span class="p">):</span>
                <span class="n">generating</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">non_terminal</span><span class="p">)</span>
                <span class="k">break</span>
    
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">non_terminal</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">productions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">non_terminal</span> <span class="ow">in</span> <span class="n">generating</span><span class="p">:</span>
                <span class="k">continue</span>
                
            <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">generating</span> <span class="ow">or</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">terminals</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">production</span><span class="p">):</span>
                    <span class="n">generating</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">non_terminal</span><span class="p">)</span>
                    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
    
    <span class="c1"># Step 2: Find all reachable non-terminals</span>
    <span class="n">reachable</span> <span class="o">=</span> <span class="p">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">start_symbol</span><span class="p">}</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">new_reachable</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">reachable</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">non_terminal</span> <span class="ow">in</span> <span class="n">reachable</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">non_terminal</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">productions</span><span class="p">:</span>
                <span class="k">continue</span>
                
            <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">productions</span><span class="p">[</span><span class="n">non_terminal</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">production</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">non_terminals</span> <span class="ow">and</span> <span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_reachable</span><span class="p">:</span>
                        <span class="n">new_reachable</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
                        <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">reachable</span> <span class="o">=</span> <span class="n">new_reachable</span>
    
    <span class="c1"># Step 3: Identify useless non-terminals</span>
    <span class="n">useless</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">non_terminal</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">non_terminals</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">non_terminal</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">generating</span> <span class="ow">or</span> <span class="n">non_terminal</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">reachable</span><span class="p">:</span>
            <span class="n">useless</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">non_terminal</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">useless</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a grammar with useless symbols</span>
<span class="n">grammar_with_useless</span> <span class="o">=</span> <span class="n">CFG</span><span class="p">(</span>
    <span class="n">productions</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;C&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;B&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">]]</span>  <span class="c1"># D is unreachable</span>
    <span class="p">},</span>
    <span class="n">start_symbol</span><span class="o">=</span><span class="s1">&#39;S&#39;</span>
<span class="p">)</span>

<span class="n">useless</span> <span class="o">=</span> <span class="n">find_useless_symbols</span><span class="p">(</span><span class="n">grammar_with_useless</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Useless non-terminals: </span><span class="si">{</span><span class="n">useless</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># We can also use this to eliminate useless symbols</span>
<span class="k">def</span><span class="w"> </span><span class="nf">eliminate_useless_symbols</span><span class="p">(</span><span class="n">cfg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Eliminate useless symbols from a CFG.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        cfg: A CFG object</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        CFG: A new CFG with useless symbols eliminated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">useless</span> <span class="o">=</span> <span class="n">find_useless_symbols</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
    
    <span class="c1"># Create new productions without useless symbols</span>
    <span class="n">new_productions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">non_terminal</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">productions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">non_terminal</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">useless</span><span class="p">:</span>
            <span class="n">new_prods</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
                <span class="c1"># Only keep productions that don&#39;t contain useless non-terminals</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">useless</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">production</span><span class="p">):</span>
                    <span class="n">new_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">production</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">new_prods</span><span class="p">:</span>  <span class="c1"># Only add if there are valid productions</span>
                <span class="n">new_productions</span><span class="p">[</span><span class="n">non_terminal</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_prods</span>
    
    <span class="k">return</span> <span class="n">CFG</span><span class="p">(</span><span class="n">new_productions</span><span class="p">,</span> <span class="n">cfg</span><span class="o">.</span><span class="n">start_symbol</span><span class="p">)</span>

<span class="c1"># Test eliminating useless symbols</span>
<span class="n">simplified_grammar</span> <span class="o">=</span> <span class="n">eliminate_useless_symbols</span><span class="p">(</span><span class="n">grammar_with_useless</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Grammar after eliminating useless symbols:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">simplified_grammar</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Useless non-terminals: {&#39;D&#39;, &#39;C&#39;, &#39;B&#39;}
Grammar after eliminating useless symbols:
Start symbol: S
Productions:
  S -&gt; A
  A -&gt; a A
  A -&gt; a
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="membership-problem">
<h2>3. Membership Problem<a class="headerlink" href="#membership-problem" title="Link to this heading">#</a></h2>
<section id="id4">
<h3>3.1 Definition<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<p>The membership problem asks: âDoes a given string belong to the language generated by a CFG?â This problem is decidable using two primary algorithms: the Cocke-Younger-Kasami (CYK) algorithm and the Earleyâs Algorithm.</p>
</section>
<section id="cyk-algorithm-cocke-younger-kasami-for-membership-problem">
<h3>3.2 CYK Algorithm (Cocke-Younger-Kasami) for Membership Problem<a class="headerlink" href="#cyk-algorithm-cocke-younger-kasami-for-membership-problem" title="Link to this heading">#</a></h3>
<p>The CYK algorithm is a dynamic programming approach that determines whether a given string is generated by a CFG.</p>
<ul class="simple">
<li><p>Works only for grammars in Chomsky Normal Form (CNF).</p></li>
<li><p>Uses bottom-up parsing to check derivations efficiently.</p></li>
<li><p>Runs in <span class="math notranslate nohighlight">\(O(n^3)\)</span> time, where <span class="math notranslate nohighlight">\(n\)</span> is the length of the input string.</p></li>
</ul>
<p><strong>Algorithm Description:</strong> The CYK algorithm uses a bottom-up parsing approach with a dynamic programming table. We can find the answer step by step by looking at shorter parts of the string first. For a string of length <span class="math notranslate nohighlight">\(n\)</span>, we create an <span class="math notranslate nohighlight">\(n \times n\)</span> table where each cell <span class="math notranslate nohighlight">\([i,j]\)</span> stores the non-terminals that can generate the substring from position <span class="math notranslate nohighlight">\(i\)</span> to <span class="math notranslate nohighlight">\(j\)</span>. We fill the table from the smallest substrings (length 1) up to the full string. For each substring, we check if it can be split into two smaller parts, where one part is generated by a non-terminal <span class="math notranslate nohighlight">\(B\)</span> and the other by a non-terminal <span class="math notranslate nohighlight">\(C\)</span>, and if there is a rule <span class="math notranslate nohighlight">\(A \rightarrow BC\)</span>. The algorithm can be described as follows:</p>
<ul class="simple">
<li><p>Step 1: Initialize the Table</p>
<ul>
<li><p>Let <span class="math notranslate nohighlight">\(n\)</span> be the length of the input string <span class="math notranslate nohighlight">\(w = w_1w_2...w_n\)</span>.</p></li>
<li><p>Construct a table <span class="math notranslate nohighlight">\(T[i,j]\)</span> to store the set of nonterminals that can derive the substring <span class="math notranslate nohighlight">\(w[i:j]\)</span> (a substring of length <span class="math notranslate nohighlight">\(j\)</span> starting at position <span class="math notranslate nohighlight">\(i\)</span>).</p></li>
<li><p><span class="math notranslate nohighlight">\(i\)</span> represents the starting position of a substring.</p></li>
<li><p><span class="math notranslate nohighlight">\(j\)</span> represents the length of the substring.</p></li>
<li><p>Rows (i) correspond to different starting positions in the input string.</p></li>
<li><p>Columns (j) correspond to substring lengths from 1 to n (the length of w).</p></li>
<li><p>The table is triangular, meaning <span class="math notranslate nohighlight">\(T[i,j]\)</span> is filled only for <span class="math notranslate nohighlight">\(j \geq i\)</span>.</p></li>
</ul>
</li>
<li><p>Step 2: Filling single characters as the base cases</p>
<ul>
<li><p>For each terminal <span class="math notranslate nohighlight">\(w_k\)</span> in the input string, find all non-terminals <span class="math notranslate nohighlight">\(A\)</span> such that <span class="math notranslate nohighlight">\(A \rightarrow w_k\)</span> is a production.</p></li>
<li><p>Store these non-terminals in <span class="math notranslate nohighlight">\(T[k,1]\)</span>.</p></li>
</ul>
</li>
<li><p>Step 3: Fill the Table Using Recursion</p>
<ul>
<li><p>For each substring length <span class="math notranslate nohighlight">\(L\)</span>: from <span class="math notranslate nohighlight">\(2\)</span> to <span class="math notranslate nohighlight">\(n\)</span>:</p>
<ul>
<li><p>For each starting position <span class="math notranslate nohighlight">\(i\)</span>: from <span class="math notranslate nohighlight">\(1\)</span> to <span class="math notranslate nohighlight">\(n-L+1\)</span>:</p>
<ul>
<li><p>Check all possible splits of the substring <span class="math notranslate nohighlight">\(w[i:i+L-1]\)</span> into two parts:</p>
<ul>
<li><p>Let <span class="math notranslate nohighlight">\(A \rightarrow BC\)</span> be a rule in the CFG.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(B\)</span> is found in <span class="math notranslate nohighlight">\(T[i,s]\)</span> and <span class="math notranslate nohighlight">\(C\)</span> is found in <span class="math notranslate nohighlight">\(T[i+s,L-s]\)</span>, <span class="math notranslate nohighlight">\(A\)</span> is added to <span class="math notranslate nohighlight">\(T[i,L]\)</span>.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Step 4: Check Membership</p>
<ul>
<li><p>If the start symbol <span class="math notranslate nohighlight">\(S\)</span> is in <span class="math notranslate nohighlight">\(T[1,n]\)</span>, <span class="math notranslate nohighlight">\(w \in L(G)\)</span>.</p></li>
<li><p>Otherwise, <span class="math notranslate nohighlight">\(w \notin L(G)\)</span>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="cyk-algorithm-examples">
<h3>3.3 CYK Algorithm Examples<a class="headerlink" href="#cyk-algorithm-examples" title="Link to this heading">#</a></h3>
<p>Given a CFG in CNF: <span class="math notranslate nohighlight">\(S \rightarrow AB \mid BC; A \rightarrow BA \mid a; B \rightarrow CC \mid b; C \rightarrow AB \mid a\)</span>, decide whether <span class="math notranslate nohighlight">\(w = baaba\)</span> can be generated by the given CFG.</p>
<ul class="simple">
<li><p>Step 1 initialize the table: Given <span class="math notranslate nohighlight">\(w = baaba\)</span>, a string of length <span class="math notranslate nohighlight">\(n = 5\)</span>, we construct a <span class="math notranslate nohighlight">\(5 \times 5\)</span> table (at the start, all cells are empty):</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>i/j</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>5</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Step 2 filling the table for substrings of length 1: for each single character in <span class="math notranslate nohighlight">\(w\)</span>, we find which non-terminals produce that terminal:</p>
<ul>
<li><p>Since <span class="math notranslate nohighlight">\(A \rightarrow a\)</span> and <span class="math notranslate nohighlight">\(C \rightarrow a\)</span>, <span class="math notranslate nohighlight">\(A, C\)</span> can generate <span class="math notranslate nohighlight">\(a\)</span>;</p></li>
<li><p><span class="math notranslate nohighlight">\(B \rightarrow b\)</span>, <span class="math notranslate nohighlight">\(B\)</span> can generate <span class="math notranslate nohighlight">\(b\)</span>:</p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>i/j</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>5</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>b: {B}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>a: {A,C}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>a: {A,C}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>b: {B}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>a: {A,C}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Step 3 filling the table for substrings of length 2: look at pairs of adjacent terminals (substrings of length 2), then apply productions of the form <span class="math notranslate nohighlight">\(A \rightarrow BC\)</span> to check if any non-terminals derive them.</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(w[1:2] = ba\)</span>: based on non-terminals producing length-1 substrings, we know that <span class="math notranslate nohighlight">\(BA\)</span> and <span class="math notranslate nohighlight">\(BC\)</span> can produce length-2 substring <span class="math notranslate nohighlight">\(ba\)</span>, since <span class="math notranslate nohighlight">\(S \rightarrow BC; A \rightarrow BA\)</span>, the set of non-terminals to produce length-2 substring <span class="math notranslate nohighlight">\(ba\)</span> is <span class="math notranslate nohighlight">\(\{S,A\}\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(w[2:2] = aa\)</span>: based on non-terminals producing length-1 substrings, we know that <span class="math notranslate nohighlight">\(AA, AC, CA, CC\)</span> can produce length-2 substring <span class="math notranslate nohighlight">\(aa\)</span>, since <span class="math notranslate nohighlight">\(B \rightarrow CC\)</span>, the set of non-terminals to produce length-2 substring <span class="math notranslate nohighlight">\(aa\)</span> is <span class="math notranslate nohighlight">\(\{B\}\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(w[3:2] = ab\)</span>: based on non-terminals producing length-1 substrings, we know that <span class="math notranslate nohighlight">\(AB, CB\)</span> can produce length-2 substring <span class="math notranslate nohighlight">\(ab\)</span>, since <span class="math notranslate nohighlight">\(S \rightarrow AB; C \rightarrow AB;\)</span>, the set of non-terminals to produce length-2 substring <span class="math notranslate nohighlight">\(aa\)</span> is <span class="math notranslate nohighlight">\(\{S,C\}\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(w[4:2] = ba\)</span>: this substring has been analyzed before, the set of non-terminals to produce length-2 substring <span class="math notranslate nohighlight">\(ba\)</span> is <span class="math notranslate nohighlight">\(\{S,A\}\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(w[5:2]\)</span>: this substring does not exist, we use â-â to represent an invalid entry in the table.</p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>i/j</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>5</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>a: {A,C}</p></td>
<td><p>aa:{B}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>a: {A,C}</p></td>
<td><p>ab: {S,C}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>a: {A,C}</p></td>
<td><p>-</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Step 4 filling the table for substrings of length 3:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(w[1:3] = baa\)</span>: based on non-terminals producing length-1 and length-2 substrings, we know that <span class="math notranslate nohighlight">\(baa\)</span> can be split into either <span class="math notranslate nohighlight">\(\{b, aa\}\)</span> or <span class="math notranslate nohighlight">\(\{ba, a\}\)</span>. Note that we split a substring into only two parts, not three or more, since a CFG in CNF has exactly two non-terminals on the right-hand side of any produciton rule.</p>
<ul>
<li><p>for <span class="math notranslate nohighlight">\(\{b, aa\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(BB\)</span> can product it. However, since no non-terminal can produce <span class="math notranslate nohighlight">\(BB\)</span>, no non-terminal can generate the substring <span class="math notranslate nohighlight">\(baa\)</span> in this split.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{ba, a\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(SA,SC,AA,AC\)</span> can product it. However, since no non-terminal can produce <span class="math notranslate nohighlight">\(SA,SC,AA,AC\)</span>, no non-terminal can generate the substring <span class="math notranslate nohighlight">\(baa\)</span> in this split.</p></li>
<li><p>So no non-terminal can produce <span class="math notranslate nohighlight">\(baa\)</span> in any split. We use an enmpty set <span class="math notranslate nohighlight">\(\{\}\)</span> to indicate that in the table.</p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(w[2:3] = aab\)</span>: based on non-terminals producing length-1 and length-2 substrings, we know that <span class="math notranslate nohighlight">\(aab\)</span> can be split into either <span class="math notranslate nohighlight">\(\{a, ab\}\)</span> or <span class="math notranslate nohighlight">\(\{aa, b\}\)</span>.</p>
<ul>
<li><p>for <span class="math notranslate nohighlight">\(\{a, ab\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(AS,AC,CS,CC\)</span> can product it. Since <span class="math notranslate nohighlight">\(B\)</span> can produce <span class="math notranslate nohighlight">\(C\)</span>, we add <span class="math notranslate nohighlight">\(B\)</span> to the set of non-terminals for <span class="math notranslate nohighlight">\(aab\)</span>.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{aa, b\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(BB\)</span> can product it. However, since no non-terminal can produce <span class="math notranslate nohighlight">\(BB\)</span>, no non-terminal can generate the substring <span class="math notranslate nohighlight">\(aab\)</span> in this split.</p></li>
<li><p>So <span class="math notranslate nohighlight">\(\{B\}\)</span> can produce <span class="math notranslate nohighlight">\(aab\)</span> in any split.</p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(w[3:3] = aba\)</span>: based on non-terminals producing length-1 and length-2 substrings, we know that <span class="math notranslate nohighlight">\(aba\)</span> can be split into either <span class="math notranslate nohighlight">\(\{a, ba\}\)</span> or <span class="math notranslate nohighlight">\(\{ab, a\}\)</span>.</p>
<ul>
<li><p>for <span class="math notranslate nohighlight">\(\{ab, a\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(SA,SC,CA,CC\)</span> can product it. Since <span class="math notranslate nohighlight">\(B\)</span> can produce <span class="math notranslate nohighlight">\(CC\)</span>, we add <span class="math notranslate nohighlight">\(B\)</span> to the set of non-terminals for <span class="math notranslate nohighlight">\(aba\)</span>.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{a, ba\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(AS,AA,CS,CA\)</span> can product it. However, since no non-terminal can produce <span class="math notranslate nohighlight">\(AS,AA,CS,Ca\)</span>, no non-terminal can generate the substring <span class="math notranslate nohighlight">\(aba\)</span> in this split.</p></li>
<li><p>So <span class="math notranslate nohighlight">\(\{B\}\)</span> can produce <span class="math notranslate nohighlight">\(aba\)</span> in any split.</p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(w[4:3],w[5:3]\)</span>: they are not valid substrings, we use â-â in the table for these entries,</p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>i/j</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>5</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p>baa: {}</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>a: {A,C}</p></td>
<td><p>aa:{B}</p></td>
<td><p>aab: {B}</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>a: {A,C}</p></td>
<td><p>ab: {S,C}</p></td>
<td><p>aba: {B}</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p>-</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>a: {A,C}</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Step 5 filling the table for substrings of length 4:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(w[1:4] = baab\)</span>: we know that <span class="math notranslate nohighlight">\(baab\)</span> can be split into either <span class="math notranslate nohighlight">\(\{b, aab\}\)</span>, <span class="math notranslate nohighlight">\(\{ba, ab\}\)</span>, or <span class="math notranslate nohighlight">\(\{baa, b\}\)</span>.</p>
<ul>
<li><p>for <span class="math notranslate nohighlight">\(\{b, aab\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(BB\)</span> can product it. However, since no non-terminal can produce <span class="math notranslate nohighlight">\(BB\)</span>, no non-terminal can generate the substring <span class="math notranslate nohighlight">\(baab\)</span> in this split.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{ba, aa\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(SS,SC,AS,AC\)</span> can product it. However, since no non-terminal can produce <span class="math notranslate nohighlight">\(SS,SC,AS,AC\)</span>, no non-terminal can generate the substring <span class="math notranslate nohighlight">\(baab\)</span> in this split.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{baa, b\}\)</span>, based on previous analysis, no non-terminal can produce <span class="math notranslate nohighlight">\(baa\)</span>, so no non-terminal can generate the substring <span class="math notranslate nohighlight">\(baab\)</span> in this split.</p></li>
<li><p>So no non-terminal can produce <span class="math notranslate nohighlight">\(baab\)</span> in any split. We use an enmpty set <span class="math notranslate nohighlight">\(\{\}\)</span> to indicate that in the table.</p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(w[2:4] = aaba\)</span>: we know that <span class="math notranslate nohighlight">\(aaba\)</span> can be split into either <span class="math notranslate nohighlight">\(\{a, aba\}\)</span>, <span class="math notranslate nohighlight">\(\{aa, ba\}\)</span>, or <span class="math notranslate nohighlight">\(\{aab, a\}\)</span>.</p>
<ul>
<li><p>for <span class="math notranslate nohighlight">\(\{a, aba\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(AB,CB\)</span> can product it. Since <span class="math notranslate nohighlight">\(S,C\)</span> can produce <span class="math notranslate nohighlight">\(AB\)</span>, we add <span class="math notranslate nohighlight">\(S,C\)</span> to the set of non-terminals for <span class="math notranslate nohighlight">\(aaba\)</span>.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{aa, ba\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(BS,BA\)</span> can product it. Since <span class="math notranslate nohighlight">\(A\)</span> can produce <span class="math notranslate nohighlight">\(BA\)</span>, we add <span class="math notranslate nohighlight">\(A\)</span> to the set of non-terminals for <span class="math notranslate nohighlight">\(aaba\)</span>.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{aab, a\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(BA,BC\)</span> can product it. Since <span class="math notranslate nohighlight">\(A\)</span> can produce <span class="math notranslate nohighlight">\(BA\)</span> and <span class="math notranslate nohighlight">\(S\)</span> can produce <span class="math notranslate nohighlight">\(BC\)</span>, we add <span class="math notranslate nohighlight">\(A,S\)</span> to the set of non-terminals for <span class="math notranslate nohighlight">\(aaba\)</span>.</p></li>
<li><p>So <span class="math notranslate nohighlight">\(\{S,C,A\}\)</span> can produce <span class="math notranslate nohighlight">\(aaba\)</span> in any split.</p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(w[3:4],w[4:4],w[5:4]\)</span>: they are not valid substrings, we use â-â in the table for these entries,</p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>i/j</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>5</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p>baa: {}</p></td>
<td><p>baab:{}</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>a: {A,C}</p></td>
<td><p>aa:{B}</p></td>
<td><p>aab: {B}</p></td>
<td><p>aaba: {S,C,A}</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>a: {A,C}</p></td>
<td><p>ab: {S,C}</p></td>
<td><p>aba: {B}</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>a: {A,C}</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Step 6 filling the table for substrings of length 5:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(w[1:5] = baaba\)</span>: we know that it can be split into either <span class="math notranslate nohighlight">\(\{b, aaba\}\)</span>, <span class="math notranslate nohighlight">\(\{ba, aba\}\)</span>, <span class="math notranslate nohighlight">\(\{baa, ba\}\)</span>, or <span class="math notranslate nohighlight">\(\{baab, a\}\)</span>.</p>
<ul>
<li><p>for <span class="math notranslate nohighlight">\(\{b, aaba\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(SB,CB,AB\)</span> can product it. Since <span class="math notranslate nohighlight">\(S,C\)</span> can produce <span class="math notranslate nohighlight">\(AB\)</span>, we add <span class="math notranslate nohighlight">\(S,C\)</span> to the set of non-terminals for <span class="math notranslate nohighlight">\(baaba\)</span>.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{ba, aba\}\)</span>, based on previous analysis, <span class="math notranslate nohighlight">\(SB,AB\)</span> can product it. Since <span class="math notranslate nohighlight">\(S,C\)</span> can produce <span class="math notranslate nohighlight">\(AB\)</span>, we add <span class="math notranslate nohighlight">\(S,C\)</span> to the set of non-terminals for <span class="math notranslate nohighlight">\(baaba\)</span>.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{baa, ba\}\)</span>, based on previous analysis, no non-terminal can produce <span class="math notranslate nohighlight">\(baa\)</span>, so no non-terminal can generate the substring <span class="math notranslate nohighlight">\(baaba\)</span> in this split.</p></li>
<li><p>for <span class="math notranslate nohighlight">\(\{baab, a\}\)</span>, based on previous analysis, no non-terminal can produce <span class="math notranslate nohighlight">\(baab\)</span>, so no non-terminal can generate the substring <span class="math notranslate nohighlight">\(baaba\)</span> in this split.</p></li>
<li><p>So <span class="math notranslate nohighlight">\(S,C\)</span> can produce <span class="math notranslate nohighlight">\(baaba\)</span> in any split.</p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(w[2:5],w[3:5],w[4:5],w[5,5]\)</span>: they are not valid substrings, we use â-â in the table for these entries,</p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>i/j</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>5</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p>baa: {}</p></td>
<td><p>baab:{}</p></td>
<td><p>baaba:{S,C}</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>a: {A,C}</p></td>
<td><p>aa:{B}</p></td>
<td><p>aab: {B}</p></td>
<td><p>aaba: {S,C,A}</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>a: {A,C}</p></td>
<td><p>ab: {S,C}</p></td>
<td><p>aba: {B}</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>b: {B}</p></td>
<td><p>ba: {S,A}</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>a: {A,C}</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Step 7: Since <span class="math notranslate nohighlight">\(S\)</span> appears in <span class="math notranslate nohighlight">\(T[1:5]\)</span>, we conclude that <span class="math notranslate nohighlight">\(baaba \in L(G)\)</span>.</p></li>
</ul>
</section>
<section id="id5">
<h3>3.4 Example Python Implementation<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>Below, weâll demonstrate how to implement the membership Algorithm with Python code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

<span class="k">def</span><span class="w"> </span><span class="nf">cyk_algorithm</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">start_symbol</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
    
    <span class="c1"># Initialize table</span>
    <span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">set</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
    
    <span class="c1"># Fill in base case</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">rhs</span><span class="p">:</span>
                <span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span>
    
    <span class="c1"># Fill in table using dynamic programming</span>
    <span class="k">for</span> <span class="n">length</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># Length of span</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># Start position</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">length</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># End position</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>  <span class="c1"># Partition index</span>
                <span class="k">for</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rhs</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">rule</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rule</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span>
                            <span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span>
    
    <span class="c1"># Check if start symbol is in the top-right cell</span>
    <span class="k">return</span> <span class="n">start_symbol</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># Example usage</span>
<span class="n">grammar</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)},</span>
    <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">{(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">{(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="p">}</span>
<span class="n">start_symbol</span> <span class="o">=</span> <span class="s1">&#39;S&#39;</span>
<span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;baab&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">word</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cyk_algorithm</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">,</span> <span class="n">word</span><span class="p">)))</span>  <span class="c1"># Output: True or False</span>
<span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;baaba&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">word</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cyk_algorithm</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">,</span> <span class="n">word</span><span class="p">)))</span>  <span class="c1"># Output: True or False</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>baab: False
baaba: True
</pre></div>
</div>
</div>
</div>
</section>
<section id="earleys-algorithm-for-membership-problem">
<h3>3.5 Earleyâs Algorithm for Membership Problem<a class="headerlink" href="#earleys-algorithm-for-membership-problem" title="Link to this heading">#</a></h3>
<p>Earleyâs algorithm is a chart parsing algorithm used for recognizing whether a given string belongs to a language defined by a CFG.</p>
<ul class="simple">
<li><p>Works for any CFG, not just those in Chomsky Normal Form (CNF).</p></li>
<li><p>Uses a top-down, dynamic programming approach that processes the input string one symbol at a time while maintaining a chart of parsing states.</p></li>
<li><p>Time Compliexity: worst case: <span class="math notranslate nohighlight">\(O(n^3)\)</span>, best case: <span class="math notranslate nohighlight">\(O(n)\)</span> for simple grammars, where <span class="math notranslate nohighlight">\(n\)</span> is the length of the input string.</p></li>
</ul>
<p><strong>Algorithm Description:</strong> The fundamental unit in Earleyâs algorithm is the <strong>Earley item</strong>, which has the form: <span class="math notranslate nohighlight">\([A \rightarrow \alpha \cdot \beta, i]\)</span>, where</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(A \rightarrow \alpha\beta\)</span> is a production rule in the grammar</p></li>
<li><p><span class="math notranslate nohighlight">\(\cdot\)</span> represents the current parsing position in the production rule</p></li>
<li><p><span class="math notranslate nohighlight">\(\alpha\)</span> is the part of the production that has been recognized</p></li>
<li><p><span class="math notranslate nohighlight">\(\beta\)</span> is the part of the production that still needs to be recognized</p></li>
<li><p><span class="math notranslate nohighlight">\(i\)</span> is the starting position in the input string where recognition of this rule began</p></li>
</ul>
<p>The algorithm maintains <span class="math notranslate nohighlight">\(n+1\)</span> sets of Earley items for a string of length <span class="math notranslate nohighlight">\(n\)</span>, denoted <span class="math notranslate nohighlight">\(S_0, S_1, \cdots, S_n\)</span>. Each set <span class="math notranslate nohighlight">\(S_j\)</span> contains items that represent possible parsing states after processing <span class="math notranslate nohighlight">\(j\)</span> symbols of the input string. An Earley item <span class="math notranslate nohighlight">\([A \rightarrow \alpha \cdot \beta, i]\)</span> in <span class="math notranslate nohighlight">\(S_j\)</span> means that we have recognized <span class="math notranslate nohighlight">\(\alpha\)</span> starting from position <span class="math notranslate nohighlight">\(i\)</span> and ending at position <span class="math notranslate nohighlight">\(j\)</span>. Earleyâs algorithm uses three main operations to build these sets:</p>
<ul class="simple">
<li><p>Predicting: for each item <span class="math notranslate nohighlight">\([A \rightarrow \alpha \cdot B\beta, i]\)</span> in <span class="math notranslate nohighlight">\(S_j\)</span> where <span class="math notranslate nohighlight">\(B\)</span> is a non-terminal, add <span class="math notranslate nohighlight">\([B \rightarrow \cdot \gamma, j]\)</span> to <span class="math notranslate nohighlight">\(S_j\)</span> for every production rule <span class="math notranslate nohighlight">\(B \rightarrow \gamma\)</span> in the grammar. This operation predicts what rules might be used next based on what weâre expecting to see.</p></li>
<li><p>Scanning: for each item <span class="math notranslate nohighlight">\([A \rightarrow \alpha \cdot a\beta, i]\)</span> in <span class="math notranslate nohighlight">\(S_j\)</span> where <span class="math notranslate nohighlight">\(a\)</span> is a terminal that matches the input at position <span class="math notranslate nohighlight">\(j\)</span>, add <span class="math notranslate nohighlight">\([A \rightarrow \alpha a\cdot \beta, i]\)</span> to <span class="math notranslate nohighlight">\(S_{j+1}\)</span>. This operation consumes an input symbol when it matches what weâre expecting.</p></li>
<li><p>Completing: for each item <span class="math notranslate nohighlight">\([A \rightarrow \gamma \cdot, i]\)</span> in <span class="math notranslate nohighlight">\(S_j\)</span> which is a completed rule, for each item <span class="math notranslate nohighlight">\([B \rightarrow \alpha \cdot A\beta, k]\)</span> in <span class="math notranslate nohighlight">\(S_i\)</span>: add <span class="math notranslate nohighlight">\([B \rightarrow \alpha A \cdot \beta, k]\)</span> to <span class="math notranslate nohighlight">\(S_j\)</span>. This operation updates all rules that were waiting for the rule we just completed.</p></li>
</ul>
<p>The algorithm follows these steps:</p>
<ul class="simple">
<li><p>Initialize <span class="math notranslate nohighlight">\(S_0\)</span> with the item <span class="math notranslate nohighlight">\([S'\rightarrow \cdot S, 0]\)</span>, where <span class="math notranslate nohighlight">\(S\)</span> is the original start symbol and <span class="math notranslate nohighlight">\(S'\)</span> is a new start symbol.</p></li>
<li><p>For each position <span class="math notranslate nohighlight">\(j\)</span> from <span class="math notranslate nohighlight">\(0\)</span> to <span class="math notranslate nohighlight">\(n\)</span>:</p>
<ul>
<li><p>Apply prediction, scanning, and completion until no new items can be added to <span class="math notranslate nohighlight">\(S_j\)</span></p></li>
<li><p>Move to position <span class="math notranslate nohighlight">\(j+1\)</span></p></li>
</ul>
</li>
<li><p>If the item <span class="math notranslate nohighlight">\([S'\rightarrow S\cdot, 0]\)</span> is in <span class="math notranslate nohighlight">\(S_n\)</span>, the input string is accepted; otherwise, itâs rejected.</p></li>
</ul>
<p><strong>Example:</strong> Consider the CFG for balanced parentheses: <span class="math notranslate nohighlight">\(S \rightarrow SS \mid (S) \mid ()\)</span>. Decide if the string <span class="math notranslate nohighlight">\((())\)</span> can be derived by the given CFG.</p>
<ul class="simple">
<li><p>Step 1: Initialize <span class="math notranslate nohighlight">\(S_0\)</span>: start with <span class="math notranslate nohighlight">\([S' \rightarrow \cdot S, 0]\)</span>, add all <span class="math notranslate nohighlight">\(S\)</span> productions by the predicting operation:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot SS, 0]\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot (S), 0]\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot (), 0]\)</span></p></li>
<li><p>Finally <span class="math notranslate nohighlight">\(S_0\)</span> contains the following items:
$<span class="math notranslate nohighlight">\([S' \rightarrow \cdot S, 0]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot SS, 0]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot (S), 0]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot (), 0]\)</span>$</p></li>
</ul>
</li>
<li><p>Step 2: Process <span class="math notranslate nohighlight">\((\)</span> at position <span class="math notranslate nohighlight">\(0\)</span>:</p>
<ul>
<li><p>Applying the scanning operation:</p>
<ul>
<li><p>For item <span class="math notranslate nohighlight">\([S \rightarrow \cdot(S), 0]\)</span>, add to <span class="math notranslate nohighlight">\(S_1\)</span>: <span class="math notranslate nohighlight">\([S \rightarrow (\cdot S), 0]\)</span></p></li>
<li><p>For item <span class="math notranslate nohighlight">\([S \rightarrow \cdot(), 0]\)</span>, add to <span class="math notranslate nohighlight">\(S_1\)</span>: <span class="math notranslate nohighlight">\([S \rightarrow (\cdot), 0]\)</span></p></li>
</ul>
</li>
<li><p>Applying the predicting operation: For item <span class="math notranslate nohighlight">\([S \rightarrow (\cdot S), 0]\)</span>, add to <span class="math notranslate nohighlight">\(S_1\)</span>:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot SS, 1]\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot (S), 1]\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot (), 1]\)</span></p></li>
</ul>
</li>
<li><p>Finally <span class="math notranslate nohighlight">\(S_1\)</span> contains the following items:
$<span class="math notranslate nohighlight">\([S \rightarrow (\cdot S), 0]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow (\cdot), 0]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot SS, 1]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot (S), 1]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot (), 1]\)</span>$</p></li>
</ul>
</li>
<li><p>Step 3: Process <span class="math notranslate nohighlight">\((\)</span> at position <span class="math notranslate nohighlight">\(1\)</span></p>
<ul>
<li><p>Applying the scanning operation:</p>
<ul>
<li><p>For item <span class="math notranslate nohighlight">\(S \rightarrow \cdot (S), 1\)</span>, add to <span class="math notranslate nohighlight">\(S_2\)</span>: <span class="math notranslate nohighlight">\([S \rightarrow (\cdot S), 1]\)</span></p></li>
<li><p>For item <span class="math notranslate nohighlight">\([S \rightarrow \cdot(), 1]\)</span>, add to <span class="math notranslate nohighlight">\(S_2\)</span>: <span class="math notranslate nohighlight">\([S \rightarrow (\cdot), 1]\)</span></p></li>
</ul>
</li>
<li><p>Applying the predicting operation: for item <span class="math notranslate nohighlight">\([S \rightarrow (\cdot S), 1]\)</span>, add to <span class="math notranslate nohighlight">\(S_2\)</span>:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot SS, 2]\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot (S), 2]\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\([S \rightarrow \cdot (), 2]\)</span></p></li>
</ul>
</li>
<li><p>Finally <span class="math notranslate nohighlight">\(S_2\)</span> contains the following items:
$<span class="math notranslate nohighlight">\([S \rightarrow (\cdot S), 1]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow (\cdot), 1]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot SS, 2]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot (S), 2]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow \cdot (), 2]\)</span>$</p></li>
</ul>
</li>
<li><p>Step 4: Process <span class="math notranslate nohighlight">\()\)</span> at position <span class="math notranslate nohighlight">\(2\)</span></p>
<ul>
<li><p>Applying the scanning operation:</p>
<ul>
<li><p>For item <span class="math notranslate nohighlight">\([S \rightarrow \cdot(), 1]\)</span>, add to <span class="math notranslate nohighlight">\(S_3\)</span>: <span class="math notranslate nohighlight">\([S \rightarrow ()\cdot, 1]\)</span></p></li>
</ul>
</li>
<li><p>Applying the completing operation: for item <span class="math notranslate nohighlight">\([S \rightarrow ()\cdot, 1]\)</span>, find items in <span class="math notranslate nohighlight">\(S_1\)</span> expecting <span class="math notranslate nohighlight">\(S\)</span>: <span class="math notranslate nohighlight">\([S \rightarrow (\cdot S), 0]\)</span>, so add <span class="math notranslate nohighlight">\([S \rightarrow (S \cdot), 0]\)</span> to <span class="math notranslate nohighlight">\(S_3\)</span>.</p></li>
<li><p>There is no new predicting operations needed</p></li>
<li><p>Finally <span class="math notranslate nohighlight">\(S_3\)</span> contains the following items:
$<span class="math notranslate nohighlight">\([S \rightarrow ()\cdot, 1]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow (S\cdot), 0]\)</span>$</p></li>
</ul>
</li>
<li><p>Step 5: Process <span class="math notranslate nohighlight">\()\)</span> at position <span class="math notranslate nohighlight">\(3\)</span></p>
<ul>
<li><p>Applying the scanning operation:</p>
<ul>
<li><p>For item <span class="math notranslate nohighlight">\([S \rightarrow (S\cdot), 0]\)</span>, add to <span class="math notranslate nohighlight">\(S_4\)</span>: <span class="math notranslate nohighlight">\([S \rightarrow (S)\cdot, 0]\)</span></p></li>
</ul>
</li>
<li><p>Applying the completing operation: for item <span class="math notranslate nohighlight">\([S \rightarrow (S)\cdot, 0]\)</span>, find items in <span class="math notranslate nohighlight">\(S_0\)</span> expecting <span class="math notranslate nohighlight">\(S\)</span>:</p>
<ul>
<li><p>for <span class="math notranslate nohighlight">\([S' \rightarrow \cdot S, 0]\)</span>, add <span class="math notranslate nohighlight">\([S' \rightarrow S \cdot, 0]\)</span> to <span class="math notranslate nohighlight">\(S_4\)</span>.</p></li>
<li><p>for <span class="math notranslate nohighlight">\([S \rightarrow \cdot SS, 0]\)</span>, add <span class="math notranslate nohighlight">\([S \rightarrow S \cdot S, 0]\)</span> to <span class="math notranslate nohighlight">\(S_4\)</span>.</p></li>
</ul>
</li>
<li><p>There is no new predicting operations needed</p></li>
<li><p>Finally <span class="math notranslate nohighlight">\(S_4\)</span> contains the following items:
$<span class="math notranslate nohighlight">\([S \rightarrow (S)\cdot, 0]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S' \rightarrow S \cdot, 0]\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\([S \rightarrow S \cdot S, 0]\)</span>$</p></li>
</ul>
</li>
<li><p>Step 6: since <span class="math notranslate nohighlight">\(S_4\)</span> contains <span class="math notranslate nohighlight">\([S' \rightarrow S \cdot, 0]\)</span>, the string <span class="math notranslate nohighlight">\((())\)</span> is accepted.</p></li>
</ul>
</section>
<section id="id6">
<h3>3.6 Example Python Implementation<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p>Below, weâll demonstrate how to implement the Earleyâs Algorithm with Python code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

<span class="k">def</span><span class="w"> </span><span class="nf">earley_parse</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">grammar</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predictor</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="n">non_terminal</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">non_terminal</span> <span class="ow">in</span> <span class="n">grammar</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">grammar</span><span class="p">[</span><span class="n">non_terminal</span><span class="p">]:</span>
                <span class="n">new_state</span> <span class="o">=</span> <span class="p">(</span><span class="n">non_terminal</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">production</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">new_state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chart</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                    <span class="n">chart</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_state</span><span class="p">)</span>
                    <span class="n">current_agenda</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_state</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">scanner</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">):</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
            <span class="n">current_token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            
            <span class="c1"># Special handling for numeric tokens</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="p">(</span><span class="n">expected</span> <span class="o">==</span> <span class="n">current_token</span> <span class="ow">or</span> 
                      <span class="p">(</span><span class="n">expected</span> <span class="o">==</span> <span class="s1">&#39;num&#39;</span> <span class="ow">and</span> <span class="n">current_token</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()))</span>
            
            <span class="k">if</span> <span class="n">matches</span><span class="p">:</span>
                <span class="n">new_state</span> <span class="o">=</span> <span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">new_state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chart</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
                    <span class="n">chart</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_state</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">completer</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">prev_state</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">chart</span><span class="p">[</span><span class="n">origin</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">prev_state</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">prev_state</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">and</span> <span class="n">prev_state</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">prev_state</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">==</span> <span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">new_state</span> <span class="o">=</span> <span class="p">(</span><span class="n">prev_state</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">prev_state</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">prev_state</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prev_state</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">new_state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chart</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                    <span class="n">chart</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_state</span><span class="p">)</span>
                    <span class="n">current_agenda</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_state</span><span class="p">)</span>
    
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
    <span class="n">chart</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    
    <span class="c1"># Initialize chart[0]</span>
    <span class="k">for</span> <span class="n">production</span> <span class="ow">in</span> <span class="n">grammar</span><span class="p">[</span><span class="n">start_symbol</span><span class="p">]:</span>
        <span class="n">initial_state</span> <span class="o">=</span> <span class="p">(</span><span class="n">start_symbol</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">production</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">chart</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">initial_state</span><span class="p">)</span>
    
    <span class="c1"># Process each chart position separately</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">current_agenda</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">chart</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>  <span class="c1"># Process only states from current chart</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">current_agenda</span><span class="p">):</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">current_agenda</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            
            <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>  <span class="c1"># Dot not at the end</span>
                <span class="n">next_symbol</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">next_symbol</span> <span class="ow">in</span> <span class="n">grammar</span><span class="p">:</span>  <span class="c1"># Non-terminal</span>
                    <span class="n">predictor</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># Terminal</span>
                    <span class="n">scanner</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># Dot at the end (completed state)</span>
                <span class="n">completer</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
    
    <span class="c1"># Check if any complete parse exists</span>
    <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">start_symbol</span> <span class="ow">and</span> <span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">and</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> 
               <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">chart</span><span class="p">[</span><span class="n">n</span><span class="p">])</span>

<span class="c1"># Example usage</span>
<span class="n">grammar</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">]),</span> <span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">]),</span> <span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">])]</span>
<span class="p">}</span>
<span class="n">tokens</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;(()())&quot;</span><span class="p">)</span>  <span class="c1"># Convert the string into a list of characters</span>
<span class="nb">print</span><span class="p">(</span><span class="n">earley_parse</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">grammar</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">))</span>  <span class="c1"># Output: True</span>

<span class="n">grammar</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">]),</span> <span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">]),</span> <span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;T&#39;</span><span class="p">])],</span>
    <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">]),</span> <span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">]),</span> <span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;F&#39;</span><span class="p">])],</span>
    <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">]),</span> <span class="nb">tuple</span><span class="p">([</span><span class="s1">&#39;num&#39;</span><span class="p">])]</span>
<span class="p">}</span>
<span class="n">tokens</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;2+3*4&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">earley_parse</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">grammar</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">))</span>  <span class="c1"># Output: True</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
True
</pre></div>
</div>
</div>
</div>
</section>
<section id="comparison-between-earley-s-and-cyk-algorithm">
<h3>3.7 Comparison between Earleyâs and CYK Algorithm<a class="headerlink" href="#comparison-between-earley-s-and-cyk-algorithm" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Earleyâs Algorithm</p></th>
<th class="head"><p>CYK Algorithm</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Grammar Requirements</strong></p></td>
<td><p>Any context-free grammar</p></td>
<td><p>Chomsky Normal Form only</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Time Complexity</strong></p></td>
<td><p>O(nÂ³) worst case<br>O(nÂ²) unambiguous<br>O(n) for simple CFG such as LR(k)</p></td>
<td><p>O(nÂ³) always</p></td>
</tr>
<tr class="row-even"><td><p><strong>Space Complexity</strong></p></td>
<td><p>O(nÂ²)</p></td>
<td><p>O(nÂ²)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Implementation Complexity</strong></p></td>
<td><p>Difficult</p></td>
<td><p>Simple</p></td>
</tr>
<tr class="row-even"><td><p><strong>Early Recognition</strong></p></td>
<td><p>Can recognize prefixes early</p></td>
<td><p>Must process entire input</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="finiteness-problem">
<h2>4. Finiteness Problem<a class="headerlink" href="#finiteness-problem" title="Link to this heading">#</a></h2>
<section id="id7">
<h3>4.1 Definition<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<p>The finiteness problem asks: âIs the language generated by a CFG finite or infinite?â  For context-free grammars, determining whether the generated language is finite or infinite is decidable, meaning there exists an algorithm that always terminates with the correct answer.</p>
</section>
<section id="algorithm-to-check-finiteness">
<h3>4.2 Algorithm to Check Finiteness<a class="headerlink" href="#algorithm-to-check-finiteness" title="Link to this heading">#</a></h3>
<p>A language is infinite if and only if there exists a derivation path in which a non-terminal derives a string that contains itself, and it can derive a non-empty string (i.e., thereâs a cycle in the derivation). A CFG generates an infinite language if and only if there exists at least one non-terminal <span class="math notranslate nohighlight">\(A\)</span> that:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(A\)</span> is useful, meaning it is reachable from the start symbol and can derive a terminal string, and</p></li>
<li><p><span class="math notranslate nohighlight">\(A\)</span> can derive a string that contains itself: <span class="math notranslate nohighlight">\(A \stackrel{*}\Rightarrow xAy\)</span> where <span class="math notranslate nohighlight">\(\stackrel{*}\Rightarrow\)</span> means deriving in zero or more steps, and</p></li>
<li><p>Either <span class="math notranslate nohighlight">\(x\)</span> or <span class="math notranslate nohighlight">\(y\)</span> or both is not empty.</p></li>
</ul>
<p>If such a non-terminal exists, we call it a <strong>self-embedded non-terminal</strong>, and its recursive derivation path can be used to âpumpâ the derivation, enabling the generation of arbitrarily long words by repeatedly applying the recursive rule. Based on this observation, we can design an algorithm as follows:</p>
<section id="algorithm-steps">
<h4>Algorithm Steps:<a class="headerlink" href="#algorithm-steps" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Step 1: Identify useful non-terminals (as previously discussed in Section 2 of this chapter)</p></li>
<li><p>Step 2: Revise the CFG by eliminating all productions containing useless non-terminals</p></li>
<li><p>Step 3: Detect self-embedded nonterminals: for each remaining non-terminal <span class="math notranslate nohighlight">\(A\)</span>:</p>
<ul>
<li><p>Create a temporary marker symbol <span class="math notranslate nohighlight">\(A_M\)</span></p></li>
<li><p>Replace all occurrences of <span class="math notranslate nohighlight">\(A\)</span> on the left side of productions with <span class="math notranslate nohighlight">\(A_M\)</span></p></li>
<li><p>Initialize a set <span class="math notranslate nohighlight">\(Reachable = \{A\}\)</span></p></li>
<li><p>Repeat until no changes to <span class="math notranslate nohighlight">\(Reachable\)</span>:</p>
<ul>
<li><p>For each nonterminal <span class="math notranslate nohighlight">\(B\)</span> that appears on the left side of a production with some non-terminals from <span class="math notranslate nohighlight">\(Reachable\)</span> on its right side: Add <span class="math notranslate nohighlight">\(B\)</span> to <span class="math notranslate nohighlight">\(Reachable\)</span></p></li>
</ul>
</li>
<li><p>If <span class="math notranslate nohighlight">\(A_M\)</span> is in <span class="math notranslate nohighlight">\(Reachable\)</span>, then <span class="math notranslate nohighlight">\(A\)</span> is self-embedded</p></li>
<li><p>If a self-embedded nonterminal is found, exit the loop</p></li>
</ul>
</li>
<li><p>Step 4: if any self-embedded non-terminal was found, the language is infinite, otherwise it is finite.</p></li>
</ul>
</section>
</section>
<section id="id8">
<h3>4.3 Examples<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p><strong>Example 1:</strong> Consider the given CFG: <span class="math notranslate nohighlight">\(\{S \rightarrow aA \mid bB; A \rightarrow a \mid b; B \rightarrow ab\}\)</span>. Decide if its language is finite or infinite.</p>
<ul class="simple">
<li><p>Step 1: Identify useful non-terminals: all non-terminals <span class="math notranslate nohighlight">\(\{S, A, B\}\)</span> are useful. Each can be reached from S and can derive terminal strings.</p></li>
<li><p>Step 2: Remove useless non-terminals: no useless non-terminals to remove, the given CFG remains unchanged.</p></li>
<li><p>Step 3: Detect self-embedded non-terminals:</p>
<ul>
<li><p>For non-terminal <span class="math notranslate nohighlight">\(S\)</span>:</p>
<ul>
<li><p>Replace <span class="math notranslate nohighlight">\(S\)</span> with <span class="math notranslate nohighlight">\(S_M\)</span> in left sides: <span class="math notranslate nohighlight">\(S_M \rightarrow aA \mid bB\)</span>,</p></li>
<li><p>Initialize <span class="math notranslate nohighlight">\(Reachable = \{S\}\)</span></p></li>
<li><p>Check productions:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(S_M \rightarrow aA\)</span>: add <span class="math notranslate nohighlight">\(A\)</span>: <span class="math notranslate nohighlight">\(Reachable = \{S, A\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(S_M \rightarrow bB\)</span>: add <span class="math notranslate nohighlight">\(B\)</span>: <span class="math notranslate nohighlight">\(Reachable = \{S, A, B\}\)</span></p></li>
</ul>
</li>
<li><p>No more changes to <span class="math notranslate nohighlight">\(Reachable\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(S_M\)</span> is not in <span class="math notranslate nohighlight">\(Reachable\)</span>, so <span class="math notranslate nohighlight">\(S\)</span> is not self-embedded</p></li>
</ul>
</li>
<li><p>For non-terminal <span class="math notranslate nohighlight">\(A\)</span>:</p>
<ul>
<li><p>Replace <span class="math notranslate nohighlight">\(A\)</span> with <span class="math notranslate nohighlight">\(A_M\)</span> in left sides: <span class="math notranslate nohighlight">\(A_M \rightarrow a \mid b\)</span></p></li>
<li><p>Initialize <span class="math notranslate nohighlight">\(Reachable = \{A\}\)</span></p></li>
<li><p>Check productions: no non-terminals on right sides</p></li>
<li><p>No changes: <span class="math notranslate nohighlight">\(Reachable = \{A\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(A_M\)</span> is not in <span class="math notranslate nohighlight">\(Reachable\)</span>, so <span class="math notranslate nohighlight">\(A\)</span> is not self-embedded</p></li>
</ul>
</li>
<li><p>For non-terminal <span class="math notranslate nohighlight">\(B\)</span>:</p>
<ul>
<li><p>Replace <span class="math notranslate nohighlight">\(B\)</span> with <span class="math notranslate nohighlight">\(B_M\)</span> in left sides: <span class="math notranslate nohighlight">\(B_M \rightarrow ab\)</span></p></li>
<li><p>Initialize <span class="math notranslate nohighlight">\(Reachable = \{B\}\)</span></p></li>
<li><p>Check productions: no non-terminals on right sides</p></li>
<li><p>No changes: <span class="math notranslate nohighlight">\(Reachable = \{B\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(B_M\)</span> is not in <span class="math notranslate nohighlight">\(Reachable\)</span>, so <span class="math notranslate nohighlight">\(B\)</span> is not self-embedded</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Step 4: Decision: No self-embedded non-terminals found, so the language is finite.</p></li>
</ul>
<p><strong>Example 2:</strong> Consider the given CFG: <span class="math notranslate nohighlight">\(\{S \rightarrow AB \mid a; A \rightarrow BC; B \rightarrow CA; C \rightarrow b\}\)</span>. Decide if its language is finite or infinite.</p>
<ul class="simple">
<li><p>Step 1: Identify useful non-terminals: all non-terminals <span class="math notranslate nohighlight">\(\{S, A, B, C\}\)</span> are useful.</p></li>
<li><p>Step 2: Remove useless non-terminals: no useless non-terminals to remove, the given CFG remains unchanged.</p></li>
<li><p>Step 3: Detect self-embedded non-terminals:</p>
<ul>
<li><p>For non-terminal <span class="math notranslate nohighlight">\(S\)</span>:</p>
<ul>
<li><p>Replace <span class="math notranslate nohighlight">\(S\)</span> with <span class="math notranslate nohighlight">\(S_M\)</span> in left sides: <span class="math notranslate nohighlight">\(S_M \rightarrow AB \mid a\)</span></p></li>
<li><p>Initialize <span class="math notranslate nohighlight">\(Reachable = \{S\}\)</span></p></li>
<li><p>Check productions:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(S_M \rightarrow AB\)</span>: add <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> to <span class="math notranslate nohighlight">\(Reachable = \{S, A, B\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(S_M \rightarrow a\)</span>: No non-terminals</p></li>
<li><p><span class="math notranslate nohighlight">\(A \rightarrow BC\)</span>: add <span class="math notranslate nohighlight">\(C\)</span> to <span class="math notranslate nohighlight">\(Reachable = \{S, A, B, C\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(B \rightarrow CA\)</span>: Nothing new to add</p></li>
</ul>
</li>
<li><p>No more changes to <span class="math notranslate nohighlight">\(Reachable\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(S_M\)</span> is not in <span class="math notranslate nohighlight">\(Reachable\)</span>, so <span class="math notranslate nohighlight">\(S\)</span> is not self-embedded</p></li>
</ul>
</li>
<li><p>For non-terminal <span class="math notranslate nohighlight">\(A\)</span>:</p>
<ul>
<li><p>Replace <span class="math notranslate nohighlight">\(A\)</span> with <span class="math notranslate nohighlight">\(A_M\)</span> in left sides: <span class="math notranslate nohighlight">\(A_M \rightarrow BC\)</span></p></li>
<li><p>Initialize <span class="math notranslate nohighlight">\(Reachable = \{A\}\)</span></p></li>
<li><p>Check productions:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(A_M \rightarrow BC\)</span>: add <span class="math notranslate nohighlight">\(B\)</span> and <span class="math notranslate nohighlight">\(C\)</span> to <span class="math notranslate nohighlight">\(Reachable = \{A, B, C\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(B \rightarrow CA\)</span>: since <span class="math notranslate nohighlight">\(C\)</span> is in <span class="math notranslate nohighlight">\(Reachable\)</span> and <span class="math notranslate nohighlight">\(A\)</span> is in the initial set, add <span class="math notranslate nohighlight">\(A_M\)</span> to <span class="math notranslate nohighlight">\(Reachable = \{A, B, C, A_M\}\)</span></p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(A_M\)</span> is in <span class="math notranslate nohighlight">\(Reachable\)</span>, so <span class="math notranslate nohighlight">\(A\)</span> is self-embedded</p></li>
</ul>
</li>
<li><p>Terminate further processing upon detecting a self-embedded non-terminal.</p></li>
</ul>
</li>
<li><p>Step 4: Decision: found self-embedded non-terminal <span class="math notranslate nohighlight">\(A\)</span>, so the language is infinite.</p></li>
</ul>
</section>
<section id="id9">
<h3>4.4 Example Python Implementation<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>Below, weâll demonstrate how to implement the Earleyâs Algorithm with Python code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">is_language_finite</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine if a context-free grammar generates a finite language using</span>
<span class="sd">    the algorithm to detect self-embedded non-terminals.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        grammar: Dictionary mapping non-terminals to lists of productions</span>
<span class="sd">        start_symbol: The start symbol of the grammar</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        str: &quot;Finite&quot; if the language is finite, &quot;Infinite&quot; if it&#39;s infinite</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Step 1: Identify useful non-terminals</span>
    <span class="n">useful_symbols</span> <span class="o">=</span> <span class="n">find_useful_symbols</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Useful symbols: </span><span class="si">{</span><span class="n">useful_symbols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="c1"># Step 2: Remove useless non-terminals</span>
    <span class="n">filtered_grammar</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">nt</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">nt</span> <span class="ow">in</span> <span class="n">useful_symbols</span><span class="p">:</span>
            <span class="n">filtered_prods</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
                <span class="c1"># Keep only productions with all non-terminals useful</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">useful_symbols</span> <span class="ow">or</span> <span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grammar</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">prod</span><span class="p">):</span>
                    <span class="n">filtered_prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prod</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">filtered_prods</span><span class="p">:</span>
                <span class="n">filtered_grammar</span><span class="p">[</span><span class="n">nt</span><span class="p">]</span> <span class="o">=</span> <span class="n">filtered_prods</span>
    
    <span class="c1"># Step 3: Detect self-embedded non-terminals</span>
    <span class="k">for</span> <span class="n">non_terminal</span> <span class="ow">in</span> <span class="n">filtered_grammar</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_self_embedded</span><span class="p">(</span><span class="n">non_terminal</span><span class="p">,</span> <span class="n">filtered_grammar</span><span class="p">,</span> <span class="n">useful_symbols</span><span class="p">):</span>
            <span class="c1"># Step 4: If any self-embedded non-terminal is found, the language is infinite</span>
            <span class="k">return</span> <span class="s2">&quot;Infinite&quot;</span>
    
    <span class="c1"># No self-embedded non-terminals found, the language is finite</span>
    <span class="k">return</span> <span class="s2">&quot;Finite&quot;</span>


<span class="k">def</span><span class="w"> </span><span class="nf">find_useful_symbols</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find all useful non-terminals (both reachable and generating).&quot;&quot;&quot;</span>
    <span class="c1"># Find generating non-terminals</span>
    <span class="n">generating</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    
    <span class="c1"># Initial set: non-terminals that directly derive terminal strings</span>
    <span class="k">for</span> <span class="n">nt</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grammar</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">prod</span><span class="p">):</span>
                <span class="n">generating</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">nt</span><span class="p">)</span>
                <span class="k">break</span>
    
    <span class="c1"># Find all non-terminals that can eventually derive terminal strings</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">nt</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">nt</span> <span class="ow">in</span> <span class="n">generating</span><span class="p">:</span>
                <span class="k">continue</span>
                
            <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">generating</span> <span class="ow">or</span> <span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grammar</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">prod</span><span class="p">):</span>
                    <span class="n">generating</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">nt</span><span class="p">)</span>
                    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
    
    <span class="c1"># Find reachable non-terminals</span>
    <span class="n">reachable</span> <span class="o">=</span> <span class="p">{</span><span class="n">start_symbol</span><span class="p">}</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">new_reachable</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">reachable</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">nt</span> <span class="ow">in</span> <span class="n">reachable</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">nt</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grammar</span><span class="p">:</span>
                <span class="k">continue</span>
                
            <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">grammar</span><span class="p">[</span><span class="n">nt</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">prod</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">grammar</span> <span class="ow">and</span> <span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_reachable</span><span class="p">:</span>
                        <span class="n">new_reachable</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
                        <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">reachable</span> <span class="o">=</span> <span class="n">new_reachable</span>
    
    <span class="c1"># Useful symbols are both generating and reachable</span>
    <span class="k">return</span> <span class="n">generating</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">reachable</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">is_self_embedded</span><span class="p">(</span><span class="n">non_terminal</span><span class="p">,</span> <span class="n">grammar</span><span class="p">,</span> <span class="n">useful_symbols</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a non-terminal is self-embedded using the algorithm.</span>
<span class="sd">    </span>
<span class="sd">    A non-terminal is self-embedded if it can derive a string that contains</span>
<span class="sd">    itself with non-empty symbols on at least one side.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create a temporary marker symbol</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;M_</span><span class="si">{</span><span class="n">non_terminal</span><span class="si">}</span><span class="s2">&quot;</span>
    
    <span class="c1"># Initialize Reachable = {A}</span>
    <span class="n">reachable</span> <span class="o">=</span> <span class="p">{</span><span class="n">non_terminal</span><span class="p">}</span>
    
    <span class="c1"># Repeat until no changes to Reachable</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">new_reachable</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">reachable</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">left_side</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># We only care about useful non-terminals</span>
            <span class="k">if</span> <span class="n">left_side</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">useful_symbols</span><span class="p">:</span>
                <span class="k">continue</span>
                
            <span class="c1"># Check if this non-terminal has a production with a reachable symbol</span>
            <span class="n">contains_reachable</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
                <span class="c1"># Check only non-terminal symbols that are useful</span>
                <span class="n">useful_nt_in_prod</span> <span class="o">=</span> <span class="p">[</span><span class="n">symbol</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">prod</span> <span class="k">if</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">useful_symbols</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">reachable</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">useful_nt_in_prod</span><span class="p">):</span>
                    <span class="n">contains_reachable</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            
            <span class="k">if</span> <span class="n">contains_reachable</span><span class="p">:</span>
                <span class="c1"># If this is our target non-terminal, add the marker</span>
                <span class="k">if</span> <span class="n">left_side</span> <span class="o">==</span> <span class="n">non_terminal</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">marker</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_reachable</span><span class="p">:</span>
                        <span class="n">new_reachable</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
                        <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="c1"># Otherwise, add this non-terminal</span>
                <span class="k">elif</span> <span class="n">left_side</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_reachable</span><span class="p">:</span>
                    <span class="n">new_reachable</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">left_side</span><span class="p">)</span>
                    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">reachable</span> <span class="o">=</span> <span class="n">new_reachable</span>
    
    <span class="c1"># If M_A is in Reachable, then A is self-embedded</span>
    <span class="k">return</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">reachable</span>


<span class="c1"># Test examples</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Example 1: Simple Finite Grammar {ac, ad, be}</span>
    <span class="n">grammar1</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;U&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;e&#39;</span><span class="p">]]</span>
    <span class="p">}</span>

    <span class="c1"># Example 2: Simple Infinite Grammar {b, ab, aab, ...}</span>
    <span class="n">grammar2</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]]</span>
    <span class="p">}</span>

    <span class="c1"># Example 3: Complex Grammar with cycles</span>
    <span class="n">grammar3</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;b&#39;</span><span class="p">]]</span>
    <span class="p">}</span>

    <span class="c1"># Example 4: Tricky Finite Grammar</span>
    <span class="n">grammar4</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;g&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;h&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;i&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;j&#39;</span><span class="p">]]</span>
    <span class="p">}</span>

    <span class="c1"># Example 5: Balanced Parentheses Grammar</span>
    <span class="n">grammar5</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[]]</span>  <span class="c1"># [] represents empty string</span>
    <span class="p">}</span>

    <span class="c1"># Example 6: Complex Grammar</span>
    <span class="n">grammar6</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]],</span>
      <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]],</span> 
      <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]],</span> 
      <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]],</span> 
      <span class="s1">&#39;Z&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]]}</span>
      
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Results of finiteness checking:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Example 1: </span><span class="si">{</span><span class="n">is_language_finite</span><span class="p">(</span><span class="n">grammar1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> (should be Finite)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Example 2: </span><span class="si">{</span><span class="n">is_language_finite</span><span class="p">(</span><span class="n">grammar2</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> (should be Infinite)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Example 3: </span><span class="si">{</span><span class="n">is_language_finite</span><span class="p">(</span><span class="n">grammar3</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> (should be Finite)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Example 4: </span><span class="si">{</span><span class="n">is_language_finite</span><span class="p">(</span><span class="n">grammar4</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> (should be Finite)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Example 5: </span><span class="si">{</span><span class="n">is_language_finite</span><span class="p">(</span><span class="n">grammar5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> (should be Infinite)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Example 6: </span><span class="si">{</span><span class="n">is_language_finite</span><span class="p">(</span><span class="n">grammar6</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> (should be Infinite)&quot;</span><span class="p">)</span>
    
    <span class="c1"># Examining which non-terminals are self-embedded</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">grammar</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">grammar1</span><span class="p">,</span> <span class="n">grammar2</span><span class="p">,</span> <span class="n">grammar3</span><span class="p">,</span> <span class="n">grammar4</span><span class="p">,</span> <span class="n">grammar5</span><span class="p">,</span> <span class="n">grammar6</span><span class="p">],</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">useful</span> <span class="o">=</span> <span class="n">find_useful_symbols</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Example </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> self-embedded non-terminals (among useful symbols </span><span class="si">{</span><span class="n">useful</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">nt</span> <span class="ow">in</span> <span class="n">grammar</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">nt</span> <span class="ow">in</span> <span class="n">useful</span> <span class="ow">and</span> <span class="n">is_self_embedded</span><span class="p">(</span><span class="n">nt</span><span class="p">,</span> <span class="n">grammar</span><span class="p">,</span> <span class="n">useful</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">nt</span><span class="si">}</span><span class="s2"> is self-embedded&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Results of finiteness checking:
Useful symbols: {&#39;T&#39;, &#39;U&#39;, &#39;S&#39;}
Example 1: Finite (should be Finite)
Useful symbols: {&#39;S&#39;}
Example 2: Infinite (should be Infinite)
Useful symbols: {&#39;C&#39;, &#39;S&#39;}
Example 3: Finite (should be Finite)
Useful symbols: {&#39;A&#39;, &#39;F&#39;, &#39;D&#39;, &#39;S&#39;, &#39;C&#39;, &#39;B&#39;, &#39;E&#39;}
Example 4: Finite (should be Finite)
Useful symbols: {&#39;S&#39;}
Example 5: Infinite (should be Infinite)
Useful symbols: {&#39;A&#39;, &#39;X&#39;, &#39;S&#39;, &#39;B&#39;}
Example 6: Infinite (should be Infinite)

Example 1 self-embedded non-terminals (among useful symbols {&#39;T&#39;, &#39;U&#39;, &#39;S&#39;}):

Example 2 self-embedded non-terminals (among useful symbols {&#39;S&#39;}):
  S is self-embedded

Example 3 self-embedded non-terminals (among useful symbols {&#39;C&#39;, &#39;S&#39;}):

Example 4 self-embedded non-terminals (among useful symbols {&#39;A&#39;, &#39;F&#39;, &#39;D&#39;, &#39;S&#39;, &#39;C&#39;, &#39;B&#39;, &#39;E&#39;}):

Example 5 self-embedded non-terminals (among useful symbols {&#39;S&#39;}):
  S is self-embedded

Example 6 self-embedded non-terminals (among useful symbols {&#39;A&#39;, &#39;X&#39;, &#39;S&#39;, &#39;B&#39;}):
  A is self-embedded
  X is self-embedded
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="practice-exercises">
<h2>5. Practice Exercises<a class="headerlink" href="#practice-exercises" title="Link to this heading">#</a></h2>
<section id="exercise-1-short-answer-questions">
<h3>5.1 Exercise 1: Short Answer Questions<a class="headerlink" href="#exercise-1-short-answer-questions" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Explain the difference between a non-generating non-terminal and an unreachable non-terminal.</p></li>
<li><p>Why does the CYK algorithm require the grammar to be in Chomsky Normal Form?</p></li>
<li><p>What defines a self-embedded non-terminal and why is it important for language finiteness?</p></li>
<li><p>How does Earleyâs algorithm differ from the CYK algorithm in terms of grammar requirements?</p></li>
</ul>
</section>
<section id="exercise-2-emptiness-problem">
<h3>5.2 Exercise 2: Emptiness Problem<a class="headerlink" href="#exercise-2-emptiness-problem" title="Link to this heading">#</a></h3>
<p>Determine if the language generated by each following grammar is empty:</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow AB, A \rightarrow BC, B \rightarrow CA, C \rightarrow DA, D \rightarrow AD\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow AB, A \rightarrow aA, B \rightarrow bB, C \rightarrow c\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow aS \mid bS, A \rightarrow SbS\}\)</span></p></li>
</ol>
</section>
<section id="exercise-3-uselessness-problem">
<h3>5.3 Exercise 3: Uselessness Problem<a class="headerlink" href="#exercise-3-uselessness-problem" title="Link to this heading">#</a></h3>
<p>Identify all useless non-terminals in the following grammar:</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow AB \mid CD, A \rightarrow aA \mid a, B \rightarrow bB \mid b, C \rightarrow cD, D \rightarrow d\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow AB \mid aC, A \rightarrow BC, B \rightarrow bB, C \rightarrow c, D \rightarrow dD\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow XY \mid a, X \rightarrow YZ, Y \rightarrow XZ, Z \rightarrow b\}\)</span></p></li>
</ol>
</section>
<section id="exercise-4-membership-problem">
<h3>5.4 Exercise 4: Membership Problem<a class="headerlink" href="#exercise-4-membership-problem" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Using the CYK algorithm, determine if the string <span class="math notranslate nohighlight">\(abbab\)</span> is in the language of the following grammar.
<span class="math notranslate nohighlight">\(\{S \rightarrow AB \mid BB, A \rightarrow AB \mid a, B \rightarrow Ba \mid b\}\)</span></p></li>
<li><p>Using the Earleyâs Algorithm, determine if the string <span class="math notranslate nohighlight">\(aab\)</span> is in the language of the following grammar.
<span class="math notranslate nohighlight">\(\{S \rightarrow AA \mid B, A \rightarrow aA \mid a, B \rightarrow b\}\)</span></p></li>
</ol>
</section>
<section id="exercise-5-finiteness-problem">
<h3>5.5 Exercise 5: Finiteness Problem<a class="headerlink" href="#exercise-5-finiteness-problem" title="Link to this heading">#</a></h3>
<p>Determine if each following grammar generates a finite or infinite language:</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow aS \mid A, A \rightarrow bA \mid b\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow aSb \mid \wedge, A \rightarrow aAb \mid ab\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\{S \rightarrow AB, A \rightarrow aA \mid a, B \rightarrow b\}\)</span></p></li>
</ol>
</section>
<section id="exercise-6-integrated-problem">
<h3>5.6 Exercise 6: Integrated Problem<a class="headerlink" href="#exercise-6-integrated-problem" title="Link to this heading">#</a></h3>
<p>For the following grammar, determine:</p>
<ol class="arabic simple">
<li><p>Is the language empty?</p></li>
<li><p>Which non-terminals are useless?</p></li>
<li><p>Is the string âabbaâ in the language?</p></li>
<li><p>Is the language finite?
$<span class="math notranslate nohighlight">\(\{S \rightarrow AB \mid aS, A \rightarrow aA \mid a, B \rightarrow bB \mid BA \mid b\}\)</span>$</p></li>
</ol>
</section>
<section id="exercise-7-algorithm-implementation">
<h3>5.7 Exercise 7: Algorithm Implementation<a class="headerlink" href="#exercise-7-algorithm-implementation" title="Link to this heading">#</a></h3>
<p>Write pseudocode/Python Code for an algorithm that takes a CFG and returns a simplified equivalent grammar with no useless symbols.</p>
</section>
</section>
<section id="further-reading">
<h2>6. Further Reading<a class="headerlink" href="#further-reading" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>âIntroduction to the Theory of Computationâ by Michael Sipser, Section 4.1</p></li>
<li><p>âIntroduction to Computer Theoryâ by Daniel I.A. Cohen, Chapter 18</p></li>
<li><p>âAutomata Theory, Languages, and Computationâ by Hopcroft, Motwani, and Ullman, Chapter 7</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\Part_2_Context_Free_Languages\Chapter_12"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../Chapter_11/Chapter11_Properties_of_Context_free%20Languages.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">11. </span>Properties of Context-free Languages (CFL)</p>
      </div>
    </a>
    <a class="right-next"
       href="../../Part_3_Turing_Machines/Chapter_13/Chapter13_Introduction_to_Turing_Machines.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">13. </span>Introduction to Turing Machines</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#emptiness-problem">1. Emptiness Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#definition">1.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-to-check-emptiness">1.2 Algorithm to Check Emptiness:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">1.3 Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-python-implementation">1.4 Example Python Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uselessness-problem">2. Uselessness Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-to-identify-useless-non-terminals">2.2 Algorithm to Identify Useless Non-terminals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.3 Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">2.4 Example Python Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membership-problem">3. Membership Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">3.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cyk-algorithm-cocke-younger-kasami-for-membership-problem">3.2 CYK Algorithm (Cocke-Younger-Kasami) for Membership Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cyk-algorithm-examples">3.3 CYK Algorithm Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">3.4 Example Python Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#earleys-algorithm-for-membership-problem">3.5 Earleyâs Algorithm for Membership Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">3.6 Example Python Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-between-earley-s-and-cyk-algorithm">3.7 Comparison between Earleyâs and CYK Algorithm</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finiteness-problem">4. Finiteness Problem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">4.1 Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-to-check-finiteness">4.2 Algorithm to Check Finiteness</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-steps">Algorithm Steps:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">4.3 Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">4.4 Example Python Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practice-exercises">5. Practice Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-short-answer-questions">5.1 Exercise 1: Short Answer Questions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-emptiness-problem">5.2 Exercise 2: Emptiness Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-uselessness-problem">5.3 Exercise 3: Uselessness Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-membership-problem">5.4 Exercise 4: Membership Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5-finiteness-problem">5.5 Exercise 5: Finiteness Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6-integrated-problem">5.6 Exercise 6: Integrated Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-7-algorithm-implementation">5.7 Exercise 7: Algorithm Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">6. Further Reading</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yong Zhang, Dylan Zwick
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>