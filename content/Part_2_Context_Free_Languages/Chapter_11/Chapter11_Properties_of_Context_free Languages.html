
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="article:modified_time" content="2025-08-21T16:38:06-06:00" />
    <title>11. Properties of Context-free Languages (CFL) &#8212; Decode Computation:Hands-On Formal Languages and Algorithms</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/Part_2_Context_Free_Languages/Chapter_11/Chapter11_Properties_of_Context_free Languages';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="12. Decidability in Context-Free Grammars (CFGs)" href="../Chapter_12/Chapter12_Decidability_in_CFG.html" />
    <link rel="prev" title="10. Pushdown Automata (PDA)" href="../Chapter_10/Chapter10_PDA.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Aug 21, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="Decode Computation:Hands-On Formal Languages and Algorithms - Home"/>
    <script>document.write(`<img src="../../../_static/logo.png" class="logo__image only-dark" alt="Decode Computation:Hands-On Formal Languages and Algorithms - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Decode Computation︰ Hands-On Formal Languages and Algorithms
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preliminary Material</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_0_Preliminary_Material/Chapter00_Set_Theory.html">1. Set Theory</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Regular Languages</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter01_Languages.html">2. Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter02_Regular_Expressions.html">3. Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter03_Finite_Automata.html">4. Finite Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter04_Nondeterministic_Finite_Automata.html">5. Nondeterministic Finite Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter05_Kleene%27s_Theorem_Part1.html">6. Kleene’s Theorem (Part 1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1_Regular_Languages/Chapter07_Nonregular_Languages.html">7. Nonregular Languages</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Context Free Languages</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Chapter_08/Chapter08_Fundamentals_of_CFG.html">8. Fundamentals of Context-Free Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_09/Chapter09_CFG_Normal_Forms_and_Transformations.html">9. Normal Forms and Transformations in Context-Free Grammars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_10/Chapter10_PDA.html">10. Pushdown Automata (PDA)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">11. Properties of Context-free Languages (CFL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_12/Chapter12_Decidability_in_CFG.html">12. Decidability in Context-Free Grammars (CFGs)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Turing Machines</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_13/Chapter13_Introduction_to_Turing_Machines.html">13. Introduction to Turing Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_14/Chapter14_Turing_Machine_Languages.html">14. Turing Machine Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_15/Chapter15_Turing_Machine_Encoding.html">15. Turing Machine Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_3_Turing_Machines/Chapter_16/Chapter16_Universal_Turing_Machine.html">16. The Universal Turing Machine</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced Topics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Part_4_Advanced_Topics/Chapter17_P_and_NP_Problems.html">17. P and NP Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_4_Advanced_Topics/Chapter18_NP_Completeness.html">18. NP-Completeness</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Appendix/Jupyter%20Notebook%20Setup%20Guide.html">19. Appendix: Getting Started with Jupyter Notebooks (JupyterLab and Google Colab)</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fcontent/Part_2_Context_Free_Languages/Chapter_11/Chapter11_Properties_of_Context_free Languages.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/content/Part_2_Context_Free_Languages/Chapter_11/Chapter11_Properties_of_Context_free Languages.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Properties of Context-free Languages (CFL)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-context-free-languages">1. Introduction to Context-free Languages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-python-implementation">2. Example Python Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#closure-properties-of-context-free-languages">3. Closure Properties of Context-free Languages</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#union">3.1 Union</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">3.2 Example Python Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#concatenation-product">3.3 Concatenation (Product)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kleene-closure-kleene-star">3.4 Kleene Closure (Kleene Star)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#non-closure-properties-intersection-and-complement">4. Non-Closure Properties: Intersection and Complement</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intersection">4.1 Intersection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cfls-are-closed-under-intersection-if-they-are-regular-languages">4.1.1 CFLs are closed under Intersection if They are Regular Languages</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#intersection-between-a-cfl-and-a-regular-language">4.1.2 Intersection between a CFL and a regular language</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-cfls-non-closure-under-intersection">4.1.3 Example of CFLs Non-Closure under Intersection</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-of-closure-properties">4.1.4 Summary of Closure Properties</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complement">4.2 Complement</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#proof">4.2.1 Proof</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cfls-are-closed-under-complement-if-they-are-regular-languages">4.2.2 CFLs are Closed Under Complement if They are Regular Languages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pumping-lemma-for-cfls">5. The Pumping Lemma for CFLs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-the-pumping-lemma">5.1 Introduction to the Pumping Lemma</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#statement-of-the-pumping-lemma">5.2 Statement of the Pumping Lemma</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intuitive-explanation-of-the-pumping-lemma">5.3 Intuitive Explanation of the Pumping Lemma</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-pumping-lemma-to-prove-a-language-is-not-context-free">5.4 Using the Pumping Lemma to Prove a Language is Not Context-Free</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-language-l-a-nb-na-n-mid-n-geq-0">5.4.1 Example 1: Language <span class="math notranslate nohighlight">\(L = \{a^nb^na^n \mid n \geq 0\}\)</span></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-language-l-ww-mid-w-in-a-b">5.4.2 Example 2: Language <span class="math notranslate nohighlight">\(L = \{ww \mid w \in \{a, b\}^+\}\)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practice-exercises">6. Practice Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-closure-properties">6.1 Exercise 1: Closure Properties</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-true-or-false">6.2 Exercise 2: True or False</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-non-closure-properties">6.3 Exercise 3: Non-Closure Properties</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-the-pumping-lemma">6.4 Exercise 4: The Pumping Lemma</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">7. Further Reading</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="properties-of-context-free-languages-cfl">
<h1><span class="section-number">11. </span>Properties of Context-free Languages (CFL)<a class="headerlink" href="#properties-of-context-free-languages-cfl" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>This section explores the fundamental concepts and properties of Context-free Languages (CFLs), a class of formal languages widely studied in theoretical computer science. We’ll cover their definition, closure properties (union, concatenation, Kleene closure), and properties related to intersection and complement.</p>
</section>
<section id="introduction-to-context-free-languages">
<h2>1. Introduction to Context-free Languages<a class="headerlink" href="#introduction-to-context-free-languages" title="Link to this heading">#</a></h2>
<p>A context-free language (CFL) is a language that can be generated by a context-free grammar (CFG). The class of CFLs is more expressive than regular languages and can be recognized by pushdown automata. For example, the following languages are all CFLs: Balanced Parentheses Language, Palindromes over {a, b}, <span class="math notranslate nohighlight">\(L = \{ a^nb^n | n ≥ 0 \}\)</span>.</p>
</section>
<section id="example-python-implementation">
<h2>2. Example Python Implementation<a class="headerlink" href="#example-python-implementation" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CFG</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A simple class to represent Context-Free Grammars&quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">terminals</span><span class="p">,</span> <span class="n">rules</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="n">variables</span>    <span class="c1"># Non-terminal symbols</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminals</span> <span class="o">=</span> <span class="n">terminals</span>    <span class="c1"># Terminal symbols</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rules</span> <span class="o">=</span> <span class="n">rules</span>            <span class="c1"># Production rules as a dictionary: A → [α1, α2, ...]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>            <span class="c1"># Start symbol</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Variables: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Terminals: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminals</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Start: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;Rules:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs_list</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">rhs</span> <span class="ow">in</span> <span class="n">rhs_list</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> → </span><span class="si">{</span><span class="n">rhs</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">result</span>

<span class="c1"># Example: A CFG for the language {a^n b^n | n ≥ 0}</span>
<span class="n">cfg_anbn</span> <span class="o">=</span> <span class="n">CFG</span><span class="p">(</span>
    <span class="n">variables</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;S&#39;</span><span class="p">},</span>
    <span class="n">terminals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="n">rules</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;aSb&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]},</span>
    <span class="n">start</span><span class="o">=</span><span class="s1">&#39;S&#39;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CFG for {a^n b^n | n ≥ 0}:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cfg_anbn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CFG for {a^n b^n | n ≥ 0}:
Variables: S
Terminals: a, b
Start: S
Rules:
  S → aSb
  S → 
</pre></div>
</div>
</div>
</div>
</section>
<section id="closure-properties-of-context-free-languages">
<h2>3. Closure Properties of Context-free Languages<a class="headerlink" href="#closure-properties-of-context-free-languages" title="Link to this heading">#</a></h2>
<p>CFLs exhibit certain closure properties under specific operations, meaning that if we apply these operations to context-free languages, the result is also a context-free language. We’ll explore union, concatenation (product), and Kleene closure.</p>
<section id="union">
<h3>3.1 Union<a class="headerlink" href="#union" title="Link to this heading">#</a></h3>
<p><strong>Definition</strong>: If <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span> are CFLs, their union is defined as <span class="math notranslate nohighlight">\(L_1 \cup L_2 = \{ x \mid x \in L_1 \text{ or } x \in L_2 \}\)</span>. This means any string <span class="math notranslate nohighlight">\(x\)</span> that belongs to either <span class="math notranslate nohighlight">\(L_1\)</span> or <span class="math notranslate nohighlight">\(L_2\)</span> (or both) is in <span class="math notranslate nohighlight">\(L_1 \cup L_2\)</span>. Given grammars <span class="math notranslate nohighlight">\(G_1 = (V_1, T_1, P_1, S_1)\)</span> for <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(G_2 = (V_2, T_2, P_2, S_2)\)</span> for <span class="math notranslate nohighlight">\(L_2\)</span>, we construct a CFG for <span class="math notranslate nohighlight">\(L_1 \cup L_2\)</span>:</p>
<ul class="simple">
<li><p>New start symbol: <span class="math notranslate nohighlight">\(S\)</span></p></li>
<li><p>Rules: <span class="math notranslate nohighlight">\(S \to S_1 \mid S_2\)</span>, plus all rules from <span class="math notranslate nohighlight">\(G_1\)</span> and <span class="math notranslate nohighlight">\(G_2\)</span>.</p></li>
</ul>
<p><strong>Theorem</strong>: If <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span> are context-free languages, then <span class="math notranslate nohighlight">\(L_1 \cup L_2\)</span> is also a context-free language.</p>
<p><strong>Proof</strong>: If we have CFGs <span class="math notranslate nohighlight">\(G_1 = (V_1, \Sigma_1, R_1)\)</span> for <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(G_2 = (V_2, \Sigma_2, R_2)\)</span> for <span class="math notranslate nohighlight">\(L_2\)</span>, we can construct a new grammar <span class="math notranslate nohighlight">\(G_3 = (V_1 \cup V_2, \Sigma_1 \cup \Sigma_2, R_1 \cup R_2 \cup S \rightarrow S_1 \mid S_2)\)</span>, where <span class="math notranslate nohighlight">\(S_1\)</span> and <span class="math notranslate nohighlight">\(S_2\)</span> are the start symbols of <span class="math notranslate nohighlight">\(G_1\)</span> and <span class="math notranslate nohighlight">\(G_2\)</span>, respectively, with subscirpts added. This new grammar generates <span class="math notranslate nohighlight">\(L_1 \cup L_2\)</span>. Note that in order to create the new grammar, we need to add subscripts to non-terminals in the original grammars to serve the following purposes:</p>
<ul class="simple">
<li><p>Avoid Naming Conflicts: if both grammars <span class="math notranslate nohighlight">\(G_1\)</span> and <span class="math notranslate nohighlight">\(G_2\)</span> have non-terminals with the same name (e.g., S, A, B), this could cause ambiguity when combining them. Using subscripts (e.g., <span class="math notranslate nohighlight">\(S_1\)</span>, <span class="math notranslate nohighlight">\(S_2\)</span>, <span class="math notranslate nohighlight">\(A_1\)</span>, <span class="math notranslate nohighlight">\(A_2\)</span>, <span class="math notranslate nohighlight">\(B_1\)</span>, <span class="math notranslate nohighlight">\(B_2\)</span>) ensures that symbols from different grammars remain distinct.</p></li>
<li><p>Maintain Structural Integrity: by keeping the original non-terminals unique, the derivation rules of each grammar remain unchanged, preventing unintended interactions between the two grammars.</p></li>
<li><p>Enable Proper Union Construction: when defining a new start symbol <span class="math notranslate nohighlight">\(S\)</span> with production rules <span class="math notranslate nohighlight">\(S \rightarrow S_1 \mid S_2\)</span>, the subscripts make it clear which original grammar each non-terminal belongs to, facilitating a correct and structured combination of the two languages.</p></li>
</ul>
<p><strong>Example 1</strong>: Let <span class="math notranslate nohighlight">\(L_1 = \{ a^n b^n \mid n \geq 0 \}\)</span> (e.g., “”, “ab”, “aabb”) and <span class="math notranslate nohighlight">\(L_2 = \{ a^m b^{2m} \mid m \geq 0 \}\)</span> (e.g., “”, “abb”, “aabbbb”). Their union <span class="math notranslate nohighlight">\(L_1 \cup L_2\)</span> includes strings like “”, “ab”, “abb”, “aabb”, “aabbbb”, etc.</p>
<p>The CFG <span class="math notranslate nohighlight">\(G_1\)</span> for <span class="math notranslate nohighlight">\(L_1\)</span> has the productions <span class="math notranslate nohighlight">\(S \rightarrow aSb \mid \wedge\)</span>. The CFG <span class="math notranslate nohighlight">\(G_2\)</span> for <span class="math notranslate nohighlight">\(L_2\)</span> has the productions <span class="math notranslate nohighlight">\(S \rightarrow AS \mid BS \mid \wedge; A \rightarrow aA \mid a; B \rightarrow bB \mid b\)</span>. To obtain the CFG for their union:</p>
<ul class="simple">
<li><p>First, add subscripts to non-terminals in <span class="math notranslate nohighlight">\(G_1\)</span>: <span class="math notranslate nohighlight">\(S_1 \rightarrow aS_1b \mid \wedge\)</span></p></li>
<li><p>Second, add subscripts to non-terminals in <span class="math notranslate nohighlight">\(G_2\)</span>: <span class="math notranslate nohighlight">\(S_2 \rightarrow aS_2bb \mid \wedge\)</span></p></li>
<li><p>Third, add a new production rule: <span class="math notranslate nohighlight">\(S \rightarrow S_1 \mid S_2\)</span></p></li>
</ul>
<p>Finally, the CFG for their union: <span class="math notranslate nohighlight">\(G\)</span>: <span class="math notranslate nohighlight">\(\{V=\{S\}, \Sigma=\{a, b\}\, R=\{S_1 \rightarrow aS_1b \mid \wedge; S_2 \rightarrow aS_2bb \mid \wedge; S \rightarrow S_1 \mid S_2\}\}\)</span></p>
<p><strong>Example 2</strong>: The CFG <span class="math notranslate nohighlight">\(G_1\)</span> for <span class="math notranslate nohighlight">\(L_1\)</span> has the productions <span class="math notranslate nohighlight">\(S \rightarrow aS \mid SS \mid SA \mid \wedge; A \rightarrow AA \mid b\)</span>. The CFG <span class="math notranslate nohighlight">\(G_2\)</span> for <span class="math notranslate nohighlight">\(L_2\)</span> has the productions <span class="math notranslate nohighlight">\(S \rightarrow AS \mid BS \mid \wedge; A \rightarrow aA \mid a; B \rightarrow bB \mid b\)</span>. To obtain the CFG for their union:</p>
<ul class="simple">
<li><p>First, add subscripts to non-terminals in <span class="math notranslate nohighlight">\(G_1\)</span>: <span class="math notranslate nohighlight">\(S_1 \rightarrow aS_1 \mid S_1S_1 \mid S_1A_1 \mid \wedge; A_1 \rightarrow A_1A_1 \mid b\)</span></p></li>
<li><p>Second, add subscripts to non-terminals in <span class="math notranslate nohighlight">\(G_2\)</span>: <span class="math notranslate nohighlight">\(S_2 \rightarrow A_2S_2 \mid B_2S_2 \mid \wedge; A_2 \rightarrow aA_2 \mid a; B_2 \rightarrow bB_2 \mid b\)</span></p></li>
<li><p>Third, add a new production rule: <span class="math notranslate nohighlight">\(S \rightarrow S_1 \mid S_2\)</span></p></li>
</ul>
<p>Finally, the CFG for their union: <span class="math notranslate nohighlight">\(G\)</span>: <span class="math notranslate nohighlight">\(\{V=\{S, A, B\}, \Sigma=\{a, b\}\, R=\{S_1 \rightarrow aS_1 \mid S_1S_1 \mid S_1A_1 \mid \wedge; A_1 \rightarrow A_1A_1 \mid b; S_2 \rightarrow A_2S_2 \mid B_2S_2 \mid \wedge; A_2 \rightarrow aA_2 \mid a; B_2 \rightarrow bB_2 \mid b; S \rightarrow S_1 \mid S_2\}\}\)</span>.</p>
<p>Note that even <span class="math notranslate nohighlight">\(G_1\)</span> does not contain the non-terminal <span class="math notranslate nohighlight">\(B\)</span>, we still add the subscript 2 to <span class="math notranslate nohighlight">\(B\)</span> in <span class="math notranslate nohighlight">\(G_2\)</span> to maintain the uniqueness of productions and clearly indicate which original grammar each non-terminal belongs to.</p>
</section>
<section id="id1">
<h3>3.2 Example Python Implementation<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Below, we’ll demonstrate this with Python code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Grammar</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">non_terminals</span><span class="p">,</span> <span class="n">terminals</span><span class="p">,</span> <span class="n">rules</span><span class="p">,</span> <span class="n">start_symbol</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Context-Free Grammar.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            non_terminals (set): Set of non-terminal symbols</span>
<span class="sd">            terminals (set): Set of terminal symbols</span>
<span class="sd">            rules (dict): Dictionary mapping non-terminals to lists of production rules</span>
<span class="sd">            start_symbol (str): The start symbol of the grammar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">non_terminals</span> <span class="o">=</span> <span class="n">non_terminals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminals</span> <span class="o">=</span> <span class="n">terminals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rules</span> <span class="o">=</span> <span class="n">rules</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_symbol</span> <span class="o">=</span> <span class="n">start_symbol</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the grammar.&quot;&quot;&quot;</span>
        <span class="n">grammar_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Start Symbol: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_symbol</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">grammar_str</span> <span class="o">+=</span> <span class="s2">&quot;Production Rules:</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">for</span> <span class="n">nt</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">productions</span><span class="p">)</span>
            <span class="n">grammar_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nt</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">rhs</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">grammar_str</span>


<span class="k">def</span><span class="w"> </span><span class="nf">add_subscripts</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">subscript</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add subscripts to all non-terminals in a grammar to avoid naming conflicts.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        grammar (Grammar): The grammar to add subscripts to</span>
<span class="sd">        subscript (str): The subscript to add</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        Grammar: New grammar with subscripted non-terminals</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create mappings for non-terminals</span>
    <span class="n">nt_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">nt</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nt</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">subscript</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">nt</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">non_terminals</span><span class="p">}</span>
    
    <span class="c1"># Create new set of non-terminals with subscripts</span>
    <span class="n">new_non_terminals</span> <span class="o">=</span> <span class="p">{</span><span class="n">nt_map</span><span class="p">[</span><span class="n">nt</span><span class="p">]</span> <span class="k">for</span> <span class="n">nt</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">non_terminals</span><span class="p">}</span>
    
    <span class="c1"># Create new rules with subscripted non-terminals</span>
    <span class="n">new_rules</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">for</span> <span class="n">nt</span><span class="p">,</span> <span class="n">productions</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">new_nt</span> <span class="o">=</span> <span class="n">nt_map</span><span class="p">[</span><span class="n">nt</span><span class="p">]</span>
        <span class="n">new_productions</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">productions</span><span class="p">:</span>
            <span class="n">new_prod</span> <span class="o">=</span> <span class="n">prod</span>
            <span class="c1"># Replace each non-terminal in the production with its subscripted version</span>
            <span class="k">for</span> <span class="n">original_nt</span> <span class="ow">in</span> <span class="n">grammar</span><span class="o">.</span><span class="n">non_terminals</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">original_nt</span> <span class="ow">in</span> <span class="n">new_prod</span><span class="p">:</span>
                    <span class="c1"># Make sure we only replace whole non-terminals, not substrings</span>
                    <span class="c1"># Using word boundaries to ensure this</span>
                    <span class="n">parts</span> <span class="o">=</span> <span class="n">new_prod</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">part</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parts</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">part</span> <span class="o">==</span> <span class="n">original_nt</span><span class="p">:</span>
                            <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nt_map</span><span class="p">[</span><span class="n">original_nt</span><span class="p">]</span>
                    <span class="n">new_prod</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
            
            <span class="n">new_productions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_prod</span><span class="p">)</span>
        
        <span class="n">new_rules</span><span class="p">[</span><span class="n">new_nt</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_productions</span>
    
    <span class="c1"># Create new grammar with subscripted non-terminals</span>
    <span class="k">return</span> <span class="n">Grammar</span><span class="p">(</span>
        <span class="n">non_terminals</span><span class="o">=</span><span class="n">new_non_terminals</span><span class="p">,</span>
        <span class="n">terminals</span><span class="o">=</span><span class="n">grammar</span><span class="o">.</span><span class="n">terminals</span><span class="p">,</span>
        <span class="n">rules</span><span class="o">=</span><span class="n">new_rules</span><span class="p">,</span>
        <span class="n">start_symbol</span><span class="o">=</span><span class="n">nt_map</span><span class="p">[</span><span class="n">grammar</span><span class="o">.</span><span class="n">start_symbol</span><span class="p">]</span>
    <span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">union_cfl</span><span class="p">(</span><span class="n">grammar1</span><span class="p">,</span> <span class="n">grammar2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct a grammar for the union of two context-free languages.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        grammar1 (Grammar): First CFG</span>
<span class="sd">        grammar2 (Grammar): Second CFG</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        Grammar: A CFG representing the union of the two input CFLs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Add subscripts to both grammars to avoid naming conflicts</span>
    <span class="n">g1_subscripted</span> <span class="o">=</span> <span class="n">add_subscripts</span><span class="p">(</span><span class="n">grammar1</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>
    <span class="n">g2_subscripted</span> <span class="o">=</span> <span class="n">add_subscripts</span><span class="p">(</span><span class="n">grammar2</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span>
    
    <span class="c1"># Create a new start symbol</span>
    <span class="n">new_start</span> <span class="o">=</span> <span class="s2">&quot;S&quot;</span>
    
    <span class="c1"># Ensure the new start symbol is not already used</span>
    <span class="k">while</span> <span class="n">new_start</span> <span class="ow">in</span> <span class="n">g1_subscripted</span><span class="o">.</span><span class="n">non_terminals</span> <span class="ow">or</span> <span class="n">new_start</span> <span class="ow">in</span> <span class="n">g2_subscripted</span><span class="o">.</span><span class="n">non_terminals</span><span class="p">:</span>
        <span class="n">new_start</span> <span class="o">+=</span> <span class="s2">&quot;&#39;&quot;</span>
    
    <span class="c1"># Combine non-terminals</span>
    <span class="n">union_non_terminals</span> <span class="o">=</span> <span class="n">g1_subscripted</span><span class="o">.</span><span class="n">non_terminals</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">g2_subscripted</span><span class="o">.</span><span class="n">non_terminals</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">({</span><span class="n">new_start</span><span class="p">})</span>
    
    <span class="c1"># Combine terminals</span>
    <span class="n">union_terminals</span> <span class="o">=</span> <span class="n">grammar1</span><span class="o">.</span><span class="n">terminals</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">grammar2</span><span class="o">.</span><span class="n">terminals</span><span class="p">)</span>
    
    <span class="c1"># Combine rules</span>
    <span class="n">union_rules</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">g1_subscripted</span><span class="o">.</span><span class="n">rules</span><span class="p">,</span> <span class="o">**</span><span class="n">g2_subscripted</span><span class="o">.</span><span class="n">rules</span><span class="p">}</span>
    
    <span class="c1"># Add the new start rule</span>
    <span class="n">union_rules</span><span class="p">[</span><span class="n">new_start</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">g1_subscripted</span><span class="o">.</span><span class="n">start_symbol</span><span class="p">,</span> <span class="n">g2_subscripted</span><span class="o">.</span><span class="n">start_symbol</span><span class="p">]</span>
    
    <span class="c1"># Create the union grammar</span>
    <span class="n">union_grammar</span> <span class="o">=</span> <span class="n">Grammar</span><span class="p">(</span>
        <span class="n">non_terminals</span><span class="o">=</span><span class="n">union_non_terminals</span><span class="p">,</span>
        <span class="n">terminals</span><span class="o">=</span><span class="n">union_terminals</span><span class="p">,</span>
        <span class="n">rules</span><span class="o">=</span><span class="n">union_rules</span><span class="p">,</span>
        <span class="n">start_symbol</span><span class="o">=</span><span class="n">new_start</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">union_grammar</span>


<span class="c1"># Example usage</span>
<span class="k">def</span><span class="w"> </span><span class="nf">example</span><span class="p">():</span>
    <span class="c1"># Example Grammar 1 - Generates a^n b^n for n ≥ 1</span>
    <span class="n">g1_non_terminals</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">}</span>
    <span class="n">g1_terminals</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">}</span>
    <span class="n">g1_rules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;S&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span>
        <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a A b&quot;</span><span class="p">,</span> <span class="s2">&quot;a b&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">g1_start</span> <span class="o">=</span> <span class="s2">&quot;S&quot;</span>
    <span class="n">grammar1</span> <span class="o">=</span> <span class="n">Grammar</span><span class="p">(</span><span class="n">g1_non_terminals</span><span class="p">,</span> <span class="n">g1_terminals</span><span class="p">,</span> <span class="n">g1_rules</span><span class="p">,</span> <span class="n">g1_start</span><span class="p">)</span>
    
    <span class="c1"># Example Grammar 2 - Generates a^n b^m for n ≥ 1, m ≥ 1</span>
    <span class="n">g2_non_terminals</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">}</span>
    <span class="n">g2_terminals</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">}</span>
    <span class="n">g2_rules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;S&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A B&quot;</span><span class="p">],</span>
        <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a A&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span>
        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;b B&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">g2_start</span> <span class="o">=</span> <span class="s2">&quot;S&quot;</span>
    <span class="n">grammar2</span> <span class="o">=</span> <span class="n">Grammar</span><span class="p">(</span><span class="n">g2_non_terminals</span><span class="p">,</span> <span class="n">g2_terminals</span><span class="p">,</span> <span class="n">g2_rules</span><span class="p">,</span> <span class="n">g2_start</span><span class="p">)</span>
    
    <span class="c1"># Compute the union</span>
    <span class="n">union_grammar</span> <span class="o">=</span> <span class="n">union_cfl</span><span class="p">(</span><span class="n">grammar1</span><span class="p">,</span> <span class="n">grammar2</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Grammar 1 (a^n b^n for n ≥ 1):&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">grammar1</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Grammar 2 (a^n b^m for n ≥ 1, m ≥ 1):&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">grammar2</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Union Grammar:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">union_grammar</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">example</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Grammar 1 (a^n b^n for n ≥ 1):
Start Symbol: S
Production Rules:
S -&gt; A
A -&gt; a A b | a b


Grammar 2 (a^n b^m for n ≥ 1, m ≥ 1):
Start Symbol: S
Production Rules:
S -&gt; A B
A -&gt; a A | a
B -&gt; b B | b


Union Grammar:
Start Symbol: S
Production Rules:
S_1 -&gt; A_1
A_1 -&gt; a A_1 b | a b
S_2 -&gt; A_2 B_2
A_2 -&gt; a A_2 | a
B_2 -&gt; b B_2 | b
S -&gt; S_1 | S_2
</pre></div>
</div>
</div>
</div>
</section>
<section id="concatenation-product">
<h3>3.3 Concatenation (Product)<a class="headerlink" href="#concatenation-product" title="Link to this heading">#</a></h3>
<p><strong>Definition</strong>: The concatenation operation, also known as the product, is a fundamental operation in formal language theory. Given two languages <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span>, their concatenation <span class="math notranslate nohighlight">\(L_1L_2\)</span> is the set of all strings formed by taking a string from <span class="math notranslate nohighlight">\(L_1\)</span> and appending a string from <span class="math notranslate nohighlight">\(L_2\)</span> to it:</p>
<div class="math notranslate nohighlight">
\[L_1L_2 = \{ xy \mid x \in L_1 \text{ , } y \in L_2 \}\]</div>
<p><strong>Theorem</strong>: If <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span> are context-free languages, then their concatenation <span class="math notranslate nohighlight">\(L_1L_2\)</span> is also a context-free language.</p>
<p><strong>Proof</strong>: If we have CFGs <span class="math notranslate nohighlight">\(G_1 = (V_1, \Sigma_1, R_1)\)</span> for <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(G_2 = (V_2, \Sigma_2, R_2)\)</span> for <span class="math notranslate nohighlight">\(L_2\)</span>, we can construct a new grammar <span class="math notranslate nohighlight">\(G_3 = (V_1 \cup V_2, \Sigma_1 \cup \Sigma_2, R_1 \cup R_2 \cup S \rightarrow S_1S_2)\)</span>, where <span class="math notranslate nohighlight">\(S_1\)</span> and <span class="math notranslate nohighlight">\(S_2\)</span> are the start symbols of <span class="math notranslate nohighlight">\(G_1\)</span> and <span class="math notranslate nohighlight">\(G_2\)</span>, respectively, with subscirpts added. This new grammar generates <span class="math notranslate nohighlight">\(L_1L_2\)</span>. Note that in order to create the new grammar, we need to add subscripts to non-terminals in the original grammars. Let’s verify that <span class="math notranslate nohighlight">\(L(G_3) = L(G_1)L(G_2)\)</span>:</p>
<ul class="simple">
<li><p>For any string <span class="math notranslate nohighlight">\(w \in L(G_3)\)</span>, the derivation must start with <span class="math notranslate nohighlight">\(S \rightarrow S_1S_2\)</span>.</p>
<ul>
<li><p>Then, <span class="math notranslate nohighlight">\(S_1\)</span> derives some string <span class="math notranslate nohighlight">\(x \in L(G_1)\)</span> using rules from <span class="math notranslate nohighlight">\(R_1\)</span>.</p></li>
<li><p>And <span class="math notranslate nohighlight">\(S_2\)</span> derives some string <span class="math notranslate nohighlight">\(y \in L(G_2)\)</span> using rules from <span class="math notranslate nohighlight">\(R_2\)</span>.</p></li>
<li><p>So, <span class="math notranslate nohighlight">\(w = xy \text{ where } x \in L(G_1) \text { and } y \in L(G_2)\)</span>, which means <span class="math notranslate nohighlight">\(w \in L(G_1)L(G_2)\)</span>.</p></li>
</ul>
</li>
<li><p>Conversely, for any string <span class="math notranslate nohighlight">\(w \in L(G_1)L(G_2)\)</span>, we have <span class="math notranslate nohighlight">\(w = xy \text{ where } x \in L(G_1) \text { and } y \in L(G_2)\)</span>:</p>
<ul>
<li><p>Since <span class="math notranslate nohighlight">\(x \in L(G_1)\)</span>, there exists a derivation <span class="math notranslate nohighlight">\(S_1 \overset{*}\Rightarrow x\)</span> using rules from <span class="math notranslate nohighlight">\(R_1\)</span>.</p></li>
<li><p>Since <span class="math notranslate nohighlight">\(y \in L(G_2)\)</span>, there exists a derivation <span class="math notranslate nohighlight">\(S_2 \overset{*}\Rightarrow y\)</span> using rules from <span class="math notranslate nohighlight">\(R_2\)</span>.</p></li>
<li><p>Using the rule <span class="math notranslate nohighlight">\(S \rightarrow S_1S_2\)</span>, we get <span class="math notranslate nohighlight">\(S \Rightarrow S_1S_2 \overset{*}\Rightarrow xy = w\)</span>. So, <span class="math notranslate nohighlight">\(w \in L(G_3)\)</span>.</p></li>
</ul>
</li>
<li><p>Note: the asterisk (*) above the arrow notation <span class="math notranslate nohighlight">\(\overset{*}\Rightarrow\)</span> means zero or more steps of derivation. So, <span class="math notranslate nohighlight">\(S_1 \overset{*}\Rightarrow x\)</span> means that the symbol <span class="math notranslate nohighlight">\(S_1\)</span> can derive <span class="math notranslate nohighlight">\(x\)</span> through a series of production rule applications.</p></li>
</ul>
<p><strong>Example:</strong>
Let <span class="math notranslate nohighlight">\(L_1 = \{a^nb^n \mid n \geq 1\}\)</span> and <span class="math notranslate nohighlight">\(L_2 = \{c^md^m \mid m \geq 1\}\)</span>, their production language <span class="math notranslate nohighlight">\(L = L_1L_2 = \{a^nb^nc^md^m \mid n, m \geq 1 \}\)</span>. For example, if we concatenate <span class="math notranslate nohighlight">\(aabb\)</span> from <span class="math notranslate nohighlight">\(L_1\)</span> with <span class="math notranslate nohighlight">\(ccdd\)</span> from <span class="math notranslate nohighlight">\(L_2\)</span>, we get <span class="math notranslate nohighlight">\(aabbccdd \in L_1L_2\)</span>. Let us find out the CFG for <span class="math notranslate nohighlight">\(L_1L_2\)</span>:</p>
<p>The production rules for <span class="math notranslate nohighlight">\(L_1\)</span> is <span class="math notranslate nohighlight">\(S \rightarrow aSb \mid ab\)</span> and the production rules for <span class="math notranslate nohighlight">\(L_2\)</span> is <span class="math notranslate nohighlight">\(S \rightarrow cSd \mid cd\)</span>. To obtain the CFG for their concatenation:</p>
<ul class="simple">
<li><p>First, add subscripts to non-terminals in <span class="math notranslate nohighlight">\(L_1\)</span>: <span class="math notranslate nohighlight">\(S_1 \rightarrow aS_1b \mid ab\)</span></p></li>
<li><p>Second, add subscripts to non-terminals in <span class="math notranslate nohighlight">\(L_2\)</span>: <span class="math notranslate nohighlight">\(S_2 \rightarrow cS_2d \mid cd\)</span></p></li>
<li><p>Third, add a new production rule: <span class="math notranslate nohighlight">\(S \rightarrow S_1S_2\)</span></p></li>
</ul>
<p>Finally, the CFG for their union: <span class="math notranslate nohighlight">\(G\)</span>: <span class="math notranslate nohighlight">\(\{V=\{S\}, \Sigma=\{a, b, c, d\}, R=\{S_1 \rightarrow aS_1b \mid ab; S_2 \rightarrow cS_2d \mid cd; S \rightarrow S_1S_2\}\}\)</span></p>
</section>
<section id="kleene-closure-kleene-star">
<h3>3.4 Kleene Closure (Kleene Star)<a class="headerlink" href="#kleene-closure-kleene-star" title="Link to this heading">#</a></h3>
<p><strong>Definition</strong>: The Kleene closure (or Kleene star) is a unary operation on a language that produces a new language consisting of all possible concatenations of zero or more strings from the original language. Formally, for a language <span class="math notranslate nohighlight">\(L\)</span>, the Kleene closure <span class="math notranslate nohighlight">\(L^*\)</span> is defined as:</p>
<div class="math notranslate nohighlight">
\[L^* = \{w_1w_2...w_n \mid n \geq 0, w_i \in L \text{ for } 1 \leq i \leq n\}\]</div>
<p>where n = 0 implies the empty string (<span class="math notranslate nohighlight">\(\wedge\)</span>) is in <span class="math notranslate nohighlight">\(L^*\)</span>; n = 1 implies <span class="math notranslate nohighlight">\(L \subseteq L^*\)</span>; n = 2 implies <span class="math notranslate nohighlight">\(LL \subseteq L^*\)</span>, and so on… Equivalently, <span class="math notranslate nohighlight">\(L^*\)</span> can be defined recursively as: <span class="math notranslate nohighlight">\(L^* = \{\wedge \} \cup L \cup LL \cup LLL \cup ...\)</span>. This operation allows to express “zero or more repetitions” of strings from a language, a concept widely used in pattern matching, lexical analysis, and parsing.</p>
<p><strong>Theorem</strong>: If <span class="math notranslate nohighlight">\(L\)</span> is a context-free language, then its Kleene closure <span class="math notranslate nohighlight">\(L^*\)</span> is also a context-free language.</p>
<p><strong>Proof</strong>: Given a CFL <span class="math notranslate nohighlight">\(L\)</span> generated by a CFG <span class="math notranslate nohighlight">\(G = (V, \Sigma, R)\)</span>, we construct a CFG <span class="math notranslate nohighlight">\(G_1 = (V_1, \Sigma_1, R_1)\)</span> that generates <span class="math notranslate nohighlight">\(L^*\)</span>, as follows:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V_1 = V \cup \{S_1\}\)</span>, where <span class="math notranslate nohighlight">\(S_1\)</span> is a new variable not in <span class="math notranslate nohighlight">\(V\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\Sigma_1\)</span> = <span class="math notranslate nohighlight">\(\Sigma\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(R_1\)</span> = <span class="math notranslate nohighlight">\(R \cup \{S_1 \rightarrow SS_1 \mid \wedge\}\)</span>, and <span class="math notranslate nohighlight">\(S_1\)</span> is the start symbol of the newly constructed CFG.</p></li>
</ul>
<p>Let’s verify that <span class="math notranslate nohighlight">\(L(G_1) = L^*\)</span>:</p>
<ul class="simple">
<li><p>For any string <span class="math notranslate nohighlight">\(w \in L(G_1)\)</span>, there are two cases for the initial step in its derivation:</p>
<ul>
<li><p>Case 1: <span class="math notranslate nohighlight">\(S_1 \Rightarrow \wedge\)</span>, so <span class="math notranslate nohighlight">\(w = \wedge\)</span>, which is in <span class="math notranslate nohighlight">\(L^*\)</span> by definition.</p></li>
<li><p>Case 2: <span class="math notranslate nohighlight">\(S_1 \Rightarrow SS_1 \overset{*}\Rightarrow xy \text{ where } S \overset{*}\Rightarrow x \text{ and } S_1 \overset{*}\Rightarrow y\)</span>.</p>
<ul>
<li><p>Since <span class="math notranslate nohighlight">\(S\)</span> is the start symbol of <span class="math notranslate nohighlight">\(G\)</span>, by definition, <span class="math notranslate nohighlight">\(x \in L\)</span>.</p></li>
<li><p>Inductively, <span class="math notranslate nohighlight">\(y \in L(G_1)\)</span> as it is generated by <span class="math notranslate nohighlight">\(S_1\)</span> in <span class="math notranslate nohighlight">\(G_1\)</span>.</p></li>
<li><p>So <span class="math notranslate nohighlight">\(w = xy, \text{ where } x \in L \text{ and } y \in L(G_1)\)</span>, which means <span class="math notranslate nohighlight">\(w \in L^*\)</span>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Conversely, for any string <span class="math notranslate nohighlight">\(w \in L^*\)</span>, we have <span class="math notranslate nohighlight">\(w = w_1w_2...w_n, \text{ where each } w_i \in L, n \geq 0\)</span>.</p>
<ul>
<li><p>If n = 0, then <span class="math notranslate nohighlight">\(w = \wedge\)</span>, and <span class="math notranslate nohighlight">\(S_1 \Rightarrow \wedge\)</span> directly by the rule <span class="math notranslate nohighlight">\(S_1 \rightarrow \wedge\)</span>.</p></li>
<li><p>If n ≥ 1, then <span class="math notranslate nohighlight">\(w = w_1v, \text{ where } w_1 \in L \text{ and } v = w_2w_3...w_n \in L^*\)</span>.</p>
<ul>
<li><p>Since <span class="math notranslate nohighlight">\(w_1 \in L\)</span>, there’s a derivation <span class="math notranslate nohighlight">\(S \overset{*}\Rightarrow w_1\)</span>.</p></li>
<li><p>Inductively, since <span class="math notranslate nohighlight">\(v \in L^*\)</span>, there’s a derivation <span class="math notranslate nohighlight">\(S_1 \overset{*}\Rightarrow v\)</span>.</p></li>
<li><p>Using the rule <span class="math notranslate nohighlight">\(S_1 \rightarrow SS_1\)</span>, we get <span class="math notranslate nohighlight">\(S_1 \Rightarrow SS_1 \overset{*}\Rightarrow w_1S_1 \overset{*}\Rightarrow w_1v = w\)</span></p></li>
<li><p>So, <span class="math notranslate nohighlight">\(w \in L(G_1)\)</span>.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Therefore, <span class="math notranslate nohighlight">\(L(G_1) = L^*\)</span>, proving that the Kleene closure of a context-free language is context-free.</p>
<p>Note that in the constructed CFG we usually replace <span class="math notranslate nohighlight">\(S_1\)</span> with <span class="math notranslate nohighlight">\(S\)</span> and vice versa in all productions to maintain consistency in the CFG, ensuring that <span class="math notranslate nohighlight">\(S\)</span> remains the start symbol in the new grammar, and <span class="math notranslate nohighlight">\(S_1\)</span> is the start symbol of the original grammar. Given that, we can update the procedures to obtain the CFG for <span class="math notranslate nohighlight">\(L^*\)</span> as follows:</p>
<ul class="simple">
<li><p>First, update the start symbol <span class="math notranslate nohighlight">\(S\)</span> by adding subscripts throughout the grammar in <span class="math notranslate nohighlight">\(L\)</span>, changing <span class="math notranslate nohighlight">\(S\)</span> to <span class="math notranslate nohighlight">\(S_1\)</span></p></li>
<li><p>Second, add new production rules: <span class="math notranslate nohighlight">\(S \rightarrow S_1S \mid \wedge\)</span></p></li>
</ul>
<p><strong>Example 1:</strong>
Language <span class="math notranslate nohighlight">\(L\)</span> has production rules <span class="math notranslate nohighlight">\(S \rightarrow AS \mid BS \mid a, A \rightarrow aA \mid a, B \rightarrow bB \mid b\)</span>. The production rules for <span class="math notranslate nohighlight">\(L^*\)</span> can be defined as follows:</p>
<ul class="simple">
<li><p>First, add subscripts to the start symbol <span class="math notranslate nohighlight">\(S_1 \rightarrow AS_1 \mid BS_1 \mid a, A \rightarrow aA \mid a, B \rightarrow bB \mid b\)</span></p></li>
<li><p>Second, add new production rules: <span class="math notranslate nohighlight">\(S \rightarrow S_1S \mid \wedge\)</span></p></li>
</ul>
<p><strong>Example 2:</strong>
Let <span class="math notranslate nohighlight">\(L = \{a^nb^m \mid n, m \geq 1\}\)</span>. The CFG for the given language has production rules <span class="math notranslate nohighlight">\(S \rightarrow AB, A \rightarrow aA \mid a, B \rightarrow bB \mid b\)</span>. The production rules for the Kleene star of <span class="math notranslate nohighlight">\(L\)</span> can be defined as follows:</p>
<ul class="simple">
<li><p>First, add subscripts to the start symbol <span class="math notranslate nohighlight">\(S\)</span> in <span class="math notranslate nohighlight">\(L\)</span>: <span class="math notranslate nohighlight">\(S_1 \rightarrow AB, A \rightarrow aA \mid a, B \rightarrow bB \mid b\)</span></p></li>
<li><p>Second, add new production rules: <span class="math notranslate nohighlight">\(S \rightarrow S_1S \mid \wedge\)</span></p></li>
</ul>
</section>
</section>
<section id="non-closure-properties-intersection-and-complement">
<h2>4. Non-Closure Properties: Intersection and Complement<a class="headerlink" href="#non-closure-properties-intersection-and-complement" title="Link to this heading">#</a></h2>
<p>Unlike regular languages, context-free languages (CFLs) do not remain within the same class under all operations. Two significant operations that do not always preserve context-free properties are intersection and complement.</p>
<section id="intersection">
<h3>4.1 Intersection<a class="headerlink" href="#intersection" title="Link to this heading">#</a></h3>
<p>CFLs are NOT closed under intersection. This means that there exist context-free languages whose intersection results in a language that is not context-free.</p>
<section id="cfls-are-closed-under-intersection-if-they-are-regular-languages">
<h4>4.1.1 CFLs are closed under Intersection if They are Regular Languages<a class="headerlink" href="#cfls-are-closed-under-intersection-if-they-are-regular-languages" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Regular languages are a subset of context-free languages. This means that every regular language is also a context-free language.</p></li>
<li><p>Since regular languages are closed under intersection, if <span class="math notranslate nohighlight">\(L_1, L_2\)</span> are both regular, their intersection <span class="math notranslate nohighlight">\(L_1 \cap L_2\)</span> is also regular.</p></li>
<li><p>Because all regular languages are also context-free, their intersection remains both regular and context-free.</p></li>
</ul>
</section>
<section id="intersection-between-a-cfl-and-a-regular-language">
<h4>4.1.2 Intersection between a CFL and a regular language<a class="headerlink" href="#intersection-between-a-cfl-and-a-regular-language" title="Link to this heading">#</a></h4>
<p>The intersection of a regular language with a context-free language is always context-free. To prove this, the idea is that CFLs are recognized by PDAs, while regular languages are recognized by finite automata (FAs). We construct a new machine that simulates both. Due to space constraints, interested readers are encouraged to consult the further reading for the complete proof details.</p>
</section>
<section id="example-of-cfls-non-closure-under-intersection">
<h4>4.1.3 Example of CFLs Non-Closure under Intersection<a class="headerlink" href="#example-of-cfls-non-closure-under-intersection" title="Link to this heading">#</a></h4>
<p>Consider the following two context-free languages:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(L_1 = \{a^nb^na^m \mid n,m \geq 1\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(L_2 = \{a^mb^na^n \mid n,m \geq 1\}\)</span></p></li>
</ul>
<p>Language <span class="math notranslate nohighlight">\(L_1\)</span> is context-free because we can use the following CFG production rules to generate it:
$<span class="math notranslate nohighlight">\(S \rightarrow XA; X \rightarrow aXb \mid ab; A \rightarrow aA \mid a\)</span>$</p>
<p>Language <span class="math notranslate nohighlight">\(L_2\)</span> is also context-free because we can use the following CFG production rules to generate it:
$<span class="math notranslate nohighlight">\(S \rightarrow AX; X \rightarrow bXa \mid ba; A \rightarrow aA \mid a\)</span>$</p>
<p>Now consider their intersection: <span class="math notranslate nohighlight">\(L_1 \cap L_2 = \{a^nb^na^n \mid n \geq 1\}\)</span>. This language requires an equal number of a’s, b’s, and then a’s, which is known to be NOT context-free. The proof of its non-context-freeness relies on the pumping lemma for CFLs and can be found in the further reading. Since the intersection of two given CFLs resulted in a non-CFL, this proves that CFLs are not closed under intersection.</p>
</section>
<section id="summary-of-closure-properties">
<h4>4.1.4 Summary of Closure Properties<a class="headerlink" href="#summary-of-closure-properties" title="Link to this heading">#</a></h4>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Language Class</p></th>
<th class="head"><p>Closed Under Intersection?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Regular</p></td>
<td><p>✅ Yes (result is regular and also context-free)</p></td>
</tr>
<tr class="row-odd"><td><p>Context-Free</p></td>
<td><p>❌ No (in some cases, intersection may not be context-free)</p></td>
</tr>
<tr class="row-even"><td><p>CFL &amp; Regular</p></td>
<td><p>✅ Yes (result is context-free)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="complement">
<h3>4.2 Complement<a class="headerlink" href="#complement" title="Link to this heading">#</a></h3>
<p>CFLs are not closed under complement. This means that if a language <span class="math notranslate nohighlight">\(L\)</span> is context-free, its complement <span class="math notranslate nohighlight">\(\overline{L}\)</span> (i.e., all strings not in <span class="math notranslate nohighlight">\(L\)</span>) may not necessarily be context-free.</p>
<section id="proof">
<h4>4.2.1 Proof<a class="headerlink" href="#proof" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Let us assume that CFLs were closed under complement. That is, for any context-free language <span class="math notranslate nohighlight">\(L\)</span>, <span class="math notranslate nohighlight">\(\overline{L}\)</span> is also context-free.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span> are two CFLs, then under our assumption, their complements, <span class="math notranslate nohighlight">\(\overline{L_1}\)</span> and <span class="math notranslate nohighlight">\(\overline{L_2}\)</span>, must also be CFLs.</p></li>
<li><p>Since the union of two CFLs is known to be a CFL, it follows that <span class="math notranslate nohighlight">\(\overline{L_1} \cup \overline{L_2}\)</span> is a CFL. Then under our assumption, the complement of <span class="math notranslate nohighlight">\(\overline{L_1} \cup \overline{L_2}\)</span>, which is <span class="math notranslate nohighlight">\(\overline{\overline{L_1} \cup \overline{L_2}}\)</span>, must also be a CFL.</p></li>
<li><p>De Morgan’s Law establishes the following relationship: <span class="math notranslate nohighlight">\(L_1 \cap L_2 = \overline{\overline{L_1} \cup \overline{L_2}}\)</span>. This implies that the language of <span class="math notranslate nohighlight">\(\overline{\overline{L_1} \cup \overline{L_2}}\)</span> is equivalent to <span class="math notranslate nohighlight">\(L_1 \cap L_2\)</span>, representing the intersection of <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span>.</p></li>
<li><p>However, we have already proven that CFLs are not closed under intersection. Since closure under complement would imply closure under intersection (which we know is false), the assumption that CFLs are closed under complement must be incorrect.</p></li>
</ul>
</section>
<section id="cfls-are-closed-under-complement-if-they-are-regular-languages">
<h4>4.2.2 CFLs are Closed Under Complement if They are Regular Languages<a class="headerlink" href="#cfls-are-closed-under-complement-if-they-are-regular-languages" title="Link to this heading">#</a></h4>
<p>Since every regular language is a context-free language, and regular languages are closed under complement, their complements remain regular and thus context-free. Therefore, some context-free languages have complements that are also context-free. This does not contradict the general result that CFLs are not closed under complement. It simply identifies a special case where complementation preserves context-freeness.</p>
</section>
</section>
</section>
<section id="the-pumping-lemma-for-cfls">
<h2>5. The Pumping Lemma for CFLs<a class="headerlink" href="#the-pumping-lemma-for-cfls" title="Link to this heading">#</a></h2>
<section id="introduction-to-the-pumping-lemma">
<h3>5.1 Introduction to the Pumping Lemma<a class="headerlink" href="#introduction-to-the-pumping-lemma" title="Link to this heading">#</a></h3>
<p>The Pumping Lemma for CFLs is a tool used to prove that certain languages are not context-free. It works by showing that any sufficiently long word in a CFL can be “pumped”, meaning part of it can be repeated while still remaining in the language. If a language does not have this property, then it is not context-free.</p>
</section>
<section id="statement-of-the-pumping-lemma">
<h3>5.2 Statement of the Pumping Lemma<a class="headerlink" href="#statement-of-the-pumping-lemma" title="Link to this heading">#</a></h3>
<p>If <span class="math notranslate nohighlight">\(L\)</span> is a context-free language, then there exists a constant <span class="math notranslate nohighlight">\(p &gt; 0\)</span> (called the pumping length) such that any string <span class="math notranslate nohighlight">\(s\)</span> in <span class="math notranslate nohighlight">\(L\)</span> with <span class="math notranslate nohighlight">\(|s| \geq p\)</span> can be split into five parts: $<span class="math notranslate nohighlight">\(s = uvxyz\)</span>$, such that:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(|vxy| \leq p\)</span> (the middle section is not too long to ensure the repetition happens “soon enough” in a sufficiently long string)</p></li>
<li><p><span class="math notranslate nohighlight">\(|vy| \geq 1\)</span> (at least one of <span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(x\)</span> is non-empty since we need something to pump, so at least one of these sections must contain something)</p></li>
<li><p><span class="math notranslate nohighlight">\(uv^nxy^nz \in L \text{ for all } n \geq 0\)</span> (the string remains in the language when <span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(y\)</span> are repeated or removed simultaneously).</p></li>
</ul>
</section>
<section id="intuitive-explanation-of-the-pumping-lemma">
<h3>5.3 Intuitive Explanation of the Pumping Lemma<a class="headerlink" href="#intuitive-explanation-of-the-pumping-lemma" title="Link to this heading">#</a></h3>
<p>The pumping lemma is based on the structure of parse trees for context-free grammars. For any sufficiently long string, the parse tree must be sufficiently deep, causing some non-terminal symbol to appear multiple times on a path from the root to a leaf. This repetition creates a “pumpable” section in the parse tree, allowing certain parts of the string to be repeated while maintaining grammatical correctness. The key insight is that these repetitions must occur in balanced pairs - we can’t pump one part without pumping its corresponding part elsewhere in the string.</p>
<p>The following figure (Figure 1) illustrates a parse tree for a string that has been divided into five parts: <span class="math notranslate nohighlight">\(u, v, x, y, z\)</span>. This specific structure reveals why we can “pump” certain parts of strings in CFLs. Notice how in the tree, there are two occurrences of the non-terminal <span class="math notranslate nohighlight">\(A\)</span>, one at the top and another in the middle of the tree. When a parse tree gets tall enough (for long strings), some non-terminal symbol must repeat along a path from root to leaf. This creates a “loop” in the derivation process. In the diagram:</p>
<ul class="simple">
<li><p>The section <span class="math notranslate nohighlight">\(v\)</span> is generated under the first occurrence of <span class="math notranslate nohighlight">\(A\)</span> via the <span class="math notranslate nohighlight">\(B\)</span> branch</p></li>
<li><p>The section <span class="math notranslate nohighlight">\(y\)</span> is generated under the first occurrence of <span class="math notranslate nohighlight">\(A\)</span> via the <span class="math notranslate nohighlight">\(C\)</span> branch</p></li>
</ul>
<p>Because of this structure, when the non-terminal <span class="math notranslate nohighlight">\(A\)</span> appears again in the derivation, we can repeat this entire subtree any number of times. This causes both <span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(y\)</span> to repeat in a synchronized way.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install required Python packages using pip</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">importlib.util</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>

<span class="k">def</span><span class="w"> </span><span class="nf">install_if_missing</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_spec</span><span class="p">(</span><span class="n">package</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Installing </span><span class="si">{</span><span class="n">package</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="s2">&quot;pip&quot;</span><span class="p">,</span> <span class="s2">&quot;install&quot;</span><span class="p">,</span> <span class="n">package</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">package</span><span class="si">}</span><span class="s2"> has been installed&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">package</span><span class="si">}</span><span class="s2"> is already installed&quot;</span><span class="p">)</span>

<span class="n">required_packages</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;matplotlib&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">required_packages</span><span class="p">:</span>
    <span class="n">install_if_missing</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>matplotlib is already installed
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># In a code cell:</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVG</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">Markdown</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rectangle</span>

<span class="c1"># Load SVG from file</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_svg_from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load SVG content from a file&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">svg_content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG loaded from </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">svg_content</span>
    
<span class="n">loaded_svg</span> <span class="o">=</span> <span class="n">load_svg_from_file</span><span class="p">(</span><span class="s1">&#39;parse_tree_for_pumping_lemma.svg&#39;</span><span class="p">)</span>
<span class="n">html_with_caption</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;figure style=&quot;text-align: center;&quot;&gt;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">loaded_svg</span><span class="si">}</span>
<span class="s2">    &lt;figcaption style=&quot;margin-top: 10px; font-style: italic; color: #666;&quot;&gt;</span>
<span class="s2">        Figure 1: Parse tree diagram showing a string that has been divided into five parts</span>
<span class="s2">    &lt;/figcaption&gt;</span>
<span class="s2">&lt;/figure&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html_with_caption</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SVG loaded from parse_tree_for_pumping_lemma.svg
</pre></div>
</div>
<div class="output text_html">
<figure style="text-align: center;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 300">
  <!-- Root node -->
  <text x="250" y="30" text-anchor="middle" font-family="sans-serif">S</text>
  <line x1="250" y1="35" x2="250" y2="60" stroke="black" stroke-width="1.5"/>
  
  <!-- A node -->
  <text x="250" y="75" text-anchor="middle" font-family="sans-serif">A</text>
  <line x1="250" y1="80" x2="220" y2="100" stroke="black" stroke-width="1.5"/>
  <line x1="250" y1="80" x2="280" y2="100" stroke="black" stroke-width="1.5"/>
  
  <!-- B and C nodes -->
  <text x="220" y="115" text-anchor="middle" font-family="sans-serif">B</text>
  <text x="280" y="115" text-anchor="middle" font-family="sans-serif">C</text>
  
  <!-- C connects to A and another node -->
  <line x1="280" y1="120" x2="260" y2="140" stroke="black" stroke-width="1.5"/>
  <line x1="280" y1="120" x2="300" y2="140" stroke="black" stroke-width="1.5"/>
  
  <!-- A node in the middle -->
  <text x="260" y="155" text-anchor="middle" font-family="sans-serif">A</text>
  
  <!-- Vertical dividing lines (dashed) -->
  <line x1="150" y1="20" x2="150" y2="250" stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="350" y1="20" x2="350" y2="250" stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="230" y1="180" x2="230" y2="250" stroke="black" stroke-width="1"/>
  <line x1="290" y1="180" x2="290" y2="250" stroke="black" stroke-width="1"/>
  
  <!-- Bottom labels -->
  <text x="100" y="270" text-anchor="middle" font-family="sans-serif">u</text>
  <text x="190" y="270" text-anchor="middle" font-family="sans-serif">v</text>
  <text x="260" y="270" text-anchor="middle" font-family="sans-serif">x</text>
  <text x="320" y="270" text-anchor="middle" font-family="sans-serif">y</text>
  <text x="400" y="270" text-anchor="middle" font-family="sans-serif">z</text>
  
  <!-- Bottom braces -->
  <path d="M 50,230 Q 100,220 150,230" fill="none" stroke="black" stroke-width="1"/>
  <path d="M 150,230 Q 190,220 230,230" fill="none" stroke="black" stroke-width="1"/>
  <path d="M 230,230 Q 260,220 290,230" fill="none" stroke="black" stroke-width="1"/>
  <path d="M 290,230 Q 320,220 350,230" fill="none" stroke="black" stroke-width="1"/>
  <path d="M 350,230 Q 400,220 450,230" fill="none" stroke="black" stroke-width="1"/>
</svg>
    <figcaption style="margin-top: 10px; font-style: italic; color: #666;">
        Figure 1: Parse tree diagram showing a string that has been divided into five parts
    </figcaption>
</figure>
</div></div>
</div>
</section>
<section id="using-the-pumping-lemma-to-prove-a-language-is-not-context-free">
<h3>5.4 Using the Pumping Lemma to Prove a Language is Not Context-Free<a class="headerlink" href="#using-the-pumping-lemma-to-prove-a-language-is-not-context-free" title="Link to this heading">#</a></h3>
<p>For any CFL, all sufficiently long strings must have this pumpable structure. If we can find a string in a language that cannot be pumped this way, then the language cannot be context-free. To prove that a language <span class="math notranslate nohighlight">\(L\)</span> is not context-free, we assume it is context-free and satisfies the pumping lemma. Then, we find a string in <span class="math notranslate nohighlight">\(L\)</span> that cannot be pumped while still remaining in <span class="math notranslate nohighlight">\(L\)</span>, leading to a contradiction.</p>
<section id="example-1-language-l-a-nb-na-n-mid-n-geq-0">
<h4>5.4.1 Example 1: Language <span class="math notranslate nohighlight">\(L = \{a^nb^na^n \mid n \geq 0\}\)</span><a class="headerlink" href="#example-1-language-l-a-nb-na-n-mid-n-geq-0" title="Link to this heading">#</a></h4>
<p>Prove Language <span class="math notranslate nohighlight">\(L = \{a^nb^na^n \mid n \geq 0\}\)</span> is not a CFL:</p>
<ul class="simple">
<li><p>Step 1: Assume <span class="math notranslate nohighlight">\(L = \{a^nb^na^n \mid n \geq 0\}\)</span> is context-free, then the pumping lemma applies with some pumping length <span class="math notranslate nohighlight">\(p\)</span></p></li>
<li><p>Step 2: Choose <span class="math notranslate nohighlight">\(s = a^pb^pa^p\)</span>, clearly <span class="math notranslate nohighlight">\(s \in L\)</span> and <span class="math notranslate nohighlight">\(|S| \geq p\)</span>.</p></li>
<li><p>Step 3: According to the pumping lemma, <span class="math notranslate nohighlight">\(s\)</span> can be written as <span class="math notranslate nohighlight">\(uvxyz\)</span> where <span class="math notranslate nohighlight">\(|vy| \geq 1 \text{ and } |vxy| \leq p\)</span></p></li>
<li><p>Step 4: Since <span class="math notranslate nohighlight">\(|vxy| \leq p\)</span>, <span class="math notranslate nohighlight">\(vxy\)</span> consists of characters within the first <span class="math notranslate nohighlight">\(p\)</span> positions of <span class="math notranslate nohighlight">\(s\)</span>. This means <span class="math notranslate nohighlight">\(vxy\)</span> contains only <span class="math notranslate nohighlight">\(a's\)</span>, or <span class="math notranslate nohighlight">\(a's\)</span> and <span class="math notranslate nohighlight">\(b's\)</span>.</p></li>
<li><p>Step 5: Let’s analyze the possible cases for <span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(y\)</span>:</p>
<ul>
<li><p>Case 1: Both <span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(y\)</span> contain only <span class="math notranslate nohighlight">\(a's\)</span>: then <span class="math notranslate nohighlight">\(uv^nxy^nz\)</span> contains too many <span class="math notranslate nohighlight">\(a's\)</span> relative to <span class="math notranslate nohighlight">\(b's\)</span> and the second <span class="math notranslate nohighlight">\(a's\)</span></p></li>
<li><p>Case 2: <span class="math notranslate nohighlight">\(v\)</span> contains only <span class="math notranslate nohighlight">\(a's\)</span> and <span class="math notranslate nohighlight">\(y\)</span> contains only <span class="math notranslate nohighlight">\(b's\)</span> (or vice versa): then <span class="math notranslate nohighlight">\(uv^nxy^nz\)</span> has unequal numbers of <span class="math notranslate nohighlight">\(a's\)</span>, <span class="math notranslate nohighlight">\(b's\)</span>, and <span class="math notranslate nohighlight">\(a's\)</span></p></li>
<li><p>Case 3: Both <span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(y\)</span> contain only <span class="math notranslate nohighlight">\(b's\)</span>: then <span class="math notranslate nohighlight">\(uv^nxy^nz\)</span> contains too many <span class="math notranslate nohighlight">\(b's\)</span> relative to first <span class="math notranslate nohighlight">\(a's\)</span> and second <span class="math notranslate nohighlight">\(a's\)</span></p></li>
<li><p>Case 4: <span class="math notranslate nohighlight">\(v\)</span> contains both <span class="math notranslate nohighlight">\(a's\)</span> and <span class="math notranslate nohighlight">\(b's\)</span>, or <span class="math notranslate nohighlight">\(y\)</span> spans both <span class="math notranslate nohighlight">\(b's\)</span> and second <span class="math notranslate nohighlight">\(a's\)</span>: then <span class="math notranslate nohighlight">\(uv^nxy^nz\)</span> would disrupt the order of <span class="math notranslate nohighlight">\(a's\)</span>, <span class="math notranslate nohighlight">\(b's\)</span>, and second <span class="math notranslate nohighlight">\(a's\)</span></p></li>
</ul>
</li>
<li><p>Step 7: In all cases, <span class="math notranslate nohighlight">\(uv^nxy^nz \notin L\)</span>, contradicting the pumping lemma</p></li>
</ul>
<p>Conclusion: <span class="math notranslate nohighlight">\(L = \{a^nb^na^n \mid n \geq 0\}\)</span> is not context-free.</p>
<p>Concrete example with <span class="math notranslate nohighlight">\(p = 3\)</span> and <span class="math notranslate nohighlight">\(s = aaabbbaaa\)</span>:</p>
<ul class="simple">
<li><p>One possible decomposition: <span class="math notranslate nohighlight">\(u=\wedge, v=aa, x=a, y=bb, z=baaa\)</span>.</p></li>
<li><p>Pumping with i=2: <span class="math notranslate nohighlight">\(uv^2xy^2z = aaaabbbbaaa \notin L\)</span>.</p></li>
<li><p>Pumping with i=0: <span class="math notranslate nohighlight">\(uv^0xy^0z = abaaa \notin L\)</span>.</p></li>
</ul>
</section>
<section id="example-2-language-l-ww-mid-w-in-a-b">
<h4>5.4.2 Example 2: Language <span class="math notranslate nohighlight">\(L = \{ww \mid w \in \{a, b\}^+\}\)</span><a class="headerlink" href="#example-2-language-l-ww-mid-w-in-a-b" title="Link to this heading">#</a></h4>
<p>The language of repeated strings consists of strings that are formed by repeating a substring at least twice. Formally, this can be represented as: <span class="math notranslate nohighlight">\(L = \{ww \mid w \in \{a, b\}^+\}\)</span>, where <span class="math notranslate nohighlight">\(w\)</span> is any non-empty string over the alphabet <span class="math notranslate nohighlight">\(\Sigma = \{a, b\}\)</span>, and <span class="math notranslate nohighlight">\(ww\)</span> denotes the concatenation of <span class="math notranslate nohighlight">\(w\)</span> with itself. Show that it is not a CFL:</p>
<ul class="simple">
<li><p>Step 1: Assume it is context-free, then the pumping lemma applies with some pumping length <span class="math notranslate nohighlight">\(p\)</span>.</p></li>
<li><p>Step 2: Choose <span class="math notranslate nohighlight">\(s = a^pb^pa^pb^p\)</span>, apparently <span class="math notranslate nohighlight">\(s \in L\)</span> since it is the string <span class="math notranslate nohighlight">\(w = a^pb^p\)</span> repeated.</p></li>
<li><p>Step 3: According to the pumping lemma, <span class="math notranslate nohighlight">\(s\)</span> can be written as <span class="math notranslate nohighlight">\(uvxyz\)</span> where <span class="math notranslate nohighlight">\(|vy| \geq 1 \text{ and } |vxy| \leq p\)</span>.</p></li>
<li><p>Step 4: Since <span class="math notranslate nohighlight">\(|vxy| \leq p\)</span>, <span class="math notranslate nohighlight">\(vxy\)</span> must be contained within the first <span class="math notranslate nohighlight">\(p\)</span> characters of <span class="math notranslate nohighlight">\(s\)</span>, meaning <span class="math notranslate nohighlight">\(vxy\)</span> consists of only <span class="math notranslate nohighlight">\(a's\)</span>.</p></li>
<li><p>Step 5: When we pump with i=2: <span class="math notranslate nohighlight">\(uv^2xy^2z\)</span>, this adds more <span class="math notranslate nohighlight">\(a's\)</span> to the first half without changing the second half. The resulting string cannot be of the form <span class="math notranslate nohighlight">\(ww\)</span> since the first half would have more <span class="math notranslate nohighlight">\(a's\)</span> than the second half</p></li>
<li><p>Step 6: Therefore, <span class="math notranslate nohighlight">\(uv^2xy^2z \notin L\)</span>, contradicting the pumping lemma</p></li>
</ul>
<p>Conclusion: <span class="math notranslate nohighlight">\(L = \{ww \mid w \in \{a, b\}^+\}\)</span> is not context-free.</p>
<p>Concrete example with <span class="math notranslate nohighlight">\(p = 3\)</span> and <span class="math notranslate nohighlight">\(s = aaabbbaaabbb\)</span>:</p>
<ul class="simple">
<li><p>One possible decomposition: <span class="math notranslate nohighlight">\(u=\wedge, v=aa, x=a, y=\wedge, z=bbbaaabbb\)</span>.</p></li>
<li><p>Pumping with i=2: <span class="math notranslate nohighlight">\(uv^2xy^2z = aaaabbbaaabbb \notin L\)</span>.</p></li>
<li><p>This is not a repeated string since the first half and second half are not equal: <span class="math notranslate nohighlight">\(aaaabbb \neq aaabbb\)</span>.</p></li>
</ul>
</section>
</section>
</section>
<section id="practice-exercises">
<h2>6. Practice Exercises<a class="headerlink" href="#practice-exercises" title="Link to this heading">#</a></h2>
<section id="exercise-1-closure-properties">
<h3>6.1 Exercise 1: Closure Properties<a class="headerlink" href="#exercise-1-closure-properties" title="Link to this heading">#</a></h3>
<p>Given the following context-free languages:
$<span class="math notranslate nohighlight">\(L_1 = \{a^nb^n \mid n \geq 0\}\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\(L_2 = \{b^nc^n \mid n \geq 0\}\)</span>$</p>
<p>Describe the following languages and determine whether they are context-free:</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(L_1 \cup L_2\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(L_1L2\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(L_1^*\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\((L_1 \cup L_2)^*\)</span></p></li>
</ol>
<p>Modify the palindrome PDA to accept palindromes with a middle marker ‘#’</p>
</section>
<section id="exercise-2-true-or-false">
<h3>6.2 Exercise 2: True or False<a class="headerlink" href="#exercise-2-true-or-false" title="Link to this heading">#</a></h3>
<p>Determine whether each statement is true or false. If false, provide a counterexample.</p>
<ol class="arabic simple">
<li><p>If L₁ and L₂ are context-free languages, then L₁ ∩ L₂ is a context-free language.</p></li>
<li><p>If L is a context-free language, then L* is a context-free language.</p></li>
<li><p>If L is a context-free language, then L^R (the reverse of L) is a context-free language.</p></li>
<li><p>The intersection of a context-free language and a regular language is always context-free.</p></li>
<li><p>If L is context-free and R is regular, then L - R (set difference) is context-free.</p></li>
</ol>
</section>
<section id="exercise-3-non-closure-properties">
<h3>6.3 Exercise 3: Non-Closure Properties<a class="headerlink" href="#exercise-3-non-closure-properties" title="Link to this heading">#</a></h3>
<p>Given the following context-free languages:
$<span class="math notranslate nohighlight">\(L_1 = \{a^nb^n \mid n \geq 0\}\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\(L_2 = \{b^nc^n \mid n \geq 0\}\)</span>$
Determine whether their intersection is context-free. If it is, provide a context-free grammar; if not, prove it using the pumping lemma.</p>
</section>
<section id="exercise-4-the-pumping-lemma">
<h3>6.4 Exercise 4: The Pumping Lemma<a class="headerlink" href="#exercise-4-the-pumping-lemma" title="Link to this heading">#</a></h3>
<p>Determine whether the language <span class="math notranslate nohighlight">\(L = \{a^pb^qc^r \mid p = q \text{ or } q = r\}\)</span> is context-free. Prove your answer.</p>
</section>
</section>
<section id="further-reading">
<h2>7. Further Reading<a class="headerlink" href="#further-reading" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>“Introduction to the Theory of Computation” by Michael Sipser, Section 2.3</p></li>
<li><p>“Introduction to Computer Theory” by Daniel I.A. Cohen, Chapter 16, 17</p></li>
<li><p>“Automata Theory, Languages, and Computation” by Hopcroft, Motwani, and Ullman, Chapter 7</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\Part_2_Context_Free_Languages\Chapter_11"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../Chapter_10/Chapter10_PDA.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Pushdown Automata (PDA)</p>
      </div>
    </a>
    <a class="right-next"
       href="../Chapter_12/Chapter12_Decidability_in_CFG.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">12. </span>Decidability in Context-Free Grammars (CFGs)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-context-free-languages">1. Introduction to Context-free Languages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-python-implementation">2. Example Python Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#closure-properties-of-context-free-languages">3. Closure Properties of Context-free Languages</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#union">3.1 Union</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">3.2 Example Python Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#concatenation-product">3.3 Concatenation (Product)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kleene-closure-kleene-star">3.4 Kleene Closure (Kleene Star)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#non-closure-properties-intersection-and-complement">4. Non-Closure Properties: Intersection and Complement</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intersection">4.1 Intersection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cfls-are-closed-under-intersection-if-they-are-regular-languages">4.1.1 CFLs are closed under Intersection if They are Regular Languages</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#intersection-between-a-cfl-and-a-regular-language">4.1.2 Intersection between a CFL and a regular language</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-cfls-non-closure-under-intersection">4.1.3 Example of CFLs Non-Closure under Intersection</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-of-closure-properties">4.1.4 Summary of Closure Properties</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complement">4.2 Complement</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#proof">4.2.1 Proof</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cfls-are-closed-under-complement-if-they-are-regular-languages">4.2.2 CFLs are Closed Under Complement if They are Regular Languages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pumping-lemma-for-cfls">5. The Pumping Lemma for CFLs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-the-pumping-lemma">5.1 Introduction to the Pumping Lemma</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#statement-of-the-pumping-lemma">5.2 Statement of the Pumping Lemma</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intuitive-explanation-of-the-pumping-lemma">5.3 Intuitive Explanation of the Pumping Lemma</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-pumping-lemma-to-prove-a-language-is-not-context-free">5.4 Using the Pumping Lemma to Prove a Language is Not Context-Free</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-language-l-a-nb-na-n-mid-n-geq-0">5.4.1 Example 1: Language <span class="math notranslate nohighlight">\(L = \{a^nb^na^n \mid n \geq 0\}\)</span></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-language-l-ww-mid-w-in-a-b">5.4.2 Example 2: Language <span class="math notranslate nohighlight">\(L = \{ww \mid w \in \{a, b\}^+\}\)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practice-exercises">6. Practice Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-closure-properties">6.1 Exercise 1: Closure Properties</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-true-or-false">6.2 Exercise 2: True or False</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-non-closure-properties">6.3 Exercise 3: Non-Closure Properties</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-the-pumping-lemma">6.4 Exercise 4: The Pumping Lemma</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">7. Further Reading</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yong Zhang, Dylan Zwick
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Aug 21, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>